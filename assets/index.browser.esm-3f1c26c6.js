var cc=Object.defineProperty;var uc=(n,t,e)=>t in n?cc(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var ae=(n,t,e)=>(uc(n,typeof t!="symbol"?t+"":t,e),e);import{g as Us,b as G,c as Oe,s as lc,a as ko}from"./index-599fe4ef.js";var Ks={exports:{}};Ks.exports;(function(n){(function(t,e){function r(d,a){if(!d)throw new Error(a||"Assertion failed")}function i(d,a){d.super_=a;var l=function(){};l.prototype=a.prototype,d.prototype=new l,d.prototype.constructor=d}function s(d,a,l){if(s.isBN(d))return d;this.negative=0,this.words=null,this.length=0,this.red=null,d!==null&&((a==="le"||a==="be")&&(l=a,a=10),this._init(d||0,a||10,l||"be"))}typeof t=="object"?t.exports=s:e.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=G.Buffer}catch{}s.isBN=function(a){return a instanceof s?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===s.wordSize&&Array.isArray(a.words)},s.max=function(a,l){return a.cmp(l)>0?a:l},s.min=function(a,l){return a.cmp(l)<0?a:l},s.prototype._init=function(a,l,h){if(typeof a=="number")return this._initNumber(a,l,h);if(typeof a=="object")return this._initArray(a,l,h);l==="hex"&&(l=16),r(l===(l|0)&&l>=2&&l<=36),a=a.toString().replace(/\s+/g,"");var y=0;a[0]==="-"&&(y++,this.negative=1),y<a.length&&(l===16?this._parseHex(a,y,h):(this._parseBase(a,l,y),h==="le"&&this._initArray(this.toArray(),l,h)))},s.prototype._initNumber=function(a,l,h){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(r(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),h==="le"&&this._initArray(this.toArray(),l,h)},s.prototype._initArray=function(a,l,h){if(r(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var b,S,_=0;if(h==="be")for(y=a.length-1,b=0;y>=0;y-=3)S=a[y]|a[y-1]<<8|a[y-2]<<16,this.words[b]|=S<<_&67108863,this.words[b+1]=S>>>26-_&67108863,_+=24,_>=26&&(_-=26,b++);else if(h==="le")for(y=0,b=0;y<a.length;y+=3)S=a[y]|a[y+1]<<8|a[y+2]<<16,this.words[b]|=S<<_&67108863,this.words[b+1]=S>>>26-_&67108863,_+=24,_>=26&&(_-=26,b++);return this._strip()};function c(d,a){var l=d.charCodeAt(a);if(l>=48&&l<=57)return l-48;if(l>=65&&l<=70)return l-55;if(l>=97&&l<=102)return l-87;r(!1,"Invalid character in "+d)}function f(d,a,l){var h=c(d,l);return l-1>=a&&(h|=c(d,l-1)<<4),h}s.prototype._parseHex=function(a,l,h){this.length=Math.ceil((a.length-l)/6),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var b=0,S=0,_;if(h==="be")for(y=a.length-1;y>=l;y-=2)_=f(a,l,y)<<b,this.words[S]|=_&67108863,b>=18?(b-=18,S+=1,this.words[S]|=_>>>26):b+=8;else{var p=a.length-l;for(y=p%2===0?l+1:l;y<a.length;y+=2)_=f(a,l,y)<<b,this.words[S]|=_&67108863,b>=18?(b-=18,S+=1,this.words[S]|=_>>>26):b+=8}this._strip()};function g(d,a,l,h){for(var y=0,b=0,S=Math.min(d.length,l),_=a;_<S;_++){var p=d.charCodeAt(_)-48;y*=h,p>=49?b=p-49+10:p>=17?b=p-17+10:b=p,r(p>=0&&b<h,"Invalid character"),y+=b}return y}s.prototype._parseBase=function(a,l,h){this.words=[0],this.length=1;for(var y=0,b=1;b<=67108863;b*=l)y++;y--,b=b/l|0;for(var S=a.length-h,_=S%y,p=Math.min(S,S-_)+h,u=0,w=h;w<p;w+=y)u=g(a,w,w+y,l),this.imuln(b),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(_!==0){var X=1;for(u=g(a,w,a.length,l),w=0;w<_;w++)X*=l;this.imuln(X),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},s.prototype.copy=function(a){a.words=new Array(this.length);for(var l=0;l<this.length;l++)a.words[l]=this.words[l];a.length=this.length,a.negative=this.negative,a.red=this.red};function m(d,a){d.words=a.words,d.length=a.length,d.negative=a.negative,d.red=a.red}if(s.prototype._move=function(a){m(a,this)},s.prototype.clone=function(){var a=new s(null);return this.copy(a),a},s.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=k}catch{s.prototype.inspect=k}else s.prototype.inspect=k;function k(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var A=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],v=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(a,l){a=a||10,l=l|0||1;var h;if(a===16||a==="hex"){h="";for(var y=0,b=0,S=0;S<this.length;S++){var _=this.words[S],p=((_<<y|b)&16777215).toString(16);b=_>>>24-y&16777215,y+=2,y>=26&&(y-=26,S--),b!==0||S!==this.length-1?h=A[6-p.length]+p+h:h=p+h}for(b!==0&&(h=b.toString(16)+h);h.length%l!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}if(a===(a|0)&&a>=2&&a<=36){var u=v[a],w=E[a];h="";var X=this.clone();for(X.negative=0;!X.isZero();){var $=X.modrn(w).toString(a);X=X.idivn(w),X.isZero()?h=$+h:h=A[u-$.length]+$+h}for(this.isZero()&&(h="0"+h);h.length%l!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(a,l){return this.toArrayLike(o,a,l)}),s.prototype.toArray=function(a,l){return this.toArrayLike(Array,a,l)};var I=function(a,l){return a.allocUnsafe?a.allocUnsafe(l):new a(l)};s.prototype.toArrayLike=function(a,l,h){this._strip();var y=this.byteLength(),b=h||Math.max(1,y);r(y<=b,"byte array longer than desired length"),r(b>0,"Requested array length <= 0");var S=I(a,b),_=l==="le"?"LE":"BE";return this["_toArrayLike"+_](S,y),S},s.prototype._toArrayLikeLE=function(a,l){for(var h=0,y=0,b=0,S=0;b<this.length;b++){var _=this.words[b]<<S|y;a[h++]=_&255,h<a.length&&(a[h++]=_>>8&255),h<a.length&&(a[h++]=_>>16&255),S===6?(h<a.length&&(a[h++]=_>>24&255),y=0,S=0):(y=_>>>24,S+=2)}if(h<a.length)for(a[h++]=y;h<a.length;)a[h++]=0},s.prototype._toArrayLikeBE=function(a,l){for(var h=a.length-1,y=0,b=0,S=0;b<this.length;b++){var _=this.words[b]<<S|y;a[h--]=_&255,h>=0&&(a[h--]=_>>8&255),h>=0&&(a[h--]=_>>16&255),S===6?(h>=0&&(a[h--]=_>>24&255),y=0,S=0):(y=_>>>24,S+=2)}if(h>=0)for(a[h--]=y;h>=0;)a[h--]=0},Math.clz32?s.prototype._countBits=function(a){return 32-Math.clz32(a)}:s.prototype._countBits=function(a){var l=a,h=0;return l>=4096&&(h+=13,l>>>=13),l>=64&&(h+=7,l>>>=7),l>=8&&(h+=4,l>>>=4),l>=2&&(h+=2,l>>>=2),h+l},s.prototype._zeroBits=function(a){if(a===0)return 26;var l=a,h=0;return l&8191||(h+=13,l>>>=13),l&127||(h+=7,l>>>=7),l&15||(h+=4,l>>>=4),l&3||(h+=2,l>>>=2),l&1||h++,h},s.prototype.bitLength=function(){var a=this.words[this.length-1],l=this._countBits(a);return(this.length-1)*26+l};function x(d){for(var a=new Array(d.bitLength()),l=0;l<a.length;l++){var h=l/26|0,y=l%26;a[l]=d.words[h]>>>y&1}return a}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,l=0;l<this.length;l++){var h=this._zeroBits(this.words[l]);if(a+=h,h!==26)break}return a},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},s.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var l=0;l<a.length;l++)this.words[l]=this.words[l]|a.words[l];return this._strip()},s.prototype.ior=function(a){return r((this.negative|a.negative)===0),this.iuor(a)},s.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},s.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},s.prototype.iuand=function(a){var l;this.length>a.length?l=a:l=this;for(var h=0;h<l.length;h++)this.words[h]=this.words[h]&a.words[h];return this.length=l.length,this._strip()},s.prototype.iand=function(a){return r((this.negative|a.negative)===0),this.iuand(a)},s.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},s.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},s.prototype.iuxor=function(a){var l,h;this.length>a.length?(l=this,h=a):(l=a,h=this);for(var y=0;y<h.length;y++)this.words[y]=l.words[y]^h.words[y];if(this!==l)for(;y<l.length;y++)this.words[y]=l.words[y];return this.length=l.length,this._strip()},s.prototype.ixor=function(a){return r((this.negative|a.negative)===0),this.iuxor(a)},s.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},s.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},s.prototype.inotn=function(a){r(typeof a=="number"&&a>=0);var l=Math.ceil(a/26)|0,h=a%26;this._expand(l),h>0&&l--;for(var y=0;y<l;y++)this.words[y]=~this.words[y]&67108863;return h>0&&(this.words[y]=~this.words[y]&67108863>>26-h),this._strip()},s.prototype.notn=function(a){return this.clone().inotn(a)},s.prototype.setn=function(a,l){r(typeof a=="number"&&a>=0);var h=a/26|0,y=a%26;return this._expand(h+1),l?this.words[h]=this.words[h]|1<<y:this.words[h]=this.words[h]&~(1<<y),this._strip()},s.prototype.iadd=function(a){var l;if(this.negative!==0&&a.negative===0)return this.negative=0,l=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,l=this.isub(a),a.negative=1,l._normSign();var h,y;this.length>a.length?(h=this,y=a):(h=a,y=this);for(var b=0,S=0;S<y.length;S++)l=(h.words[S]|0)+(y.words[S]|0)+b,this.words[S]=l&67108863,b=l>>>26;for(;b!==0&&S<h.length;S++)l=(h.words[S]|0)+b,this.words[S]=l&67108863,b=l>>>26;if(this.length=h.length,b!==0)this.words[this.length]=b,this.length++;else if(h!==this)for(;S<h.length;S++)this.words[S]=h.words[S];return this},s.prototype.add=function(a){var l;return a.negative!==0&&this.negative===0?(a.negative=0,l=this.sub(a),a.negative^=1,l):a.negative===0&&this.negative!==0?(this.negative=0,l=a.sub(this),this.negative=1,l):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},s.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var l=this.iadd(a);return a.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var h=this.cmp(a);if(h===0)return this.negative=0,this.length=1,this.words[0]=0,this;var y,b;h>0?(y=this,b=a):(y=a,b=this);for(var S=0,_=0;_<b.length;_++)l=(y.words[_]|0)-(b.words[_]|0)+S,S=l>>26,this.words[_]=l&67108863;for(;S!==0&&_<y.length;_++)l=(y.words[_]|0)+S,S=l>>26,this.words[_]=l&67108863;if(S===0&&_<y.length&&y!==this)for(;_<y.length;_++)this.words[_]=y.words[_];return this.length=Math.max(this.length,_),y!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(a){return this.clone().isub(a)};function M(d,a,l){l.negative=a.negative^d.negative;var h=d.length+a.length|0;l.length=h,h=h-1|0;var y=d.words[0]|0,b=a.words[0]|0,S=y*b,_=S&67108863,p=S/67108864|0;l.words[0]=_;for(var u=1;u<h;u++){for(var w=p>>>26,X=p&67108863,$=Math.min(u,a.length-1),Q=Math.max(0,u-d.length+1);Q<=$;Q++){var vt=u-Q|0;y=d.words[vt]|0,b=a.words[Q]|0,S=y*b+X,w+=S/67108864|0,X=S&67108863}l.words[u]=X|0,p=w|0}return p!==0?l.words[u]=p|0:l.length--,l._strip()}var z=function(a,l,h){var y=a.words,b=l.words,S=h.words,_=0,p,u,w,X=y[0]|0,$=X&8191,Q=X>>>13,vt=y[1]|0,at=vt&8191,lt=vt>>>13,Sr=y[2]|0,pt=Sr&8191,Et=Sr>>>13,pi=y[3]|0,At=pi&8191,Bt=pi>>>13,gi=y[4]|0,Rt=gi&8191,Mt=gi>>>13,yi=y[5]|0,Pt=yi&8191,Tt=yi>>>13,mi=y[6]|0,Lt=mi&8191,Ct=mi>>>13,bi=y[7]|0,Ot=bi&8191,Nt=bi>>>13,wi=y[8]|0,zt=wi&8191,Ut=wi>>>13,ki=y[9]|0,Kt=ki&8191,Ft=ki>>>13,vi=b[0]|0,Dt=vi&8191,Wt=vi>>>13,Si=b[1]|0,qt=Si&8191,Ht=Si>>>13,xi=b[2]|0,$t=xi&8191,Vt=xi>>>13,_i=b[3]|0,jt=_i&8191,Gt=_i>>>13,Ii=b[4]|0,Zt=Ii&8191,Yt=Ii>>>13,Ei=b[5]|0,Jt=Ei&8191,Xt=Ei>>>13,Ai=b[6]|0,Qt=Ai&8191,te=Ai>>>13,Bi=b[7]|0,ee=Bi&8191,re=Bi>>>13,Ri=b[8]|0,ne=Ri&8191,se=Ri>>>13,Mi=b[9]|0,ie=Mi&8191,oe=Mi>>>13;h.negative=a.negative^l.negative,h.length=19,p=Math.imul($,Dt),u=Math.imul($,Wt),u=u+Math.imul(Q,Dt)|0,w=Math.imul(Q,Wt);var $n=(_+p|0)+((u&8191)<<13)|0;_=(w+(u>>>13)|0)+($n>>>26)|0,$n&=67108863,p=Math.imul(at,Dt),u=Math.imul(at,Wt),u=u+Math.imul(lt,Dt)|0,w=Math.imul(lt,Wt),p=p+Math.imul($,qt)|0,u=u+Math.imul($,Ht)|0,u=u+Math.imul(Q,qt)|0,w=w+Math.imul(Q,Ht)|0;var Vn=(_+p|0)+((u&8191)<<13)|0;_=(w+(u>>>13)|0)+(Vn>>>26)|0,Vn&=67108863,p=Math.imul(pt,Dt),u=Math.imul(pt,Wt),u=u+Math.imul(Et,Dt)|0,w=Math.imul(Et,Wt),p=p+Math.imul(at,qt)|0,u=u+Math.imul(at,Ht)|0,u=u+Math.imul(lt,qt)|0,w=w+Math.imul(lt,Ht)|0,p=p+Math.imul($,$t)|0,u=u+Math.imul($,Vt)|0,u=u+Math.imul(Q,$t)|0,w=w+Math.imul(Q,Vt)|0;var jn=(_+p|0)+((u&8191)<<13)|0;_=(w+(u>>>13)|0)+(jn>>>26)|0,jn&=67108863,p=Math.imul(At,Dt),u=Math.imul(At,Wt),u=u+Math.imul(Bt,Dt)|0,w=Math.imul(Bt,Wt),p=p+Math.imul(pt,qt)|0,u=u+Math.imul(pt,Ht)|0,u=u+Math.imul(Et,qt)|0,w=w+Math.imul(Et,Ht)|0,p=p+Math.imul(at,$t)|0,u=u+Math.imul(at,Vt)|0,u=u+Math.imul(lt,$t)|0,w=w+Math.imul(lt,Vt)|0,p=p+Math.imul($,jt)|0,u=u+Math.imul($,Gt)|0,u=u+Math.imul(Q,jt)|0,w=w+Math.imul(Q,Gt)|0;var Gn=(_+p|0)+((u&8191)<<13)|0;_=(w+(u>>>13)|0)+(Gn>>>26)|0,Gn&=67108863,p=Math.imul(Rt,Dt),u=Math.imul(Rt,Wt),u=u+Math.imul(Mt,Dt)|0,w=Math.imul(Mt,Wt),p=p+Math.imul(At,qt)|0,u=u+Math.imul(At,Ht)|0,u=u+Math.imul(Bt,qt)|0,w=w+Math.imul(Bt,Ht)|0,p=p+Math.imul(pt,$t)|0,u=u+Math.imul(pt,Vt)|0,u=u+Math.imul(Et,$t)|0,w=w+Math.imul(Et,Vt)|0,p=p+Math.imul(at,jt)|0,u=u+Math.imul(at,Gt)|0,u=u+Math.imul(lt,jt)|0,w=w+Math.imul(lt,Gt)|0,p=p+Math.imul($,Zt)|0,u=u+Math.imul($,Yt)|0,u=u+Math.imul(Q,Zt)|0,w=w+Math.imul(Q,Yt)|0;var Zn=(_+p|0)+((u&8191)<<13)|0;_=(w+(u>>>13)|0)+(Zn>>>26)|0,Zn&=67108863,p=Math.imul(Pt,Dt),u=Math.imul(Pt,Wt),u=u+Math.imul(Tt,Dt)|0,w=Math.imul(Tt,Wt),p=p+Math.imul(Rt,qt)|0,u=u+Math.imul(Rt,Ht)|0,u=u+Math.imul(Mt,qt)|0,w=w+Math.imul(Mt,Ht)|0,p=p+Math.imul(At,$t)|0,u=u+Math.imul(At,Vt)|0,u=u+Math.imul(Bt,$t)|0,w=w+Math.imul(Bt,Vt)|0,p=p+Math.imul(pt,jt)|0,u=u+Math.imul(pt,Gt)|0,u=u+Math.imul(Et,jt)|0,w=w+Math.imul(Et,Gt)|0,p=p+Math.imul(at,Zt)|0,u=u+Math.imul(at,Yt)|0,u=u+Math.imul(lt,Zt)|0,w=w+Math.imul(lt,Yt)|0,p=p+Math.imul($,Jt)|0,u=u+Math.imul($,Xt)|0,u=u+Math.imul(Q,Jt)|0,w=w+Math.imul(Q,Xt)|0;var Yn=(_+p|0)+((u&8191)<<13)|0;_=(w+(u>>>13)|0)+(Yn>>>26)|0,Yn&=67108863,p=Math.imul(Lt,Dt),u=Math.imul(Lt,Wt),u=u+Math.imul(Ct,Dt)|0,w=Math.imul(Ct,Wt),p=p+Math.imul(Pt,qt)|0,u=u+Math.imul(Pt,Ht)|0,u=u+Math.imul(Tt,qt)|0,w=w+Math.imul(Tt,Ht)|0,p=p+Math.imul(Rt,$t)|0,u=u+Math.imul(Rt,Vt)|0,u=u+Math.imul(Mt,$t)|0,w=w+Math.imul(Mt,Vt)|0,p=p+Math.imul(At,jt)|0,u=u+Math.imul(At,Gt)|0,u=u+Math.imul(Bt,jt)|0,w=w+Math.imul(Bt,Gt)|0,p=p+Math.imul(pt,Zt)|0,u=u+Math.imul(pt,Yt)|0,u=u+Math.imul(Et,Zt)|0,w=w+Math.imul(Et,Yt)|0,p=p+Math.imul(at,Jt)|0,u=u+Math.imul(at,Xt)|0,u=u+Math.imul(lt,Jt)|0,w=w+Math.imul(lt,Xt)|0,p=p+Math.imul($,Qt)|0,u=u+Math.imul($,te)|0,u=u+Math.imul(Q,Qt)|0,w=w+Math.imul(Q,te)|0;var Jn=(_+p|0)+((u&8191)<<13)|0;_=(w+(u>>>13)|0)+(Jn>>>26)|0,Jn&=67108863,p=Math.imul(Ot,Dt),u=Math.imul(Ot,Wt),u=u+Math.imul(Nt,Dt)|0,w=Math.imul(Nt,Wt),p=p+Math.imul(Lt,qt)|0,u=u+Math.imul(Lt,Ht)|0,u=u+Math.imul(Ct,qt)|0,w=w+Math.imul(Ct,Ht)|0,p=p+Math.imul(Pt,$t)|0,u=u+Math.imul(Pt,Vt)|0,u=u+Math.imul(Tt,$t)|0,w=w+Math.imul(Tt,Vt)|0,p=p+Math.imul(Rt,jt)|0,u=u+Math.imul(Rt,Gt)|0,u=u+Math.imul(Mt,jt)|0,w=w+Math.imul(Mt,Gt)|0,p=p+Math.imul(At,Zt)|0,u=u+Math.imul(At,Yt)|0,u=u+Math.imul(Bt,Zt)|0,w=w+Math.imul(Bt,Yt)|0,p=p+Math.imul(pt,Jt)|0,u=u+Math.imul(pt,Xt)|0,u=u+Math.imul(Et,Jt)|0,w=w+Math.imul(Et,Xt)|0,p=p+Math.imul(at,Qt)|0,u=u+Math.imul(at,te)|0,u=u+Math.imul(lt,Qt)|0,w=w+Math.imul(lt,te)|0,p=p+Math.imul($,ee)|0,u=u+Math.imul($,re)|0,u=u+Math.imul(Q,ee)|0,w=w+Math.imul(Q,re)|0;var Xn=(_+p|0)+((u&8191)<<13)|0;_=(w+(u>>>13)|0)+(Xn>>>26)|0,Xn&=67108863,p=Math.imul(zt,Dt),u=Math.imul(zt,Wt),u=u+Math.imul(Ut,Dt)|0,w=Math.imul(Ut,Wt),p=p+Math.imul(Ot,qt)|0,u=u+Math.imul(Ot,Ht)|0,u=u+Math.imul(Nt,qt)|0,w=w+Math.imul(Nt,Ht)|0,p=p+Math.imul(Lt,$t)|0,u=u+Math.imul(Lt,Vt)|0,u=u+Math.imul(Ct,$t)|0,w=w+Math.imul(Ct,Vt)|0,p=p+Math.imul(Pt,jt)|0,u=u+Math.imul(Pt,Gt)|0,u=u+Math.imul(Tt,jt)|0,w=w+Math.imul(Tt,Gt)|0,p=p+Math.imul(Rt,Zt)|0,u=u+Math.imul(Rt,Yt)|0,u=u+Math.imul(Mt,Zt)|0,w=w+Math.imul(Mt,Yt)|0,p=p+Math.imul(At,Jt)|0,u=u+Math.imul(At,Xt)|0,u=u+Math.imul(Bt,Jt)|0,w=w+Math.imul(Bt,Xt)|0,p=p+Math.imul(pt,Qt)|0,u=u+Math.imul(pt,te)|0,u=u+Math.imul(Et,Qt)|0,w=w+Math.imul(Et,te)|0,p=p+Math.imul(at,ee)|0,u=u+Math.imul(at,re)|0,u=u+Math.imul(lt,ee)|0,w=w+Math.imul(lt,re)|0,p=p+Math.imul($,ne)|0,u=u+Math.imul($,se)|0,u=u+Math.imul(Q,ne)|0,w=w+Math.imul(Q,se)|0;var Qn=(_+p|0)+((u&8191)<<13)|0;_=(w+(u>>>13)|0)+(Qn>>>26)|0,Qn&=67108863,p=Math.imul(Kt,Dt),u=Math.imul(Kt,Wt),u=u+Math.imul(Ft,Dt)|0,w=Math.imul(Ft,Wt),p=p+Math.imul(zt,qt)|0,u=u+Math.imul(zt,Ht)|0,u=u+Math.imul(Ut,qt)|0,w=w+Math.imul(Ut,Ht)|0,p=p+Math.imul(Ot,$t)|0,u=u+Math.imul(Ot,Vt)|0,u=u+Math.imul(Nt,$t)|0,w=w+Math.imul(Nt,Vt)|0,p=p+Math.imul(Lt,jt)|0,u=u+Math.imul(Lt,Gt)|0,u=u+Math.imul(Ct,jt)|0,w=w+Math.imul(Ct,Gt)|0,p=p+Math.imul(Pt,Zt)|0,u=u+Math.imul(Pt,Yt)|0,u=u+Math.imul(Tt,Zt)|0,w=w+Math.imul(Tt,Yt)|0,p=p+Math.imul(Rt,Jt)|0,u=u+Math.imul(Rt,Xt)|0,u=u+Math.imul(Mt,Jt)|0,w=w+Math.imul(Mt,Xt)|0,p=p+Math.imul(At,Qt)|0,u=u+Math.imul(At,te)|0,u=u+Math.imul(Bt,Qt)|0,w=w+Math.imul(Bt,te)|0,p=p+Math.imul(pt,ee)|0,u=u+Math.imul(pt,re)|0,u=u+Math.imul(Et,ee)|0,w=w+Math.imul(Et,re)|0,p=p+Math.imul(at,ne)|0,u=u+Math.imul(at,se)|0,u=u+Math.imul(lt,ne)|0,w=w+Math.imul(lt,se)|0,p=p+Math.imul($,ie)|0,u=u+Math.imul($,oe)|0,u=u+Math.imul(Q,ie)|0,w=w+Math.imul(Q,oe)|0;var ts=(_+p|0)+((u&8191)<<13)|0;_=(w+(u>>>13)|0)+(ts>>>26)|0,ts&=67108863,p=Math.imul(Kt,qt),u=Math.imul(Kt,Ht),u=u+Math.imul(Ft,qt)|0,w=Math.imul(Ft,Ht),p=p+Math.imul(zt,$t)|0,u=u+Math.imul(zt,Vt)|0,u=u+Math.imul(Ut,$t)|0,w=w+Math.imul(Ut,Vt)|0,p=p+Math.imul(Ot,jt)|0,u=u+Math.imul(Ot,Gt)|0,u=u+Math.imul(Nt,jt)|0,w=w+Math.imul(Nt,Gt)|0,p=p+Math.imul(Lt,Zt)|0,u=u+Math.imul(Lt,Yt)|0,u=u+Math.imul(Ct,Zt)|0,w=w+Math.imul(Ct,Yt)|0,p=p+Math.imul(Pt,Jt)|0,u=u+Math.imul(Pt,Xt)|0,u=u+Math.imul(Tt,Jt)|0,w=w+Math.imul(Tt,Xt)|0,p=p+Math.imul(Rt,Qt)|0,u=u+Math.imul(Rt,te)|0,u=u+Math.imul(Mt,Qt)|0,w=w+Math.imul(Mt,te)|0,p=p+Math.imul(At,ee)|0,u=u+Math.imul(At,re)|0,u=u+Math.imul(Bt,ee)|0,w=w+Math.imul(Bt,re)|0,p=p+Math.imul(pt,ne)|0,u=u+Math.imul(pt,se)|0,u=u+Math.imul(Et,ne)|0,w=w+Math.imul(Et,se)|0,p=p+Math.imul(at,ie)|0,u=u+Math.imul(at,oe)|0,u=u+Math.imul(lt,ie)|0,w=w+Math.imul(lt,oe)|0;var es=(_+p|0)+((u&8191)<<13)|0;_=(w+(u>>>13)|0)+(es>>>26)|0,es&=67108863,p=Math.imul(Kt,$t),u=Math.imul(Kt,Vt),u=u+Math.imul(Ft,$t)|0,w=Math.imul(Ft,Vt),p=p+Math.imul(zt,jt)|0,u=u+Math.imul(zt,Gt)|0,u=u+Math.imul(Ut,jt)|0,w=w+Math.imul(Ut,Gt)|0,p=p+Math.imul(Ot,Zt)|0,u=u+Math.imul(Ot,Yt)|0,u=u+Math.imul(Nt,Zt)|0,w=w+Math.imul(Nt,Yt)|0,p=p+Math.imul(Lt,Jt)|0,u=u+Math.imul(Lt,Xt)|0,u=u+Math.imul(Ct,Jt)|0,w=w+Math.imul(Ct,Xt)|0,p=p+Math.imul(Pt,Qt)|0,u=u+Math.imul(Pt,te)|0,u=u+Math.imul(Tt,Qt)|0,w=w+Math.imul(Tt,te)|0,p=p+Math.imul(Rt,ee)|0,u=u+Math.imul(Rt,re)|0,u=u+Math.imul(Mt,ee)|0,w=w+Math.imul(Mt,re)|0,p=p+Math.imul(At,ne)|0,u=u+Math.imul(At,se)|0,u=u+Math.imul(Bt,ne)|0,w=w+Math.imul(Bt,se)|0,p=p+Math.imul(pt,ie)|0,u=u+Math.imul(pt,oe)|0,u=u+Math.imul(Et,ie)|0,w=w+Math.imul(Et,oe)|0;var rs=(_+p|0)+((u&8191)<<13)|0;_=(w+(u>>>13)|0)+(rs>>>26)|0,rs&=67108863,p=Math.imul(Kt,jt),u=Math.imul(Kt,Gt),u=u+Math.imul(Ft,jt)|0,w=Math.imul(Ft,Gt),p=p+Math.imul(zt,Zt)|0,u=u+Math.imul(zt,Yt)|0,u=u+Math.imul(Ut,Zt)|0,w=w+Math.imul(Ut,Yt)|0,p=p+Math.imul(Ot,Jt)|0,u=u+Math.imul(Ot,Xt)|0,u=u+Math.imul(Nt,Jt)|0,w=w+Math.imul(Nt,Xt)|0,p=p+Math.imul(Lt,Qt)|0,u=u+Math.imul(Lt,te)|0,u=u+Math.imul(Ct,Qt)|0,w=w+Math.imul(Ct,te)|0,p=p+Math.imul(Pt,ee)|0,u=u+Math.imul(Pt,re)|0,u=u+Math.imul(Tt,ee)|0,w=w+Math.imul(Tt,re)|0,p=p+Math.imul(Rt,ne)|0,u=u+Math.imul(Rt,se)|0,u=u+Math.imul(Mt,ne)|0,w=w+Math.imul(Mt,se)|0,p=p+Math.imul(At,ie)|0,u=u+Math.imul(At,oe)|0,u=u+Math.imul(Bt,ie)|0,w=w+Math.imul(Bt,oe)|0;var ns=(_+p|0)+((u&8191)<<13)|0;_=(w+(u>>>13)|0)+(ns>>>26)|0,ns&=67108863,p=Math.imul(Kt,Zt),u=Math.imul(Kt,Yt),u=u+Math.imul(Ft,Zt)|0,w=Math.imul(Ft,Yt),p=p+Math.imul(zt,Jt)|0,u=u+Math.imul(zt,Xt)|0,u=u+Math.imul(Ut,Jt)|0,w=w+Math.imul(Ut,Xt)|0,p=p+Math.imul(Ot,Qt)|0,u=u+Math.imul(Ot,te)|0,u=u+Math.imul(Nt,Qt)|0,w=w+Math.imul(Nt,te)|0,p=p+Math.imul(Lt,ee)|0,u=u+Math.imul(Lt,re)|0,u=u+Math.imul(Ct,ee)|0,w=w+Math.imul(Ct,re)|0,p=p+Math.imul(Pt,ne)|0,u=u+Math.imul(Pt,se)|0,u=u+Math.imul(Tt,ne)|0,w=w+Math.imul(Tt,se)|0,p=p+Math.imul(Rt,ie)|0,u=u+Math.imul(Rt,oe)|0,u=u+Math.imul(Mt,ie)|0,w=w+Math.imul(Mt,oe)|0;var ss=(_+p|0)+((u&8191)<<13)|0;_=(w+(u>>>13)|0)+(ss>>>26)|0,ss&=67108863,p=Math.imul(Kt,Jt),u=Math.imul(Kt,Xt),u=u+Math.imul(Ft,Jt)|0,w=Math.imul(Ft,Xt),p=p+Math.imul(zt,Qt)|0,u=u+Math.imul(zt,te)|0,u=u+Math.imul(Ut,Qt)|0,w=w+Math.imul(Ut,te)|0,p=p+Math.imul(Ot,ee)|0,u=u+Math.imul(Ot,re)|0,u=u+Math.imul(Nt,ee)|0,w=w+Math.imul(Nt,re)|0,p=p+Math.imul(Lt,ne)|0,u=u+Math.imul(Lt,se)|0,u=u+Math.imul(Ct,ne)|0,w=w+Math.imul(Ct,se)|0,p=p+Math.imul(Pt,ie)|0,u=u+Math.imul(Pt,oe)|0,u=u+Math.imul(Tt,ie)|0,w=w+Math.imul(Tt,oe)|0;var is=(_+p|0)+((u&8191)<<13)|0;_=(w+(u>>>13)|0)+(is>>>26)|0,is&=67108863,p=Math.imul(Kt,Qt),u=Math.imul(Kt,te),u=u+Math.imul(Ft,Qt)|0,w=Math.imul(Ft,te),p=p+Math.imul(zt,ee)|0,u=u+Math.imul(zt,re)|0,u=u+Math.imul(Ut,ee)|0,w=w+Math.imul(Ut,re)|0,p=p+Math.imul(Ot,ne)|0,u=u+Math.imul(Ot,se)|0,u=u+Math.imul(Nt,ne)|0,w=w+Math.imul(Nt,se)|0,p=p+Math.imul(Lt,ie)|0,u=u+Math.imul(Lt,oe)|0,u=u+Math.imul(Ct,ie)|0,w=w+Math.imul(Ct,oe)|0;var os=(_+p|0)+((u&8191)<<13)|0;_=(w+(u>>>13)|0)+(os>>>26)|0,os&=67108863,p=Math.imul(Kt,ee),u=Math.imul(Kt,re),u=u+Math.imul(Ft,ee)|0,w=Math.imul(Ft,re),p=p+Math.imul(zt,ne)|0,u=u+Math.imul(zt,se)|0,u=u+Math.imul(Ut,ne)|0,w=w+Math.imul(Ut,se)|0,p=p+Math.imul(Ot,ie)|0,u=u+Math.imul(Ot,oe)|0,u=u+Math.imul(Nt,ie)|0,w=w+Math.imul(Nt,oe)|0;var as=(_+p|0)+((u&8191)<<13)|0;_=(w+(u>>>13)|0)+(as>>>26)|0,as&=67108863,p=Math.imul(Kt,ne),u=Math.imul(Kt,se),u=u+Math.imul(Ft,ne)|0,w=Math.imul(Ft,se),p=p+Math.imul(zt,ie)|0,u=u+Math.imul(zt,oe)|0,u=u+Math.imul(Ut,ie)|0,w=w+Math.imul(Ut,oe)|0;var cs=(_+p|0)+((u&8191)<<13)|0;_=(w+(u>>>13)|0)+(cs>>>26)|0,cs&=67108863,p=Math.imul(Kt,ie),u=Math.imul(Kt,oe),u=u+Math.imul(Ft,ie)|0,w=Math.imul(Ft,oe);var us=(_+p|0)+((u&8191)<<13)|0;return _=(w+(u>>>13)|0)+(us>>>26)|0,us&=67108863,S[0]=$n,S[1]=Vn,S[2]=jn,S[3]=Gn,S[4]=Zn,S[5]=Yn,S[6]=Jn,S[7]=Xn,S[8]=Qn,S[9]=ts,S[10]=es,S[11]=rs,S[12]=ns,S[13]=ss,S[14]=is,S[15]=os,S[16]=as,S[17]=cs,S[18]=us,_!==0&&(S[19]=_,h.length++),h};Math.imul||(z=M);function N(d,a,l){l.negative=a.negative^d.negative,l.length=d.length+a.length;for(var h=0,y=0,b=0;b<l.length-1;b++){var S=y;y=0;for(var _=h&67108863,p=Math.min(b,a.length-1),u=Math.max(0,b-d.length+1);u<=p;u++){var w=b-u,X=d.words[w]|0,$=a.words[u]|0,Q=X*$,vt=Q&67108863;S=S+(Q/67108864|0)|0,vt=vt+_|0,_=vt&67108863,S=S+(vt>>>26)|0,y+=S>>>26,S&=67108863}l.words[b]=_,h=S,S=y}return h!==0?l.words[b]=h:l.length--,l._strip()}function V(d,a,l){return N(d,a,l)}s.prototype.mulTo=function(a,l){var h,y=this.length+a.length;return this.length===10&&a.length===10?h=z(this,a,l):y<63?h=M(this,a,l):y<1024?h=N(this,a,l):h=V(this,a,l),h},s.prototype.mul=function(a){var l=new s(null);return l.words=new Array(this.length+a.length),this.mulTo(a,l)},s.prototype.mulf=function(a){var l=new s(null);return l.words=new Array(this.length+a.length),V(this,a,l)},s.prototype.imul=function(a){return this.clone().mulTo(a,this)},s.prototype.imuln=function(a){var l=a<0;l&&(a=-a),r(typeof a=="number"),r(a<67108864);for(var h=0,y=0;y<this.length;y++){var b=(this.words[y]|0)*a,S=(b&67108863)+(h&67108863);h>>=26,h+=b/67108864|0,h+=S>>>26,this.words[y]=S&67108863}return h!==0&&(this.words[y]=h,this.length++),this.length=a===0?1:this.length,l?this.ineg():this},s.prototype.muln=function(a){return this.clone().imuln(a)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(a){var l=x(a);if(l.length===0)return new s(1);for(var h=this,y=0;y<l.length&&l[y]===0;y++,h=h.sqr());if(++y<l.length)for(var b=h.sqr();y<l.length;y++,b=b.sqr())l[y]!==0&&(h=h.mul(b));return h},s.prototype.iushln=function(a){r(typeof a=="number"&&a>=0);var l=a%26,h=(a-l)/26,y=67108863>>>26-l<<26-l,b;if(l!==0){var S=0;for(b=0;b<this.length;b++){var _=this.words[b]&y,p=(this.words[b]|0)-_<<l;this.words[b]=p|S,S=_>>>26-l}S&&(this.words[b]=S,this.length++)}if(h!==0){for(b=this.length-1;b>=0;b--)this.words[b+h]=this.words[b];for(b=0;b<h;b++)this.words[b]=0;this.length+=h}return this._strip()},s.prototype.ishln=function(a){return r(this.negative===0),this.iushln(a)},s.prototype.iushrn=function(a,l,h){r(typeof a=="number"&&a>=0);var y;l?y=(l-l%26)/26:y=0;var b=a%26,S=Math.min((a-b)/26,this.length),_=67108863^67108863>>>b<<b,p=h;if(y-=S,y=Math.max(0,y),p){for(var u=0;u<S;u++)p.words[u]=this.words[u];p.length=S}if(S!==0)if(this.length>S)for(this.length-=S,u=0;u<this.length;u++)this.words[u]=this.words[u+S];else this.words[0]=0,this.length=1;var w=0;for(u=this.length-1;u>=0&&(w!==0||u>=y);u--){var X=this.words[u]|0;this.words[u]=w<<26-b|X>>>b,w=X&_}return p&&w!==0&&(p.words[p.length++]=w),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(a,l,h){return r(this.negative===0),this.iushrn(a,l,h)},s.prototype.shln=function(a){return this.clone().ishln(a)},s.prototype.ushln=function(a){return this.clone().iushln(a)},s.prototype.shrn=function(a){return this.clone().ishrn(a)},s.prototype.ushrn=function(a){return this.clone().iushrn(a)},s.prototype.testn=function(a){r(typeof a=="number"&&a>=0);var l=a%26,h=(a-l)/26,y=1<<l;if(this.length<=h)return!1;var b=this.words[h];return!!(b&y)},s.prototype.imaskn=function(a){r(typeof a=="number"&&a>=0);var l=a%26,h=(a-l)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=h)return this;if(l!==0&&h++,this.length=Math.min(h,this.length),l!==0){var y=67108863^67108863>>>l<<l;this.words[this.length-1]&=y}return this._strip()},s.prototype.maskn=function(a){return this.clone().imaskn(a)},s.prototype.iaddn=function(a){return r(typeof a=="number"),r(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<=a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},s.prototype._iaddn=function(a){this.words[0]+=a;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},s.prototype.isubn=function(a){if(r(typeof a=="number"),r(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this._strip()},s.prototype.addn=function(a){return this.clone().iaddn(a)},s.prototype.subn=function(a){return this.clone().isubn(a)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(a,l,h){var y=a.length+h,b;this._expand(y);var S,_=0;for(b=0;b<a.length;b++){S=(this.words[b+h]|0)+_;var p=(a.words[b]|0)*l;S-=p&67108863,_=(S>>26)-(p/67108864|0),this.words[b+h]=S&67108863}for(;b<this.length-h;b++)S=(this.words[b+h]|0)+_,_=S>>26,this.words[b+h]=S&67108863;if(_===0)return this._strip();for(r(_===-1),_=0,b=0;b<this.length;b++)S=-(this.words[b]|0)+_,_=S>>26,this.words[b]=S&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(a,l){var h=this.length-a.length,y=this.clone(),b=a,S=b.words[b.length-1]|0,_=this._countBits(S);h=26-_,h!==0&&(b=b.ushln(h),y.iushln(h),S=b.words[b.length-1]|0);var p=y.length-b.length,u;if(l!=="mod"){u=new s(null),u.length=p+1,u.words=new Array(u.length);for(var w=0;w<u.length;w++)u.words[w]=0}var X=y.clone()._ishlnsubmul(b,1,p);X.negative===0&&(y=X,u&&(u.words[p]=1));for(var $=p-1;$>=0;$--){var Q=(y.words[b.length+$]|0)*67108864+(y.words[b.length+$-1]|0);for(Q=Math.min(Q/S|0,67108863),y._ishlnsubmul(b,Q,$);y.negative!==0;)Q--,y.negative=0,y._ishlnsubmul(b,1,$),y.isZero()||(y.negative^=1);u&&(u.words[$]=Q)}return u&&u._strip(),y._strip(),l!=="div"&&h!==0&&y.iushrn(h),{div:u||null,mod:y}},s.prototype.divmod=function(a,l,h){if(r(!a.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var y,b,S;return this.negative!==0&&a.negative===0?(S=this.neg().divmod(a,l),l!=="mod"&&(y=S.div.neg()),l!=="div"&&(b=S.mod.neg(),h&&b.negative!==0&&b.iadd(a)),{div:y,mod:b}):this.negative===0&&a.negative!==0?(S=this.divmod(a.neg(),l),l!=="mod"&&(y=S.div.neg()),{div:y,mod:S.mod}):this.negative&a.negative?(S=this.neg().divmod(a.neg(),l),l!=="div"&&(b=S.mod.neg(),h&&b.negative!==0&&b.isub(a)),{div:S.div,mod:b}):a.length>this.length||this.cmp(a)<0?{div:new s(0),mod:this}:a.length===1?l==="div"?{div:this.divn(a.words[0]),mod:null}:l==="mod"?{div:null,mod:new s(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new s(this.modrn(a.words[0]))}:this._wordDiv(a,l)},s.prototype.div=function(a){return this.divmod(a,"div",!1).div},s.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},s.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},s.prototype.divRound=function(a){var l=this.divmod(a);if(l.mod.isZero())return l.div;var h=l.div.negative!==0?l.mod.isub(a):l.mod,y=a.ushrn(1),b=a.andln(1),S=h.cmp(y);return S<0||b===1&&S===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},s.prototype.modrn=function(a){var l=a<0;l&&(a=-a),r(a<=67108863);for(var h=(1<<26)%a,y=0,b=this.length-1;b>=0;b--)y=(h*y+(this.words[b]|0))%a;return l?-y:y},s.prototype.modn=function(a){return this.modrn(a)},s.prototype.idivn=function(a){var l=a<0;l&&(a=-a),r(a<=67108863);for(var h=0,y=this.length-1;y>=0;y--){var b=(this.words[y]|0)+h*67108864;this.words[y]=b/a|0,h=b%a}return this._strip(),l?this.ineg():this},s.prototype.divn=function(a){return this.clone().idivn(a)},s.prototype.egcd=function(a){r(a.negative===0),r(!a.isZero());var l=this,h=a.clone();l.negative!==0?l=l.umod(a):l=l.clone();for(var y=new s(1),b=new s(0),S=new s(0),_=new s(1),p=0;l.isEven()&&h.isEven();)l.iushrn(1),h.iushrn(1),++p;for(var u=h.clone(),w=l.clone();!l.isZero();){for(var X=0,$=1;!(l.words[0]&$)&&X<26;++X,$<<=1);if(X>0)for(l.iushrn(X);X-- >0;)(y.isOdd()||b.isOdd())&&(y.iadd(u),b.isub(w)),y.iushrn(1),b.iushrn(1);for(var Q=0,vt=1;!(h.words[0]&vt)&&Q<26;++Q,vt<<=1);if(Q>0)for(h.iushrn(Q);Q-- >0;)(S.isOdd()||_.isOdd())&&(S.iadd(u),_.isub(w)),S.iushrn(1),_.iushrn(1);l.cmp(h)>=0?(l.isub(h),y.isub(S),b.isub(_)):(h.isub(l),S.isub(y),_.isub(b))}return{a:S,b:_,gcd:h.iushln(p)}},s.prototype._invmp=function(a){r(a.negative===0),r(!a.isZero());var l=this,h=a.clone();l.negative!==0?l=l.umod(a):l=l.clone();for(var y=new s(1),b=new s(0),S=h.clone();l.cmpn(1)>0&&h.cmpn(1)>0;){for(var _=0,p=1;!(l.words[0]&p)&&_<26;++_,p<<=1);if(_>0)for(l.iushrn(_);_-- >0;)y.isOdd()&&y.iadd(S),y.iushrn(1);for(var u=0,w=1;!(h.words[0]&w)&&u<26;++u,w<<=1);if(u>0)for(h.iushrn(u);u-- >0;)b.isOdd()&&b.iadd(S),b.iushrn(1);l.cmp(h)>=0?(l.isub(h),y.isub(b)):(h.isub(l),b.isub(y))}var X;return l.cmpn(1)===0?X=y:X=b,X.cmpn(0)<0&&X.iadd(a),X},s.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var l=this.clone(),h=a.clone();l.negative=0,h.negative=0;for(var y=0;l.isEven()&&h.isEven();y++)l.iushrn(1),h.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;h.isEven();)h.iushrn(1);var b=l.cmp(h);if(b<0){var S=l;l=h,h=S}else if(b===0||h.cmpn(1)===0)break;l.isub(h)}while(!0);return h.iushln(y)},s.prototype.invm=function(a){return this.egcd(a).a.umod(a)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(a){return this.words[0]&a},s.prototype.bincn=function(a){r(typeof a=="number");var l=a%26,h=(a-l)/26,y=1<<l;if(this.length<=h)return this._expand(h+1),this.words[h]|=y,this;for(var b=y,S=h;b!==0&&S<this.length;S++){var _=this.words[S]|0;_+=b,b=_>>>26,_&=67108863,this.words[S]=_}return b!==0&&(this.words[S]=b,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(a){var l=a<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this._strip();var h;if(this.length>1)h=1;else{l&&(a=-a),r(a<=67108863,"Number is too big");var y=this.words[0]|0;h=y===a?0:y<a?-1:1}return this.negative!==0?-h|0:h},s.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var l=this.ucmp(a);return this.negative!==0?-l|0:l},s.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var l=0,h=this.length-1;h>=0;h--){var y=this.words[h]|0,b=a.words[h]|0;if(y!==b){y<b?l=-1:y>b&&(l=1);break}}return l},s.prototype.gtn=function(a){return this.cmpn(a)===1},s.prototype.gt=function(a){return this.cmp(a)===1},s.prototype.gten=function(a){return this.cmpn(a)>=0},s.prototype.gte=function(a){return this.cmp(a)>=0},s.prototype.ltn=function(a){return this.cmpn(a)===-1},s.prototype.lt=function(a){return this.cmp(a)===-1},s.prototype.lten=function(a){return this.cmpn(a)<=0},s.prototype.lte=function(a){return this.cmp(a)<=0},s.prototype.eqn=function(a){return this.cmpn(a)===0},s.prototype.eq=function(a){return this.cmp(a)===0},s.red=function(a){return new T(a)},s.prototype.toRed=function(a){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(a){return this.red=a,this},s.prototype.forceRed=function(a){return r(!this.red,"Already a number in reduction context"),this._forceRed(a)},s.prototype.redAdd=function(a){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},s.prototype.redIAdd=function(a){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},s.prototype.redSub=function(a){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},s.prototype.redISub=function(a){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},s.prototype.redShl=function(a){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},s.prototype.redMul=function(a){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},s.prototype.redIMul=function(a){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(a){return r(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var L={k256:null,p224:null,p192:null,p25519:null};function H(d,a){this.name=d,this.p=new s(a,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}H.prototype._tmp=function(){var a=new s(null);return a.words=new Array(Math.ceil(this.n/13)),a},H.prototype.ireduce=function(a){var l=a,h;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),h=l.bitLength();while(h>this.n);var y=h<this.n?-1:l.ucmp(this.p);return y===0?(l.words[0]=0,l.length=1):y>0?l.isub(this.p):l.strip!==void 0?l.strip():l._strip(),l},H.prototype.split=function(a,l){a.iushrn(this.n,0,l)},H.prototype.imulK=function(a){return a.imul(this.k)};function Z(){H.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(Z,H),Z.prototype.split=function(a,l){for(var h=4194303,y=Math.min(a.length,9),b=0;b<y;b++)l.words[b]=a.words[b];if(l.length=y,a.length<=9){a.words[0]=0,a.length=1;return}var S=a.words[9];for(l.words[l.length++]=S&h,b=10;b<a.length;b++){var _=a.words[b]|0;a.words[b-10]=(_&h)<<4|S>>>22,S=_}S>>>=22,a.words[b-10]=S,S===0&&a.length>10?a.length-=10:a.length-=9},Z.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var l=0,h=0;h<a.length;h++){var y=a.words[h]|0;l+=y*977,a.words[h]=l&67108863,l=y*64+(l/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function j(){H.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(j,H);function P(){H.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(P,H);function U(){H.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(U,H),U.prototype.imulK=function(a){for(var l=0,h=0;h<a.length;h++){var y=(a.words[h]|0)*19+l,b=y&67108863;y>>>=26,a.words[h]=b,l=y}return l!==0&&(a.words[a.length++]=l),a},s._prime=function(a){if(L[a])return L[a];var l;if(a==="k256")l=new Z;else if(a==="p224")l=new j;else if(a==="p192")l=new P;else if(a==="p25519")l=new U;else throw new Error("Unknown prime "+a);return L[a]=l,l};function T(d){if(typeof d=="string"){var a=s._prime(d);this.m=a.p,this.prime=a}else r(d.gtn(1),"modulus must be greater than 1"),this.m=d,this.prime=null}T.prototype._verify1=function(a){r(a.negative===0,"red works only with positives"),r(a.red,"red works only with red numbers")},T.prototype._verify2=function(a,l){r((a.negative|l.negative)===0,"red works only with positives"),r(a.red&&a.red===l.red,"red works only with red numbers")},T.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(m(a,a.umod(this.m)._forceRed(this)),a)},T.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},T.prototype.add=function(a,l){this._verify2(a,l);var h=a.add(l);return h.cmp(this.m)>=0&&h.isub(this.m),h._forceRed(this)},T.prototype.iadd=function(a,l){this._verify2(a,l);var h=a.iadd(l);return h.cmp(this.m)>=0&&h.isub(this.m),h},T.prototype.sub=function(a,l){this._verify2(a,l);var h=a.sub(l);return h.cmpn(0)<0&&h.iadd(this.m),h._forceRed(this)},T.prototype.isub=function(a,l){this._verify2(a,l);var h=a.isub(l);return h.cmpn(0)<0&&h.iadd(this.m),h},T.prototype.shl=function(a,l){return this._verify1(a),this.imod(a.ushln(l))},T.prototype.imul=function(a,l){return this._verify2(a,l),this.imod(a.imul(l))},T.prototype.mul=function(a,l){return this._verify2(a,l),this.imod(a.mul(l))},T.prototype.isqr=function(a){return this.imul(a,a.clone())},T.prototype.sqr=function(a){return this.mul(a,a)},T.prototype.sqrt=function(a){if(a.isZero())return a.clone();var l=this.m.andln(3);if(r(l%2===1),l===3){var h=this.m.add(new s(1)).iushrn(2);return this.pow(a,h)}for(var y=this.m.subn(1),b=0;!y.isZero()&&y.andln(1)===0;)b++,y.iushrn(1);r(!y.isZero());var S=new s(1).toRed(this),_=S.redNeg(),p=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new s(2*u*u).toRed(this);this.pow(u,p).cmp(_)!==0;)u.redIAdd(_);for(var w=this.pow(u,y),X=this.pow(a,y.addn(1).iushrn(1)),$=this.pow(a,y),Q=b;$.cmp(S)!==0;){for(var vt=$,at=0;vt.cmp(S)!==0;at++)vt=vt.redSqr();r(at<Q);var lt=this.pow(w,new s(1).iushln(Q-at-1));X=X.redMul(lt),w=lt.redSqr(),$=$.redMul(w),Q=at}return X},T.prototype.invm=function(a){var l=a._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},T.prototype.pow=function(a,l){if(l.isZero())return new s(1).toRed(this);if(l.cmpn(1)===0)return a.clone();var h=4,y=new Array(1<<h);y[0]=new s(1).toRed(this),y[1]=a;for(var b=2;b<y.length;b++)y[b]=this.mul(y[b-1],a);var S=y[0],_=0,p=0,u=l.bitLength()%26;for(u===0&&(u=26),b=l.length-1;b>=0;b--){for(var w=l.words[b],X=u-1;X>=0;X--){var $=w>>X&1;if(S!==y[0]&&(S=this.sqr(S)),$===0&&_===0){p=0;continue}_<<=1,_|=$,p++,!(p!==h&&(b!==0||X!==0))&&(S=this.mul(S,y[_]),p=0,_=0)}u=26}return S},T.prototype.convertTo=function(a){var l=a.umod(this.m);return l===a?l.clone():l},T.prototype.convertFrom=function(a){var l=a.clone();return l.red=null,l},s.mont=function(a){return new C(a)};function C(d){T.call(this,d),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(C,T),C.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},C.prototype.convertFrom=function(a){var l=this.imod(a.mul(this.rinv));return l.red=null,l},C.prototype.imul=function(a,l){if(a.isZero()||l.isZero())return a.words[0]=0,a.length=1,a;var h=a.imul(l),y=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=h.isub(y).iushrn(this.shift),S=b;return b.cmp(this.m)>=0?S=b.isub(this.m):b.cmpn(0)<0&&(S=b.iadd(this.m)),S._forceRed(this)},C.prototype.mul=function(a,l){if(a.isZero()||l.isZero())return new s(0)._forceRed(this);var h=a.mul(l),y=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=h.isub(y).iushrn(this.shift),S=b;return b.cmp(this.m)>=0?S=b.isub(this.m):b.cmpn(0)<0&&(S=b.iadd(this.m)),S._forceRed(this)},C.prototype.invm=function(a){var l=this.imod(a._invmp(this.m).mul(this.r2));return l._forceRed(this)}})(n,Oe)})(Ks);var vo=Ks.exports;const Pi=Us(vo);var So={exports:{}};(function(n){var t=Object.prototype.hasOwnProperty,e="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1));function i(f,g,m){this.fn=f,this.context=g,this.once=m||!1}function s(f,g,m,k,A){if(typeof m!="function")throw new TypeError("The listener must be a function");var v=new i(m,k||f,A),E=e?e+g:g;return f._events[E]?f._events[E].fn?f._events[E]=[f._events[E],v]:f._events[E].push(v):(f._events[E]=v,f._eventsCount++),f}function o(f,g){--f._eventsCount===0?f._events=new r:delete f._events[g]}function c(){this._events=new r,this._eventsCount=0}c.prototype.eventNames=function(){var g=[],m,k;if(this._eventsCount===0)return g;for(k in m=this._events)t.call(m,k)&&g.push(e?k.slice(1):k);return Object.getOwnPropertySymbols?g.concat(Object.getOwnPropertySymbols(m)):g},c.prototype.listeners=function(g){var m=e?e+g:g,k=this._events[m];if(!k)return[];if(k.fn)return[k.fn];for(var A=0,v=k.length,E=new Array(v);A<v;A++)E[A]=k[A].fn;return E},c.prototype.listenerCount=function(g){var m=e?e+g:g,k=this._events[m];return k?k.fn?1:k.length:0},c.prototype.emit=function(g,m,k,A,v,E){var I=e?e+g:g;if(!this._events[I])return!1;var x=this._events[I],M=arguments.length,z,N;if(x.fn){switch(x.once&&this.removeListener(g,x.fn,void 0,!0),M){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,m),!0;case 3:return x.fn.call(x.context,m,k),!0;case 4:return x.fn.call(x.context,m,k,A),!0;case 5:return x.fn.call(x.context,m,k,A,v),!0;case 6:return x.fn.call(x.context,m,k,A,v,E),!0}for(N=1,z=new Array(M-1);N<M;N++)z[N-1]=arguments[N];x.fn.apply(x.context,z)}else{var V=x.length,L;for(N=0;N<V;N++)switch(x[N].once&&this.removeListener(g,x[N].fn,void 0,!0),M){case 1:x[N].fn.call(x[N].context);break;case 2:x[N].fn.call(x[N].context,m);break;case 3:x[N].fn.call(x[N].context,m,k);break;case 4:x[N].fn.call(x[N].context,m,k,A);break;default:if(!z)for(L=1,z=new Array(M-1);L<M;L++)z[L-1]=arguments[L];x[N].fn.apply(x[N].context,z)}}return!0},c.prototype.on=function(g,m,k){return s(this,g,m,k,!1)},c.prototype.once=function(g,m,k){return s(this,g,m,k,!0)},c.prototype.removeListener=function(g,m,k,A){var v=e?e+g:g;if(!this._events[v])return this;if(!m)return o(this,v),this;var E=this._events[v];if(E.fn)E.fn===m&&(!A||E.once)&&(!k||E.context===k)&&o(this,v);else{for(var I=0,x=[],M=E.length;I<M;I++)(E[I].fn!==m||A&&!E[I].once||k&&E[I].context!==k)&&x.push(E[I]);x.length?this._events[v]=x.length===1?x[0]:x:o(this,v)}return this},c.prototype.removeAllListeners=function(g){var m;return g?(m=e?e+g:g,this._events[m]&&o(this,m)):(this._events=new r,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=e,c.EventEmitter=c,n.exports=c})(So);var xo=So.exports;const xr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Fs(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function Jr(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function Le(n,...t){if(!Fs(n))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(n.length))throw new Error("Uint8Array expected of length "+t+", got length="+n.length)}function fc(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Jr(n.outputLen),Jr(n.blockLen)}function Mr(n,t=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(t&&n.finished)throw new Error("Hash#digest() has already been called")}function _o(n,t){Le(n);const e=t.outputLen;if(n.length<e)throw new Error("digestInto() expects output buffer of length at least "+e)}function hc(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function ur(...n){for(let t=0;t<n.length;t++)n[t].fill(0)}function ls(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function ze(n,t){return n<<32-t|n>>>t}const dc=(()=>new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68)();function pc(n){return n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255}function gc(n){for(let t=0;t<n.length;t++)n[t]=pc(n[t]);return n}const Ti=dc?n=>n:gc,Io=(()=>typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function")(),yc=Array.from({length:256},(n,t)=>t.toString(16).padStart(2,"0"));function Pr(n){if(Le(n),Io)return n.toHex();let t="";for(let e=0;e<n.length;e++)t+=yc[n[e]];return t}const Ve={_0:48,_9:57,A:65,F:70,a:97,f:102};function Li(n){if(n>=Ve._0&&n<=Ve._9)return n-Ve._0;if(n>=Ve.A&&n<=Ve.F)return n-(Ve.A-10);if(n>=Ve.a&&n<=Ve.f)return n-(Ve.a-10)}function Ds(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);if(Io)return Uint8Array.fromHex(n);const t=n.length,e=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(e);for(let i=0,s=0;i<e;i++,s+=2){const o=Li(n.charCodeAt(s)),c=Li(n.charCodeAt(s+1));if(o===void 0||c===void 0){const f=n[s]+n[s+1];throw new Error('hex string expected, got non-hex character "'+f+'" at index '+s)}r[i]=o*16+c}return r}function mc(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function Mn(n){return typeof n=="string"&&(n=mc(n)),Le(n),n}function Xe(...n){let t=0;for(let r=0;r<n.length;r++){const i=n[r];Le(i),t+=i.length}const e=new Uint8Array(t);for(let r=0,i=0;r<n.length;r++){const s=n[r];e.set(s,i),i+=s.length}return e}class Ws{}function qs(n){const t=r=>n().update(Mn(r)).digest(),e=n();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>n(),t}function Eo(n=32){if(xr&&typeof xr.getRandomValues=="function")return xr.getRandomValues(new Uint8Array(n));if(xr&&typeof xr.randomBytes=="function")return Uint8Array.from(xr.randomBytes(n));throw new Error("crypto.getRandomValues must be defined")}function bc(n,t,e,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(t,e,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(e>>i&s),c=Number(e&s),f=r?4:0,g=r?0:4;n.setUint32(t+f,o,r),n.setUint32(t+g,c,r)}function wc(n,t,e){return n&t^~n&e}function kc(n,t,e){return n&t^n&e^t&e}class Ao extends Ws{constructor(t,e,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(t),this.view=ls(this.buffer)}update(t){Mr(this),t=Mn(t),Le(t);const{view:e,buffer:r,blockLen:i}=this,s=t.length;for(let o=0;o<s;){const c=Math.min(i-this.pos,s-o);if(c===i){const f=ls(t);for(;i<=s-o;o+=i)this.process(f,o);continue}r.set(t.subarray(o,o+c),this.pos),this.pos+=c,o+=c,this.pos===i&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Mr(this),_o(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;e[o++]=128,ur(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(r,0),o=0);for(let k=o;k<i;k++)e[k]=0;bc(r,i-8,BigInt(this.length*8),s),this.process(r,0);const c=ls(t),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const g=f/4,m=this.get();if(g>m.length)throw new Error("_sha2: outputLen bigger than state");for(let k=0;k<g;k++)c.setUint32(4*k,m[k],s)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:i,finished:s,destroyed:o,pos:c}=this;return t.destroyed=o,t.finished=s,t.length=i,t.pos=c,i%e&&t.buffer.set(r),t}clone(){return this._cloneInto()}}const tr=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ye=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),cn=BigInt(2**32-1),Ci=BigInt(32);function vc(n,t=!1){return t?{h:Number(n&cn),l:Number(n>>Ci&cn)}:{h:Number(n>>Ci&cn)|0,l:Number(n&cn)|0}}function Bo(n,t=!1){const e=n.length;let r=new Uint32Array(e),i=new Uint32Array(e);for(let s=0;s<e;s++){const{h:o,l:c}=vc(n[s],t);[r[s],i[s]]=[o,c]}return[r,i]}const Oi=(n,t,e)=>n>>>e,Ni=(n,t,e)=>n<<32-e|t>>>e,_r=(n,t,e)=>n>>>e|t<<32-e,Ir=(n,t,e)=>n<<32-e|t>>>e,un=(n,t,e)=>n<<64-e|t>>>e-32,ln=(n,t,e)=>n>>>e-32|t<<64-e,Sc=(n,t,e)=>n<<e|t>>>32-e,xc=(n,t,e)=>t<<e|n>>>32-e,_c=(n,t,e)=>t<<e-32|n>>>64-e,Ic=(n,t,e)=>n<<e-32|t>>>64-e;function je(n,t,e,r){const i=(t>>>0)+(r>>>0);return{h:n+e+(i/2**32|0)|0,l:i|0}}const Ec=(n,t,e)=>(n>>>0)+(t>>>0)+(e>>>0),Ac=(n,t,e,r)=>t+e+r+(n/2**32|0)|0,Bc=(n,t,e,r)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0),Rc=(n,t,e,r,i)=>t+e+r+i+(n/2**32|0)|0,Mc=(n,t,e,r,i)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0)+(i>>>0),Pc=(n,t,e,r,i,s)=>t+e+r+i+s+(n/2**32|0)|0,Tc=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),er=new Uint32Array(64);class Lc extends Ao{constructor(t=32){super(64,t,8,!1),this.A=tr[0]|0,this.B=tr[1]|0,this.C=tr[2]|0,this.D=tr[3]|0,this.E=tr[4]|0,this.F=tr[5]|0,this.G=tr[6]|0,this.H=tr[7]|0}get(){const{A:t,B:e,C:r,D:i,E:s,F:o,G:c,H:f}=this;return[t,e,r,i,s,o,c,f]}set(t,e,r,i,s,o,c,f){this.A=t|0,this.B=e|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=c|0,this.H=f|0}process(t,e){for(let k=0;k<16;k++,e+=4)er[k]=t.getUint32(e,!1);for(let k=16;k<64;k++){const A=er[k-15],v=er[k-2],E=ze(A,7)^ze(A,18)^A>>>3,I=ze(v,17)^ze(v,19)^v>>>10;er[k]=I+er[k-7]+E+er[k-16]|0}let{A:r,B:i,C:s,D:o,E:c,F:f,G:g,H:m}=this;for(let k=0;k<64;k++){const A=ze(c,6)^ze(c,11)^ze(c,25),v=m+A+wc(c,f,g)+Tc[k]+er[k]|0,I=(ze(r,2)^ze(r,13)^ze(r,22))+kc(r,i,s)|0;m=g,g=f,f=c,c=o+v|0,o=s,s=i,i=r,r=v+I|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,c=c+this.E|0,f=f+this.F|0,g=g+this.G|0,m=m+this.H|0,this.set(r,i,s,o,c,f,g,m)}roundClean(){ur(er)}destroy(){this.set(0,0,0,0,0,0,0,0),ur(this.buffer)}}const Ro=(()=>Bo(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))))(),Cc=(()=>Ro[0])(),Oc=(()=>Ro[1])(),rr=new Uint32Array(80),nr=new Uint32Array(80);class Nc extends Ao{constructor(t=64){super(128,t,16,!1),this.Ah=ye[0]|0,this.Al=ye[1]|0,this.Bh=ye[2]|0,this.Bl=ye[3]|0,this.Ch=ye[4]|0,this.Cl=ye[5]|0,this.Dh=ye[6]|0,this.Dl=ye[7]|0,this.Eh=ye[8]|0,this.El=ye[9]|0,this.Fh=ye[10]|0,this.Fl=ye[11]|0,this.Gh=ye[12]|0,this.Gl=ye[13]|0,this.Hh=ye[14]|0,this.Hl=ye[15]|0}get(){const{Ah:t,Al:e,Bh:r,Bl:i,Ch:s,Cl:o,Dh:c,Dl:f,Eh:g,El:m,Fh:k,Fl:A,Gh:v,Gl:E,Hh:I,Hl:x}=this;return[t,e,r,i,s,o,c,f,g,m,k,A,v,E,I,x]}set(t,e,r,i,s,o,c,f,g,m,k,A,v,E,I,x){this.Ah=t|0,this.Al=e|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=c|0,this.Dl=f|0,this.Eh=g|0,this.El=m|0,this.Fh=k|0,this.Fl=A|0,this.Gh=v|0,this.Gl=E|0,this.Hh=I|0,this.Hl=x|0}process(t,e){for(let N=0;N<16;N++,e+=4)rr[N]=t.getUint32(e),nr[N]=t.getUint32(e+=4);for(let N=16;N<80;N++){const V=rr[N-15]|0,L=nr[N-15]|0,H=_r(V,L,1)^_r(V,L,8)^Oi(V,L,7),Z=Ir(V,L,1)^Ir(V,L,8)^Ni(V,L,7),j=rr[N-2]|0,P=nr[N-2]|0,U=_r(j,P,19)^un(j,P,61)^Oi(j,P,6),T=Ir(j,P,19)^ln(j,P,61)^Ni(j,P,6),C=Bc(Z,T,nr[N-7],nr[N-16]),d=Rc(C,H,U,rr[N-7],rr[N-16]);rr[N]=d|0,nr[N]=C|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:c,Cl:f,Dh:g,Dl:m,Eh:k,El:A,Fh:v,Fl:E,Gh:I,Gl:x,Hh:M,Hl:z}=this;for(let N=0;N<80;N++){const V=_r(k,A,14)^_r(k,A,18)^un(k,A,41),L=Ir(k,A,14)^Ir(k,A,18)^ln(k,A,41),H=k&v^~k&I,Z=A&E^~A&x,j=Mc(z,L,Z,Oc[N],nr[N]),P=Pc(j,M,V,H,Cc[N],rr[N]),U=j|0,T=_r(r,i,28)^un(r,i,34)^un(r,i,39),C=Ir(r,i,28)^ln(r,i,34)^ln(r,i,39),d=r&s^r&c^s&c,a=i&o^i&f^o&f;M=I|0,z=x|0,I=v|0,x=E|0,v=k|0,E=A|0,{h:k,l:A}=je(g|0,m|0,P|0,U|0),g=c|0,m=f|0,c=s|0,f=o|0,s=r|0,o=i|0;const l=Ec(U,C,a);r=Ac(l,P,T,d),i=l|0}({h:r,l:i}=je(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=je(this.Bh|0,this.Bl|0,s|0,o|0),{h:c,l:f}=je(this.Ch|0,this.Cl|0,c|0,f|0),{h:g,l:m}=je(this.Dh|0,this.Dl|0,g|0,m|0),{h:k,l:A}=je(this.Eh|0,this.El|0,k|0,A|0),{h:v,l:E}=je(this.Fh|0,this.Fl|0,v|0,E|0),{h:I,l:x}=je(this.Gh|0,this.Gl|0,I|0,x|0),{h:M,l:z}=je(this.Hh|0,this.Hl|0,M|0,z|0),this.set(r,i,s,o,c,f,g,m,k,A,v,E,I,x,M,z)}roundClean(){ur(rr,nr)}destroy(){ur(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Mo=qs(()=>new Lc),zc=qs(()=>new Nc);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Hs=BigInt(0),Ps=BigInt(1);function mr(n,t){if(typeof t!="boolean")throw new Error(n+" boolean expected, got "+t)}function fn(n){const t=n.toString(16);return t.length&1?"0"+t:t}function Po(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?Hs:BigInt("0x"+n)}function Pn(n){return Po(Pr(n))}function Xr(n){return Le(n),Po(Pr(Uint8Array.from(n).reverse()))}function $s(n,t){return Ds(n.toString(16).padStart(t*2,"0"))}function Tn(n,t){return $s(n,t).reverse()}function _t(n,t,e){let r;if(typeof t=="string")try{r=Ds(t)}catch(s){throw new Error(n+" must be hex string or Uint8Array, cause: "+s)}else if(Fs(t))r=Uint8Array.from(t);else throw new Error(n+" must be hex string or Uint8Array");const i=r.length;if(typeof e=="number"&&i!==e)throw new Error(n+" of length "+e+" expected, got "+i);return r}const fs=n=>typeof n=="bigint"&&Hs<=n;function Uc(n,t,e){return fs(n)&&fs(t)&&fs(e)&&t<=n&&n<e}function Br(n,t,e,r){if(!Uc(t,e,r))throw new Error("expected valid "+n+": "+e+" <= n < "+r+", got "+t)}function Kc(n){let t;for(t=0;n>Hs;n>>=Ps,t+=1);return t}const Ln=n=>(Ps<<BigInt(n))-Ps;function Fc(n,t,e){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");const r=v=>new Uint8Array(v),i=v=>Uint8Array.of(v);let s=r(n),o=r(n),c=0;const f=()=>{s.fill(1),o.fill(0),c=0},g=(...v)=>e(o,s,...v),m=(v=r(0))=>{o=g(i(0),v),s=g(),v.length!==0&&(o=g(i(1),v),s=g())},k=()=>{if(c++>=1e3)throw new Error("drbg: tried 1000 values");let v=0;const E=[];for(;v<t;){s=g();const I=s.slice();E.push(I),v+=s.length}return Xe(...E)};return(v,E)=>{f(),m(v);let I;for(;!(I=E(k()));)m();return f(),I}}function rn(n,t,e={}){if(!n||typeof n!="object")throw new Error("expected valid options object");function r(i,s,o){const c=n[i];if(o&&c===void 0)return;const f=typeof c;if(f!==s||c===null)throw new Error(`param "${i}" is invalid: expected ${s}, got ${f}`)}Object.entries(t).forEach(([i,s])=>r(i,s,!1)),Object.entries(e).forEach(([i,s])=>r(i,s,!0))}function mn(n){const t=new WeakMap;return(e,...r)=>{const i=t.get(e);if(i!==void 0)return i;const s=n(e,...r);return t.set(e,s),s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ae=BigInt(0),ge=BigInt(1),dr=BigInt(2),Dc=BigInt(3),To=BigInt(4),Lo=BigInt(5),Co=BigInt(8);function It(n,t){const e=n%t;return e>=Ae?e:t+e}function St(n,t,e){let r=n;for(;t-- >Ae;)r*=r,r%=e;return r}function zi(n,t){if(n===Ae)throw new Error("invert: expected non-zero number");if(t<=Ae)throw new Error("invert: expected positive modulus, got "+t);let e=It(n,t),r=t,i=Ae,s=ge;for(;e!==Ae;){const c=r/e,f=r%e,g=i-s*c;r=e,e=f,i=s,s=g}if(r!==ge)throw new Error("invert: does not exist");return It(i,t)}function Oo(n,t){const e=(n.ORDER+ge)/To,r=n.pow(t,e);if(!n.eql(n.sqr(r),t))throw new Error("Cannot find square root");return r}function Wc(n,t){const e=(n.ORDER-Lo)/Co,r=n.mul(t,dr),i=n.pow(r,e),s=n.mul(t,i),o=n.mul(n.mul(s,dr),i),c=n.mul(s,n.sub(o,n.ONE));if(!n.eql(n.sqr(c),t))throw new Error("Cannot find square root");return c}function qc(n){if(n<BigInt(3))throw new Error("sqrt is not defined for small field");let t=n-ge,e=0;for(;t%dr===Ae;)t/=dr,e++;let r=dr;const i=zr(n);for(;Ui(i,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(e===1)return Oo;let s=i.pow(r,t);const o=(t+ge)/dr;return function(f,g){if(f.is0(g))return g;if(Ui(f,g)!==1)throw new Error("Cannot find square root");let m=e,k=f.mul(f.ONE,s),A=f.pow(g,t),v=f.pow(g,o);for(;!f.eql(A,f.ONE);){if(f.is0(A))return f.ZERO;let E=1,I=f.sqr(A);for(;!f.eql(I,f.ONE);)if(E++,I=f.sqr(I),E===m)throw new Error("Cannot find square root");const x=ge<<BigInt(m-E-1),M=f.pow(k,x);m=E,k=f.sqr(M),A=f.mul(A,k),v=f.mul(v,M)}return v}}function Hc(n){return n%To===Dc?Oo:n%Co===Lo?Wc:qc(n)}const $c=(n,t)=>(It(n,t)&ge)===ge,Vc=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function jc(n){const t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},e=Vc.reduce((r,i)=>(r[i]="function",r),t);return rn(n,e),n}function Gc(n,t,e){if(e<Ae)throw new Error("invalid exponent, negatives unsupported");if(e===Ae)return n.ONE;if(e===ge)return t;let r=n.ONE,i=t;for(;e>Ae;)e&ge&&(r=n.mul(r,i)),i=n.sqr(i),e>>=ge;return r}function No(n,t,e=!1){const r=new Array(t.length).fill(e?n.ZERO:void 0),i=t.reduce((o,c,f)=>n.is0(c)?o:(r[f]=o,n.mul(o,c)),n.ONE),s=n.inv(i);return t.reduceRight((o,c,f)=>n.is0(c)?o:(r[f]=n.mul(o,r[f]),n.mul(o,c)),s),r}function Ui(n,t){const e=(n.ORDER-ge)/dr,r=n.pow(t,e),i=n.eql(r,n.ONE),s=n.eql(r,n.ZERO),o=n.eql(r,n.neg(n.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function Zc(n,t){t!==void 0&&Jr(t);const e=t!==void 0?t:n.toString(2).length,r=Math.ceil(e/8);return{nBitLength:e,nByteLength:r}}function zr(n,t,e=!1,r={}){if(n<=Ae)throw new Error("invalid field: expected ORDER > 0, got "+n);let i,s;if(typeof t=="object"&&t!=null){if(r.sqrt||e)throw new Error("cannot specify opts in two arguments");const m=t;m.BITS&&(i=m.BITS),m.sqrt&&(s=m.sqrt),typeof m.isLE=="boolean"&&(e=m.isLE)}else typeof t=="number"&&(i=t),r.sqrt&&(s=r.sqrt);const{nBitLength:o,nByteLength:c}=Zc(n,i);if(c>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let f;const g=Object.freeze({ORDER:n,isLE:e,BITS:o,BYTES:c,MASK:Ln(o),ZERO:Ae,ONE:ge,create:m=>It(m,n),isValid:m=>{if(typeof m!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof m);return Ae<=m&&m<n},is0:m=>m===Ae,isValidNot0:m=>!g.is0(m)&&g.isValid(m),isOdd:m=>(m&ge)===ge,neg:m=>It(-m,n),eql:(m,k)=>m===k,sqr:m=>It(m*m,n),add:(m,k)=>It(m+k,n),sub:(m,k)=>It(m-k,n),mul:(m,k)=>It(m*k,n),pow:(m,k)=>Gc(g,m,k),div:(m,k)=>It(m*zi(k,n),n),sqrN:m=>m*m,addN:(m,k)=>m+k,subN:(m,k)=>m-k,mulN:(m,k)=>m*k,inv:m=>zi(m,n),sqrt:s||(m=>(f||(f=Hc(n)),f(g,m))),toBytes:m=>e?Tn(m,c):$s(m,c),fromBytes:m=>{if(m.length!==c)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+m.length);return e?Xr(m):Pn(m)},invertBatch:m=>No(g,m),cmov:(m,k,A)=>A?k:m});return Object.freeze(g)}function zo(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const t=n.toString(2).length;return Math.ceil(t/8)}function Uo(n){const t=zo(n);return t+Math.ceil(t/2)}function Yc(n,t,e=!1){const r=n.length,i=zo(t),s=Uo(t);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=e?Xr(n):Pn(n),c=It(o,t-ge)+ge;return e?Tn(c,i):$s(c,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Tr=BigInt(0),pr=BigInt(1);function Vr(n,t){const e=t.negate();return n?e:t}function Ko(n,t,e){const r=t==="pz"?o=>o.pz:o=>o.ez,i=No(n.Fp,e.map(r));return e.map((o,c)=>o.toAffine(i[c])).map(n.fromAffine)}function Fo(n,t){if(!Number.isSafeInteger(n)||n<=0||n>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+n)}function hs(n,t){Fo(n,t);const e=Math.ceil(t/n)+1,r=2**(n-1),i=2**n,s=Ln(n),o=BigInt(n);return{windows:e,windowSize:r,mask:s,maxNumber:i,shiftBy:o}}function Ki(n,t,e){const{windowSize:r,mask:i,maxNumber:s,shiftBy:o}=e;let c=Number(n&i),f=n>>o;c>r&&(c-=s,f+=pr);const g=t*r,m=g+Math.abs(c)-1,k=c===0,A=c<0,v=t%2!==0;return{nextN:f,offset:m,isZero:k,isNeg:A,isNegF:v,offsetF:g}}function Jc(n,t){if(!Array.isArray(n))throw new Error("array expected");n.forEach((e,r)=>{if(!(e instanceof t))throw new Error("invalid point at index "+r)})}function Xc(n,t){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((e,r)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+r)})}const ds=new WeakMap,Do=new WeakMap;function ps(n){return Do.get(n)||1}function Fi(n){if(n!==Tr)throw new Error("invalid wNAF")}function Wo(n,t){return{constTimeNegate:Vr,hasPrecomputes(e){return ps(e)!==1},unsafeLadder(e,r,i=n.ZERO){let s=e;for(;r>Tr;)r&pr&&(i=i.add(s)),s=s.double(),r>>=pr;return i},precomputeWindow(e,r){const{windows:i,windowSize:s}=hs(r,t),o=[];let c=e,f=c;for(let g=0;g<i;g++){f=c,o.push(f);for(let m=1;m<s;m++)f=f.add(c),o.push(f);c=f.double()}return o},wNAF(e,r,i){let s=n.ZERO,o=n.BASE;const c=hs(e,t);for(let f=0;f<c.windows;f++){const{nextN:g,offset:m,isZero:k,isNeg:A,isNegF:v,offsetF:E}=Ki(i,f,c);i=g,k?o=o.add(Vr(v,r[E])):s=s.add(Vr(A,r[m]))}return Fi(i),{p:s,f:o}},wNAFUnsafe(e,r,i,s=n.ZERO){const o=hs(e,t);for(let c=0;c<o.windows&&i!==Tr;c++){const{nextN:f,offset:g,isZero:m,isNeg:k}=Ki(i,c,o);if(i=f,!m){const A=r[g];s=s.add(k?A.negate():A)}}return Fi(i),s},getPrecomputes(e,r,i){let s=ds.get(r);return s||(s=this.precomputeWindow(r,e),e!==1&&(typeof i=="function"&&(s=i(s)),ds.set(r,s))),s},wNAFCached(e,r,i){const s=ps(e);return this.wNAF(s,this.getPrecomputes(s,e,i),r)},wNAFCachedUnsafe(e,r,i,s){const o=ps(e);return o===1?this.unsafeLadder(e,r,s):this.wNAFUnsafe(o,this.getPrecomputes(o,e,i),r,s)},setWindowSize(e,r){Fo(r,t),Do.set(e,r),ds.delete(e)}}}function Qc(n,t,e,r){let i=t,s=n.ZERO,o=n.ZERO;for(;e>Tr||r>Tr;)e&pr&&(s=s.add(i)),r&pr&&(o=o.add(i)),i=i.double(),e>>=pr,r>>=pr;return{p1:s,p2:o}}function qo(n,t,e,r){Jc(e,n),Xc(r,t);const i=e.length,s=r.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const o=n.ZERO,c=Kc(BigInt(i));let f=1;c>12?f=c-3:c>4?f=c-2:c>0&&(f=2);const g=Ln(f),m=new Array(Number(g)+1).fill(o),k=Math.floor((t.BITS-1)/f)*f;let A=o;for(let v=k;v>=0;v-=f){m.fill(o);for(let I=0;I<s;I++){const x=r[I],M=Number(x>>BigInt(v)&g);m[M]=m[M].add(e[I])}let E=o;for(let I=m.length-1,x=o;I>0;I--)x=x.add(m[I]),E=E.add(x);if(A=A.add(E),v!==0)for(let I=0;I<f;I++)A=A.double()}return A}function Di(n,t){if(t){if(t.ORDER!==n)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return jc(t),t}else return zr(n)}function Ho(n,t,e={}){if(!t||typeof t!="object")throw new Error(`expected valid ${n} CURVE object`);for(const c of["p","n","h"]){const f=t[c];if(!(typeof f=="bigint"&&f>Tr))throw new Error(`CURVE.${c} must be positive bigint`)}const r=Di(t.p,e.Fp),i=Di(t.n,e.Fn),o=["Gx","Gy","a",n==="weierstrass"?"b":"d"];for(const c of o)if(!r.isValid(t[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ue=BigInt(0),ve=BigInt(1),gs=BigInt(2),tu=BigInt(8),eu={zip215:!0};function ru(n,t,e,r){const i=n.sqr(e),s=n.sqr(r),o=n.add(n.mul(t.a,i),s),c=n.add(n.ONE,n.mul(t.d,n.mul(i,s)));return n.eql(o,c)}function nu(n,t={}){const{Fp:e,Fn:r}=Ho("edwards",n,t),{h:i,n:s}=n;rn(t,{},{uvRatio:"function"});const o=gs<<BigInt(r.BYTES*8)-ve,c=I=>e.create(I),f=t.uvRatio||((I,x)=>{try{return{isValid:!0,value:e.sqrt(e.div(I,x))}}catch{return{isValid:!1,value:Ue}}});if(!ru(e,n,n.Gx,n.Gy))throw new Error("bad curve params: generator point");function g(I,x,M=!1){const z=M?ve:Ue;return Br("coordinate "+I,x,z,o),x}function m(I){if(!(I instanceof v))throw new Error("ExtendedPoint expected")}const k=mn((I,x)=>{const{ex:M,ey:z,ez:N}=I,V=I.is0();x==null&&(x=V?tu:e.inv(N));const L=c(M*x),H=c(z*x),Z=c(N*x);if(V)return{x:Ue,y:ve};if(Z!==ve)throw new Error("invZ was invalid");return{x:L,y:H}}),A=mn(I=>{const{a:x,d:M}=n;if(I.is0())throw new Error("bad point: ZERO");const{ex:z,ey:N,ez:V,et:L}=I,H=c(z*z),Z=c(N*N),j=c(V*V),P=c(j*j),U=c(H*x),T=c(j*c(U+Z)),C=c(P+c(M*c(H*Z)));if(T!==C)throw new Error("bad point: equation left != right (1)");const d=c(z*N),a=c(V*L);if(d!==a)throw new Error("bad point: equation left != right (2)");return!0});class v{constructor(x,M,z,N){this.ex=g("x",x),this.ey=g("y",M),this.ez=g("z",z,!0),this.et=g("t",N),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(x){if(x instanceof v)throw new Error("extended point not allowed");const{x:M,y:z}=x||{};return g("x",M),g("y",z),new v(M,z,ve,c(M*z))}static normalizeZ(x){return Ko(v,"ez",x)}static msm(x,M){return qo(v,r,x,M)}_setWindowSize(x){this.precompute(x)}precompute(x=8,M=!0){return E.setWindowSize(this,x),M||this.multiply(gs),this}assertValidity(){A(this)}equals(x){m(x);const{ex:M,ey:z,ez:N}=this,{ex:V,ey:L,ez:H}=x,Z=c(M*H),j=c(V*N),P=c(z*H),U=c(L*N);return Z===j&&P===U}is0(){return this.equals(v.ZERO)}negate(){return new v(c(-this.ex),this.ey,this.ez,c(-this.et))}double(){const{a:x}=n,{ex:M,ey:z,ez:N}=this,V=c(M*M),L=c(z*z),H=c(gs*c(N*N)),Z=c(x*V),j=M+z,P=c(c(j*j)-V-L),U=Z+L,T=U-H,C=Z-L,d=c(P*T),a=c(U*C),l=c(P*C),h=c(T*U);return new v(d,a,h,l)}add(x){m(x);const{a:M,d:z}=n,{ex:N,ey:V,ez:L,et:H}=this,{ex:Z,ey:j,ez:P,et:U}=x,T=c(N*Z),C=c(V*j),d=c(H*z*U),a=c(L*P),l=c((N+V)*(Z+j)-T-C),h=a-d,y=a+d,b=c(C-M*T),S=c(l*h),_=c(y*b),p=c(l*b),u=c(h*y);return new v(S,_,u,p)}subtract(x){return this.add(x.negate())}multiply(x){const M=x;Br("scalar",M,ve,s);const{p:z,f:N}=E.wNAFCached(this,M,v.normalizeZ);return v.normalizeZ([z,N])[0]}multiplyUnsafe(x,M=v.ZERO){const z=x;return Br("scalar",z,Ue,s),z===Ue?v.ZERO:this.is0()||z===ve?this:E.wNAFCachedUnsafe(this,z,v.normalizeZ,M)}isSmallOrder(){return this.multiplyUnsafe(i).is0()}isTorsionFree(){return E.wNAFCachedUnsafe(this,s).is0()}toAffine(x){return k(this,x)}clearCofactor(){return i===ve?this:this.multiplyUnsafe(i)}static fromBytes(x,M=!1){return Le(x),this.fromHex(x,M)}static fromHex(x,M=!1){const{d:z,a:N}=n,V=e.BYTES;x=_t("pointHex",x,V),mr("zip215",M);const L=x.slice(),H=x[V-1];L[V-1]=H&-129;const Z=Xr(L),j=M?o:e.ORDER;Br("pointHex.y",Z,Ue,j);const P=c(Z*Z),U=c(P-ve),T=c(z*P-N);let{isValid:C,value:d}=f(U,T);if(!C)throw new Error("Point.fromHex: invalid y coordinate");const a=(d&ve)===ve,l=(H&128)!==0;if(!M&&d===Ue&&l)throw new Error("Point.fromHex: x=0 and x_0=1");return l!==a&&(d=c(-d)),v.fromAffine({x:d,y:Z})}static fromPrivateScalar(x){return v.BASE.multiply(x)}toBytes(){const{x,y:M}=this.toAffine(),z=Tn(M,e.BYTES);return z[z.length-1]|=x&ve?128:0,z}toRawBytes(){return this.toBytes()}toHex(){return Pr(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}v.BASE=new v(n.Gx,n.Gy,ve,c(n.Gx*n.Gy)),v.ZERO=new v(Ue,ve,ve,Ue),v.Fp=e,v.Fn=r;const E=Wo(v,r.BYTES*8);return v}function su(n,t){rn(t,{hash:"function"},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:e,hash:r}=t,{BASE:i,Fp:s,Fn:o}=n,c=o.ORDER,f=t.randomBytes||Eo,g=t.adjustScalarBytes||(L=>L),m=t.domain||((L,H,Z)=>{if(mr("phflag",Z),H.length||Z)throw new Error("Contexts/pre-hash are not supported");return L});function k(L){return o.create(L)}function A(L){return k(Xr(L))}function v(L){const H=s.BYTES;L=_t("private key",L,H);const Z=_t("hashed private key",r(L),2*H),j=g(Z.slice(0,H)),P=Z.slice(H,2*H),U=A(j);return{head:j,prefix:P,scalar:U}}function E(L){const{head:H,prefix:Z,scalar:j}=v(L),P=i.multiply(j),U=P.toBytes();return{head:H,prefix:Z,scalar:j,point:P,pointBytes:U}}function I(L){return E(L).pointBytes}function x(L=Uint8Array.of(),...H){const Z=Xe(...H);return A(r(m(Z,_t("context",L),!!e)))}function M(L,H,Z={}){L=_t("message",L),e&&(L=e(L));const{prefix:j,scalar:P,pointBytes:U}=E(H),T=x(Z.context,j,L),C=i.multiply(T).toBytes(),d=x(Z.context,C,U,L),a=k(T+d*P);Br("signature.s",a,Ue,c);const l=s.BYTES,h=Xe(C,Tn(a,l));return _t("result",h,l*2)}const z=eu;function N(L,H,Z,j=z){const{context:P,zip215:U}=j,T=s.BYTES;L=_t("signature",L,2*T),H=_t("message",H),Z=_t("publicKey",Z,T),U!==void 0&&mr("zip215",U),e&&(H=e(H));const C=Xr(L.slice(T,2*T));let d,a,l;try{d=n.fromHex(Z,U),a=n.fromHex(L.slice(0,T),U),l=i.multiplyUnsafe(C)}catch{return!1}if(!U&&d.isSmallOrder())return!1;const h=x(P,a.toBytes(),d.toBytes(),H);return a.add(d.multiplyUnsafe(h)).subtract(l).clearCofactor().is0()}return i.precompute(8),{getPublicKey:I,sign:M,verify:N,utils:{getExtendedPublicKey:E,randomPrivateKey:()=>f(s.BYTES),precompute(L=8,H=n.BASE){return H.precompute(L,!1)}},Point:n}}function iu(n){const t={a:n.a,d:n.d,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},e=n.Fp,r=zr(t.n,n.nBitLength,!0),i={Fp:e,Fn:r,uvRatio:n.uvRatio},s={hash:n.hash,randomBytes:n.randomBytes,adjustScalarBytes:n.adjustScalarBytes,domain:n.domain,prehash:n.prehash,mapToCurve:n.mapToCurve};return{CURVE:t,curveOpts:i,eddsaOpts:s}}function ou(n,t){return Object.assign({},t,{ExtendedPoint:t.Point,CURVE:n})}function au(n){const{CURVE:t,curveOpts:e,eddsaOpts:r}=iu(n),i=nu(t,e),s=su(i,r);return ou(n,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */BigInt(0);const cu=BigInt(1),Wi=BigInt(2);BigInt(3);const uu=BigInt(5),lu=BigInt(8),Cn={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:lu,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function fu(n){const t=BigInt(10),e=BigInt(20),r=BigInt(40),i=BigInt(80),s=Cn.p,c=n*n%s*n%s,f=St(c,Wi,s)*c%s,g=St(f,cu,s)*n%s,m=St(g,uu,s)*g%s,k=St(m,t,s)*m%s,A=St(k,e,s)*k%s,v=St(A,r,s)*A%s,E=St(v,i,s)*v%s,I=St(E,i,s)*v%s,x=St(I,t,s)*m%s;return{pow_p_5_8:St(x,Wi,s)*n%s,b2:c}}function hu(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}const qi=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function du(n,t){const e=Cn.p,r=It(t*t*t,e),i=It(r*r*t,e),s=fu(n*i).pow_p_5_8;let o=It(n*r*s,e);const c=It(t*o*o,e),f=o,g=It(o*qi,e),m=c===n,k=c===It(-n,e),A=c===It(-n*qi,e);return m&&(o=f),(k||A)&&(o=g),$c(o,e)&&(o=It(-o,e)),{isValid:m||k,value:o}}const pu=(()=>zr(Cn.p,void 0,!0))(),gu=(()=>({...Cn,Fp:pu,hash:zc,adjustScalarBytes:hu,uvRatio:du}))(),Ur=(()=>au(gu))();var hn=lc.Buffer;function yu(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var r=0;r<n.length;r++){var i=n.charAt(r),s=i.charCodeAt(0);if(t[s]!==255)throw new TypeError(i+" is ambiguous");t[s]=r}var o=n.length,c=n.charAt(0),f=Math.log(o)/Math.log(256),g=Math.log(256)/Math.log(o);function m(v){if((Array.isArray(v)||v instanceof Uint8Array)&&(v=hn.from(v)),!hn.isBuffer(v))throw new TypeError("Expected Buffer");if(v.length===0)return"";for(var E=0,I=0,x=0,M=v.length;x!==M&&v[x]===0;)x++,E++;for(var z=(M-x)*g+1>>>0,N=new Uint8Array(z);x!==M;){for(var V=v[x],L=0,H=z-1;(V!==0||L<I)&&H!==-1;H--,L++)V+=256*N[H]>>>0,N[H]=V%o>>>0,V=V/o>>>0;if(V!==0)throw new Error("Non-zero carry");I=L,x++}for(var Z=z-I;Z!==z&&N[Z]===0;)Z++;for(var j=c.repeat(E);Z<z;++Z)j+=n.charAt(N[Z]);return j}function k(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return hn.alloc(0);for(var E=0,I=0,x=0;v[E]===c;)I++,E++;for(var M=(v.length-E)*f+1>>>0,z=new Uint8Array(M);E<v.length;){var N=v.charCodeAt(E);if(N>255)return;var V=t[N];if(V===255)return;for(var L=0,H=M-1;(V!==0||L<x)&&H!==-1;H--,L++)V+=o*z[H]>>>0,z[H]=V%256>>>0,V=V/256>>>0;if(V!==0)throw new Error("Non-zero carry");x=L,E++}for(var Z=M-x;Z!==M&&z[Z]===0;)Z++;var j=hn.allocUnsafe(I+(M-Z));j.fill(0,0,I);for(var P=I;Z!==M;)j[P++]=z[Z++];return j}function A(v){var E=k(v);if(E)return E;throw new Error("Non-base"+o+" character")}return{encode:m,decodeUnsafe:k,decode:A}}var mu=yu,bu=mu,wu="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",$o=bu(wu);const he=Us($o),Hi=Mo;var fe={};function Ye(n,t,e){return t<=n&&n<=e}function On(n){if(n===void 0)return{};if(n===Object(n))return n;throw TypeError("Could not convert argument to dictionary")}function ku(n){for(var t=String(n),e=t.length,r=0,i=[];r<e;){var s=t.charCodeAt(r);if(s<55296||s>57343)i.push(s);else if(56320<=s&&s<=57343)i.push(65533);else if(55296<=s&&s<=56319)if(r===e-1)i.push(65533);else{var o=n.charCodeAt(r+1);if(56320<=o&&o<=57343){var c=s&1023,f=o&1023;i.push(65536+(c<<10)+f),r+=1}else i.push(65533)}r+=1}return i}function vu(n){for(var t="",e=0;e<n.length;++e){var r=n[e];r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return t}var bn=-1;function Vs(n){this.tokens=[].slice.call(n)}Vs.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():bn},prepend:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(n)},push:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.push(t.shift());else this.tokens.push(n)}};var Lr=-1;function ys(n,t){if(n)throw TypeError("Decoder error");return t||65533}var wn="utf-8";function kn(n,t){if(!(this instanceof kn))return new kn(n,t);if(n=n!==void 0?String(n).toLowerCase():wn,n!==wn)throw new Error("Encoding not supported. Only utf-8 is supported");t=On(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}kn.prototype={decode:function(t,e){var r;typeof t=="object"&&t instanceof ArrayBuffer?r=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):r=new Uint8Array(0),e=On(e),this._streaming||(this._decoder=new Su({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var i=new Vs(r),s=[],o;!i.endOfStream()&&(o=this._decoder.handler(i,i.read()),o!==Lr);)o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o));if(!this._streaming){do{if(o=this._decoder.handler(i,i.read()),o===Lr)break;o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o))}while(!i.endOfStream());this._decoder=null}return s.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(s[0]===65279?(this._BOMseen=!0,s.shift()):this._BOMseen=!0),vu(s)}};function vn(n,t){if(!(this instanceof vn))return new vn(n,t);if(n=n!==void 0?String(n).toLowerCase():wn,n!==wn)throw new Error("Encoding not supported. Only utf-8 is supported");t=On(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}vn.prototype={encode:function(t,e){t=t?String(t):"",e=On(e),this._streaming||(this._encoder=new xu(this._options)),this._streaming=!!e.stream;for(var r=[],i=new Vs(ku(t)),s;!i.endOfStream()&&(s=this._encoder.handler(i,i.read()),s!==Lr);)Array.isArray(s)?r.push.apply(r,s):r.push(s);if(!this._streaming){for(;s=this._encoder.handler(i,i.read()),s!==Lr;)Array.isArray(s)?r.push.apply(r,s):r.push(s);this._encoder=null}return new Uint8Array(r)}};function Su(n){var t=n.fatal,e=0,r=0,i=0,s=128,o=191;this.handler=function(c,f){if(f===bn&&i!==0)return i=0,ys(t);if(f===bn)return Lr;if(i===0){if(Ye(f,0,127))return f;if(Ye(f,194,223))i=1,e=f-192;else if(Ye(f,224,239))f===224&&(s=160),f===237&&(o=159),i=2,e=f-224;else if(Ye(f,240,244))f===240&&(s=144),f===244&&(o=143),i=3,e=f-240;else return ys(t);return e=e<<6*i,null}if(!Ye(f,s,o))return e=i=r=0,s=128,o=191,c.prepend(f),ys(t);if(s=128,o=191,r+=1,e+=f-128<<6*(i-r),r!==i)return null;var g=e;return e=i=r=0,g}}function xu(n){n.fatal,this.handler=function(t,e){if(e===bn)return Lr;if(Ye(e,0,127))return e;var r,i;Ye(e,128,2047)?(r=1,i=192):Ye(e,2048,65535)?(r=2,i=224):Ye(e,65536,1114111)&&(r=3,i=240);for(var s=[(e>>6*r)+i];r>0;){var o=e>>6*(r-1);s.push(128|o&63),r-=1}return s}}const _u=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:kn,TextEncoder:vn},Symbol.toStringTag,{value:"Module"})),Iu=ko(_u);var Eu=Oe&&Oe.__createBinding||(Object.create?function(n,t,e,r){r===void 0&&(r=e),Object.defineProperty(n,r,{enumerable:!0,get:function(){return t[e]}})}:function(n,t,e,r){r===void 0&&(r=e),n[r]=t[e]}),Au=Oe&&Oe.__setModuleDefault||(Object.create?function(n,t){Object.defineProperty(n,"default",{enumerable:!0,value:t})}:function(n,t){n.default=t}),qe=Oe&&Oe.__decorate||function(n,t,e,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,t,e,r);else for(var c=n.length-1;c>=0;c--)(o=n[c])&&(s=(i<3?o(s):i>3?o(t,e,s):o(t,e))||s);return i>3&&s&&Object.defineProperty(t,e,s),s},Bu=Oe&&Oe.__importStar||function(n){if(n&&n.__esModule)return n;var t={};if(n!=null)for(var e in n)e!=="default"&&Object.hasOwnProperty.call(n,e)&&Eu(t,n,e);return Au(t,n),t},Vo=Oe&&Oe.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(fe,"__esModule",{value:!0});var jo=fe.deserializeUnchecked=Qo=fe.deserialize=Xo=fe.serialize=fe.BinaryReader=fe.BinaryWriter=fe.BorshError=fe.baseDecode=fe.baseEncode=void 0;const or=Vo(vo),Go=Vo($o),Ru=Bu(Iu),Mu=typeof TextDecoder!="function"?Ru.TextDecoder:TextDecoder,Pu=new Mu("utf-8",{fatal:!0});function Tu(n){return typeof n=="string"&&(n=G.Buffer.from(n,"utf8")),Go.default.encode(G.Buffer.from(n))}fe.baseEncode=Tu;function Lu(n){return G.Buffer.from(Go.default.decode(n))}fe.baseDecode=Lu;const ms=1024;class Se extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}fe.BorshError=Se;class Zo{constructor(){this.buf=G.Buffer.alloc(ms),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=G.Buffer.concat([this.buf,G.Buffer.alloc(ms)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(G.Buffer.from(new or.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(G.Buffer.from(new or.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(G.Buffer.from(new or.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(G.Buffer.from(new or.default(t).toArray("le",64)))}writeBuffer(t){this.buf=G.Buffer.concat([G.Buffer.from(this.buf.subarray(0,this.length)),t,G.Buffer.alloc(ms)]),this.length+=t.length}writeString(t){this.maybeResize();const e=G.Buffer.from(t,"utf8");this.writeU32(e.length),this.writeBuffer(e)}writeFixedArray(t){this.writeBuffer(G.Buffer.from(t))}writeArray(t,e){this.maybeResize(),this.writeU32(t.length);for(const r of t)this.maybeResize(),e(r)}toArray(){return this.buf.subarray(0,this.length)}}fe.BinaryWriter=Zo;function He(n,t,e){const r=e.value;e.value=function(...i){try{return r.apply(this,i)}catch(s){if(s instanceof RangeError){const o=s.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(o)>=0)throw new Se("Reached the end of buffer when deserializing")}throw s}}}class Me{constructor(t){this.buf=t,this.offset=0}readU8(){const t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){const t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){const t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){const t=this.readBuffer(8);return new or.default(t,"le")}readU128(){const t=this.readBuffer(16);return new or.default(t,"le")}readU256(){const t=this.readBuffer(32);return new or.default(t,"le")}readU512(){const t=this.readBuffer(64);return new or.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new Se(`Expected buffer length ${t} isn't within bounds`);const e=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,e}readString(){const t=this.readU32(),e=this.readBuffer(t);try{return Pu.decode(e)}catch(r){throw new Se(`Error decoding UTF-8 string: ${r}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){const e=this.readU32(),r=Array();for(let i=0;i<e;++i)r.push(t());return r}}qe([He],Me.prototype,"readU8",null);qe([He],Me.prototype,"readU16",null);qe([He],Me.prototype,"readU32",null);qe([He],Me.prototype,"readU64",null);qe([He],Me.prototype,"readU128",null);qe([He],Me.prototype,"readU256",null);qe([He],Me.prototype,"readU512",null);qe([He],Me.prototype,"readString",null);qe([He],Me.prototype,"readFixedArray",null);qe([He],Me.prototype,"readArray",null);fe.BinaryReader=Me;function Yo(n){return n.charAt(0).toUpperCase()+n.slice(1)}function lr(n,t,e,r,i){try{if(typeof r=="string")i[`write${Yo(r)}`](e);else if(r instanceof Array)if(typeof r[0]=="number"){if(e.length!==r[0])throw new Se(`Expecting byte array of length ${r[0]}, but got ${e.length} bytes`);i.writeFixedArray(e)}else if(r.length===2&&typeof r[1]=="number"){if(e.length!==r[1])throw new Se(`Expecting byte array of length ${r[1]}, but got ${e.length} bytes`);for(let s=0;s<r[1];s++)lr(n,null,e[s],r[0],i)}else i.writeArray(e,s=>{lr(n,t,s,r[0],i)});else if(r.kind!==void 0)switch(r.kind){case"option":{e==null?i.writeU8(0):(i.writeU8(1),lr(n,t,e,r.type,i));break}case"map":{i.writeU32(e.size),e.forEach((s,o)=>{lr(n,t,o,r.key,i),lr(n,t,s,r.value,i)});break}default:throw new Se(`FieldType ${r} unrecognized`)}else Jo(n,e,i)}catch(s){throw s instanceof Se&&s.addToFieldPath(t),s}}function Jo(n,t,e){if(typeof t.borshSerialize=="function"){t.borshSerialize(e);return}const r=n.get(t.constructor);if(!r)throw new Se(`Class ${t.constructor.name} is missing in schema`);if(r.kind==="struct")r.fields.map(([i,s])=>{lr(n,i,t[i],s,e)});else if(r.kind==="enum"){const i=t[r.field];for(let s=0;s<r.values.length;++s){const[o,c]=r.values[s];if(o===i){e.writeU8(s),lr(n,o,t[o],c,e);break}}}else throw new Se(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}function Cu(n,t,e=Zo){const r=new e;return Jo(n,t,r),r.toArray()}var Xo=fe.serialize=Cu;function fr(n,t,e,r){try{if(typeof e=="string")return r[`read${Yo(e)}`]();if(e instanceof Array){if(typeof e[0]=="number")return r.readFixedArray(e[0]);if(typeof e[1]=="number"){const i=[];for(let s=0;s<e[1];s++)i.push(fr(n,null,e[0],r));return i}else return r.readArray(()=>fr(n,t,e[0],r))}if(e.kind==="option")return r.readU8()?fr(n,t,e.type,r):void 0;if(e.kind==="map"){let i=new Map;const s=r.readU32();for(let o=0;o<s;o++){const c=fr(n,t,e.key,r),f=fr(n,t,e.value,r);i.set(c,f)}return i}return js(n,e,r)}catch(i){throw i instanceof Se&&i.addToFieldPath(t),i}}function js(n,t,e){if(typeof t.borshDeserialize=="function")return t.borshDeserialize(e);const r=n.get(t);if(!r)throw new Se(`Class ${t.name} is missing in schema`);if(r.kind==="struct"){const i={};for(const[s,o]of n.get(t).fields)i[s]=fr(n,s,o,e);return new t(i)}if(r.kind==="enum"){const i=e.readU8();if(i>=r.values.length)throw new Se(`Enum index: ${i} is out of range`);const[s,o]=r.values[i],c=fr(n,s,o,e);return new t({[s]:c})}throw new Se(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}function Ou(n,t,e,r=Me){const i=new r(e),s=js(n,t,i);if(i.offset<e.length)throw new Se(`Unexpected ${e.length-i.offset} bytes after deserialized data`);return s}var Qo=fe.deserialize=Ou;function Nu(n,t,e,r=Me){const i=new r(e);return js(n,t,i)}jo=fe.deserializeUnchecked=Nu;var R={};Object.defineProperty(R,"__esModule",{value:!0});R.s16=R.s8=R.nu64be=R.u48be=R.u40be=R.u32be=R.u24be=R.u16be=ue=R.nu64=R.u48=R.u40=Y=R.u32=R.u24=Pe=R.u16=ot=R.u8=cr=R.offset=R.greedy=R.Constant=R.UTF8=R.CString=R.Blob=R.Boolean=R.BitField=R.BitStructure=R.VariantLayout=R.Union=R.UnionLayoutDiscriminator=R.UnionDiscriminator=R.Structure=R.Sequence=R.DoubleBE=R.Double=R.FloatBE=R.Float=R.NearInt64BE=R.NearInt64=R.NearUInt64BE=R.NearUInt64=R.IntBE=R.Int=R.UIntBE=R.UInt=R.OffsetLayout=R.GreedyCount=R.ExternalLayout=R.bindConstructorLayout=R.nameWithProperty=R.Layout=R.uint8ArrayToBuffer=R.checkUint8Array=void 0;R.constant=R.utf8=R.cstr=bt=R.blob=R.unionLayoutDiscriminator=R.union=pe=R.seq=R.bits=J=R.struct=R.f64be=R.f64=R.f32be=R.f32=R.ns64be=R.s48be=R.s40be=R.s32be=R.s24be=R.s16be=Be=R.ns64=R.s48=R.s40=R.s32=R.s24=void 0;const Gs=G;function Kr(n){if(!(n instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}R.checkUint8Array=Kr;function ut(n){return Kr(n),Gs.Buffer.from(n.buffer,n.byteOffset,n.length)}R.uint8ArrayToBuffer=ut;class dt{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}R.Layout=dt;function Zs(n,t){return t.property?n+"["+t.property+"]":n}R.nameWithProperty=Zs;function zu(n,t){if(typeof n!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(n,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof dt))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");n.layout_=t,t.boundConstructor_=n,t.makeDestinationObject=()=>new n,Object.defineProperty(n.prototype,"encode",{value(e,r){return t.encode(this,e,r)},writable:!0}),Object.defineProperty(n,"decode",{value(e,r){return t.decode(e,r)},writable:!0})}R.bindConstructorLayout=zu;class Ee extends dt{isCount(){throw new Error("ExternalLayout is abstract")}}R.ExternalLayout=Ee;class ta extends Ee{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){Kr(t);const r=t.length-e;return Math.floor(r/this.elementSpan)}encode(t,e,r){return 0}}R.GreedyCount=ta;class Ys extends Ee{constructor(t,e=0,r){if(!(t instanceof dt))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,r||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof Te||this.layout instanceof Ce}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,r=0){return this.layout.encode(t,e,r+this.offset)}}R.OffsetLayout=Ys;class Te extends dt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return ut(t).readUIntLE(e,this.span)}encode(t,e,r=0){return ut(e).writeUIntLE(t,r,this.span),this.span}}R.UInt=Te;class Ce extends dt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return ut(t).readUIntBE(e,this.span)}encode(t,e,r=0){return ut(e).writeUIntBE(t,r,this.span),this.span}}R.UIntBE=Ce;class br extends dt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return ut(t).readIntLE(e,this.span)}encode(t,e,r=0){return ut(e).writeIntLE(t,r,this.span),this.span}}R.Int=br;class Fr extends dt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return ut(t).readIntBE(e,this.span)}encode(t,e,r=0){return ut(e).writeIntBE(t,r,this.span),this.span}}R.IntBE=Fr;const Ts=Math.pow(2,32);function Nn(n){const t=Math.floor(n/Ts),e=n-t*Ts;return{hi32:t,lo32:e}}function zn(n,t){return n*Ts+t}class ea extends dt{constructor(t){super(8,t)}decode(t,e=0){const r=ut(t),i=r.readUInt32LE(e),s=r.readUInt32LE(e+4);return zn(s,i)}encode(t,e,r=0){const i=Nn(t),s=ut(e);return s.writeUInt32LE(i.lo32,r),s.writeUInt32LE(i.hi32,r+4),8}}R.NearUInt64=ea;class ra extends dt{constructor(t){super(8,t)}decode(t,e=0){const r=ut(t),i=r.readUInt32BE(e),s=r.readUInt32BE(e+4);return zn(i,s)}encode(t,e,r=0){const i=Nn(t),s=ut(e);return s.writeUInt32BE(i.hi32,r),s.writeUInt32BE(i.lo32,r+4),8}}R.NearUInt64BE=ra;class na extends dt{constructor(t){super(8,t)}decode(t,e=0){const r=ut(t),i=r.readUInt32LE(e),s=r.readInt32LE(e+4);return zn(s,i)}encode(t,e,r=0){const i=Nn(t),s=ut(e);return s.writeUInt32LE(i.lo32,r),s.writeInt32LE(i.hi32,r+4),8}}R.NearInt64=na;class sa extends dt{constructor(t){super(8,t)}decode(t,e=0){const r=ut(t),i=r.readInt32BE(e),s=r.readUInt32BE(e+4);return zn(i,s)}encode(t,e,r=0){const i=Nn(t),s=ut(e);return s.writeInt32BE(i.hi32,r),s.writeUInt32BE(i.lo32,r+4),8}}R.NearInt64BE=sa;class ia extends dt{constructor(t){super(4,t)}decode(t,e=0){return ut(t).readFloatLE(e)}encode(t,e,r=0){return ut(e).writeFloatLE(t,r),4}}R.Float=ia;class oa extends dt{constructor(t){super(4,t)}decode(t,e=0){return ut(t).readFloatBE(e)}encode(t,e,r=0){return ut(e).writeFloatBE(t,r),4}}R.FloatBE=oa;class aa extends dt{constructor(t){super(8,t)}decode(t,e=0){return ut(t).readDoubleLE(e)}encode(t,e,r=0){return ut(e).writeDoubleLE(t,r),8}}R.Double=aa;class ca extends dt{constructor(t){super(8,t)}decode(t,e=0){return ut(t).readDoubleBE(e)}encode(t,e,r=0){return ut(e).writeDoubleBE(t,r),8}}R.DoubleBE=ca;class ua extends dt{constructor(t,e,r){if(!(t instanceof dt))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof Ee&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let i=-1;!(e instanceof Ee)&&0<t.span&&(i=e*t.span),super(i,r),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0,i=this.count;if(i instanceof Ee&&(i=i.decode(t,e)),0<this.elementLayout.span)r=i*this.elementLayout.span;else{let s=0;for(;s<i;)r+=this.elementLayout.getSpan(t,e+r),++s}return r}decode(t,e=0){const r=[];let i=0,s=this.count;for(s instanceof Ee&&(s=s.decode(t,e));i<s;)r.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),i+=1;return r}encode(t,e,r=0){const i=this.elementLayout,s=t.reduce((o,c)=>o+i.encode(c,e,r+o),0);return this.count instanceof Ee&&this.count.encode(t.length,e,r),s}}R.Sequence=ua;class la extends dt{constructor(t,e,r){if(!(Array.isArray(t)&&t.reduce((s,o)=>s&&o instanceof dt,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&r===void 0&&(r=e,e=void 0);for(const s of t)if(0>s.span&&s.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=t.reduce((s,o)=>s+o.getSpan(),0)}catch{}super(i,e),this.fields=t,this.decodePrefixes=!!r}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((i,s)=>{const o=s.getSpan(t,e);return e+=o,i+o},0)}catch{throw new RangeError("indeterminate span")}return r}decode(t,e=0){Kr(t);const r=this.makeDestinationObject();for(const i of this.fields)if(i.property!==void 0&&(r[i.property]=i.decode(t,e)),e+=i.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return r}encode(t,e,r=0){const i=r;let s=0,o=0;for(const c of this.fields){let f=c.span;if(o=0<f?f:0,c.property!==void 0){const g=t[c.property];g!==void 0&&(o=c.encode(g,e,r),0>f&&(f=c.getSpan(e,r)))}s=r,r+=f}return s+o-i}fromArray(t){const e=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<t.length&&(e[r.property]=t.shift());return e}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let e=0;for(const r of this.fields){if(r.property===t)return e;0>r.span?e=-1:0<=e&&(e+=r.span)}}}R.Structure=la;class Js{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,r){throw new Error("UnionDiscriminator is abstract")}}R.UnionDiscriminator=Js;class Sn extends Js{constructor(t,e){if(!(t instanceof Ee&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,r){return this.layout.encode(t,e,r)}}R.UnionLayoutDiscriminator=Sn;class Xs extends dt{constructor(t,e,r){let i;if(t instanceof Te||t instanceof Ce)i=new Sn(new Ys(t));else if(t instanceof Ee&&t.isCount())i=new Sn(t);else if(t instanceof Js)i=t;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof dt))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let s=-1;e&&(s=e.span,0<=s&&(t instanceof Te||t instanceof Ce)&&(s+=i.layout.span)),super(s,r),this.discriminator=i,this.usesPrefixDiscriminator=t instanceof Te||t instanceof Ce,this.defaultLayout=e,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(c){return o(c)},this.configGetSourceVariant=function(c){o=c.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;const r=this.getVariant(t,e);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(const e in this.registry){const r=this.registry[e];if(r.property&&Object.prototype.hasOwnProperty.call(t,r.property))return r}throw new Error("unable to infer src variant")}decode(t,e=0){let r;const i=this.discriminator,s=i.decode(t,e),o=this.registry[s];if(o===void 0){const c=this.defaultLayout;let f=0;this.usesPrefixDiscriminator&&(f=i.layout.span),r=this.makeDestinationObject(),r[i.property]=s,r[c.property]=c.decode(t,e+f)}else r=o.decode(t,e);return r}encode(t,e,r=0){const i=this.getSourceVariant(t);if(i===void 0){const s=this.discriminator,o=this.defaultLayout;let c=0;return this.usesPrefixDiscriminator&&(c=s.layout.span),s.encode(t[s.property],e,r),c+o.encode(t[o.property],e,r+c)}return i.encode(t,e,r)}addVariant(t,e,r){const i=new fa(this,t,e,r);return this.registry[t]=i,i}getVariant(t,e=0){let r;return t instanceof Uint8Array?r=this.discriminator.decode(t,e):r=t,this.registry[r]}}R.Union=Xs;class fa extends dt{constructor(t,e,r,i){if(!(t instanceof Xs))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&i===void 0&&(i=r,r=null),r){if(!(r instanceof dt))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=r.span&&r.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let s=t.span;0>t.span&&(s=r?r.span:0,0<=s&&t.usesPrefixDiscriminator&&(s+=t.discriminator.layout.span)),super(s,i),this.union=t,this.variant=e,this.layout=r||null}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let i=0;return this.layout&&(i=this.layout.getSpan(t,e+r)),r+i}decode(t,e=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(t,e+i):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(t,e,r=0){let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,r);let s=i;if(this.layout&&(this.layout.encode(t[this.property],e,r+i),s+=this.layout.getSpan(e,r+i),0<=this.union.span&&s>this.union.span))throw new Error("encoded variant overruns containing union");return s}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}R.VariantLayout=fa;function Ar(n){return 0>n&&(n+=4294967296),n}class Qs extends dt{constructor(t,e,r){if(!(t instanceof Te||t instanceof Ce))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof e=="string"&&r===void 0&&(r=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,r),this.word=t,this.msb=!!e,this.fields=[];let i=0;this._packedSetValue=function(s){return i=Ar(s),this},this._packedGetValue=function(){return i}}decode(t,e=0){const r=this.makeDestinationObject(),i=this.word.decode(t,e);this._packedSetValue(i);for(const s of this.fields)s.property!==void 0&&(r[s.property]=s.decode(t));return r}encode(t,e,r=0){const i=this.word.decode(e,r);this._packedSetValue(i);for(const s of this.fields)if(s.property!==void 0){const o=t[s.property];o!==void 0&&s.encode(o)}return this.word.encode(this._packedGetValue(),e,r)}addField(t,e){const r=new ti(this,t,e);return this.fields.push(r),r}addBoolean(t){const e=new ha(this,t);return this.fields.push(e),e}fieldFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}}R.BitStructure=Qs;class ti{constructor(t,e,r){if(!(t instanceof Qs))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const i=8*t.span,s=t.fields.reduce((o,c)=>o+c.bits,0);if(e+s>i)throw new Error("bits too long for span remainder ("+(i-s)+" of "+i+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,e===32&&(this.valueMask=4294967295),this.start=s,this.container.msb&&(this.start=i-s-e),this.wordMask=Ar(this.valueMask<<this.start),this.property=r}decode(t,e){const r=this.container._packedGetValue();return Ar(r&this.wordMask)>>>this.start}encode(t){if(typeof t!="number"||!Number.isInteger(t)||t!==Ar(t&this.valueMask))throw new TypeError(Zs("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container._packedGetValue(),r=Ar(t<<this.start);this.container._packedSetValue(Ar(e&~this.wordMask)|r)}}R.BitField=ti;let ha=class extends ti{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){typeof t=="boolean"&&(t=+t),super.encode(t)}};R.Boolean=ha;class da extends dt{constructor(t,e){if(!(t instanceof Ee&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;t instanceof Ee||(r=t),super(r,e),this.length=t}getSpan(t,e){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),r}decode(t,e=0){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),ut(t).slice(e,e+r)}encode(t,e,r){let i=this.length;if(this.length instanceof Ee&&(i=t.length),!(t instanceof Uint8Array&&i===t.length))throw new TypeError(Zs("Blob.encode",this)+" requires (length "+i+") Uint8Array as src");if(r+i>e.length)throw new RangeError("encoding overruns Uint8Array");const s=ut(t);return ut(e).write(s.toString("hex"),r,i,"hex"),this.length instanceof Ee&&this.length.encode(i,e,r),i}}R.Blob=da;class pa extends dt{constructor(t){super(-1,t)}getSpan(t,e=0){Kr(t);let r=e;for(;r<t.length&&t[r]!==0;)r+=1;return 1+r-e}decode(t,e=0){const r=this.getSpan(t,e);return ut(t).slice(e,e+r-1).toString("utf-8")}encode(t,e,r=0){typeof t!="string"&&(t=String(t));const i=Gs.Buffer.from(t,"utf8"),s=i.length;if(r+s>e.length)throw new RangeError("encoding overruns Buffer");const o=ut(e);return i.copy(o,r),o[r+s]=0,s+1}}R.CString=pa;class ga extends dt{constructor(t,e){if(typeof t=="string"&&e===void 0&&(e=t,t=void 0),t===void 0)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return Kr(t),t.length-e}decode(t,e=0){const r=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return ut(t).slice(e,e+r).toString("utf-8")}encode(t,e,r=0){typeof t!="string"&&(t=String(t));const i=Gs.Buffer.from(t,"utf8"),s=i.length;if(0<=this.maxSpan&&this.maxSpan<s)throw new RangeError("text length exceeds maxSpan");if(r+s>e.length)throw new RangeError("encoding overruns Buffer");return i.copy(ut(e),r),s}}R.UTF8=ga;class ya extends dt{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,r){return 0}}R.Constant=ya;R.greedy=(n,t)=>new ta(n,t);var cr=R.offset=(n,t,e)=>new Ys(n,t,e),ot=R.u8=n=>new Te(1,n),Pe=R.u16=n=>new Te(2,n);R.u24=n=>new Te(3,n);var Y=R.u32=n=>new Te(4,n);R.u40=n=>new Te(5,n);R.u48=n=>new Te(6,n);var ue=R.nu64=n=>new ea(n);R.u16be=n=>new Ce(2,n);R.u24be=n=>new Ce(3,n);R.u32be=n=>new Ce(4,n);R.u40be=n=>new Ce(5,n);R.u48be=n=>new Ce(6,n);R.nu64be=n=>new ra(n);R.s8=n=>new br(1,n);R.s16=n=>new br(2,n);R.s24=n=>new br(3,n);R.s32=n=>new br(4,n);R.s40=n=>new br(5,n);R.s48=n=>new br(6,n);var Be=R.ns64=n=>new na(n);R.s16be=n=>new Fr(2,n);R.s24be=n=>new Fr(3,n);R.s32be=n=>new Fr(4,n);R.s40be=n=>new Fr(5,n);R.s48be=n=>new Fr(6,n);R.ns64be=n=>new sa(n);R.f32=n=>new ia(n);R.f32be=n=>new oa(n);R.f64=n=>new aa(n);R.f64be=n=>new ca(n);var J=R.struct=(n,t,e)=>new la(n,t,e);R.bits=(n,t,e)=>new Qs(n,t,e);var pe=R.seq=(n,t,e)=>new ua(n,t,e);R.union=(n,t,e)=>new Xs(n,t,e);R.unionLayoutDiscriminator=(n,t)=>new Sn(n,t);var bt=R.blob=(n,t)=>new da(n,t);R.cstr=n=>new pa(n);R.utf8=(n,t)=>new ga(n,t);R.constant=(n,t)=>new ya(n,t);var Uu=8078e3,Ku=8078001,Fu=8078004,Du=8078005,Wu=8078006,qu=8078011;function ma(n){return Array.isArray(n)?"%5B"+n.map(ma).join("%2C%20")+"%5D":typeof n=="bigint"?`${n}n`:encodeURIComponent(String(n!=null&&Object.getPrototypeOf(n)===null?{...n}:n))}function Hu([n,t]){return`${n}=${ma(t)}`}function $u(n){const t=Object.entries(n).map(Hu).join("&");return btoa(t)}function Vu(n,t={}){{let e=`Solana error #${n}; Decode this error by running \`npx @solana/errors decode -- ${n}`;return Object.keys(t).length&&(e+=` '${$u(t)}'`),`${e}\``}}var Rr=class extends Error{constructor(...[t,e]){let r,i;if(e){const{cause:o,...c}=e;o&&(i={cause:o}),Object.keys(c).length>0&&(r=c)}const s=Vu(t,r);super(s,i);ae(this,"cause",this.cause);ae(this,"context");this.context={__code:t,...r},this.name="SolanaError"}};function ju(n,t){return"fixedSize"in t?t.fixedSize:t.getSizeFromValue(n)}function Gu(n){return Object.freeze({...n,encode:t=>{const e=new Uint8Array(ju(t,n));return n.write(t,e,0),e}})}function Zu(n){return Object.freeze({...n,decode:(t,e=0)=>n.read(t,e)[0]})}function Er(n){return"fixedSize"in n&&typeof n.fixedSize=="number"}function Yu(n,t){if(Er(n)!==Er(t))throw new Rr(Fu);if(Er(n)&&Er(t)&&n.fixedSize!==t.fixedSize)throw new Rr(Du,{decoderFixedSize:t.fixedSize,encoderFixedSize:n.fixedSize});if(!Er(n)&&!Er(t)&&n.maxSize!==t.maxSize)throw new Rr(Wu,{decoderMaxSize:t.maxSize,encoderMaxSize:n.maxSize});return{...t,...n,decode:t.decode,encode:n.encode,read:t.read,write:n.write}}function Ju(n,t,e=0){if(t.length-e<=0)throw new Rr(Uu,{codecDescription:n})}function Xu(n,t,e,r=0){const i=e.length-r;if(i<t)throw new Rr(Ku,{bytesLength:i,codecDescription:n,expected:t})}function Qu(n,t,e,r){if(r<t||r>e)throw new Rr(qu,{codecDescription:n,max:e,min:t,value:r})}function ba(n){return(n==null?void 0:n.endian)!==1}function tl(n){return Gu({fixedSize:n.size,write(t,e,r){n.range&&Qu(n.name,n.range[0],n.range[1],t);const i=new ArrayBuffer(n.size);return n.set(new DataView(i),t,ba(n.config)),e.set(new Uint8Array(i),r),r+n.size}})}function el(n){return Zu({fixedSize:n.size,read(t,e=0){Ju(n.name,t,e),Xu(n.name,n.size,t,e);const r=new DataView(rl(t,e,n.size));return[n.get(r,ba(n.config)),e+n.size]}})}function rl(n,t,e){const r=n.byteOffset+(t??0),i=e??n.byteLength;return n.buffer.slice(r,r+i)}var wa=(n={})=>tl({config:n,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(t,e,r)=>t.setBigUint64(0,BigInt(e),r),size:8}),nl=(n={})=>el({config:n,get:(t,e)=>t.getBigUint64(0,e),name:"u64",size:8}),sl=(n={})=>Yu(wa(n),nl(n));class il extends TypeError{constructor(t,e){let r;const{message:i,explanation:s,...o}=t,{path:c}=t,f=c.length===0?i:`At path: ${c.join(".")} -- ${i}`;super(s??f),s!=null&&(this.cause=f),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[t,...e()])}}function ol(n){return nn(n)&&typeof n[Symbol.iterator]=="function"}function nn(n){return typeof n=="object"&&n!=null}function xn(n){return nn(n)&&!Array.isArray(n)}function Ne(n){return typeof n=="symbol"?n.toString():typeof n=="string"?JSON.stringify(n):`${n}`}function al(n){const{done:t,value:e}=n.next();return t?void 0:e}function cl(n,t,e,r){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});const{path:i,branch:s}=t,{type:o}=e,{refinement:c,message:f=`Expected a value of type \`${o}\`${c?` with refinement \`${c}\``:""}, but received: \`${Ne(r)}\``}=n;return{value:r,type:o,refinement:c,key:i[i.length-1],path:i,branch:s,...n,message:f}}function*$i(n,t,e,r){ol(n)||(n=[n]);for(const i of n){const s=cl(i,t,e,r);s&&(yield s)}}function*ei(n,t,e={}){const{path:r=[],branch:i=[n],coerce:s=!1,mask:o=!1}=e,c={path:r,branch:i,mask:o};s&&(n=t.coercer(n,c));let f="valid";for(const g of t.validator(n,c))g.explanation=e.message,f="not_valid",yield[g,void 0];for(let[g,m,k]of t.entries(n,c)){const A=ei(m,k,{path:g===void 0?r:[...r,g],branch:g===void 0?i:[...i,m],coerce:s,mask:o,message:e.message});for(const v of A)v[0]?(f=v[0].refinement!=null?"not_refined":"not_valid",yield[v[0],void 0]):s&&(m=v[1],g===void 0?n=m:n instanceof Map?n.set(g,m):n instanceof Set?n.add(m):nn(n)&&(m!==void 0||g in n)&&(n[g]=m))}if(f!=="not_valid")for(const g of t.refiner(n,c))g.explanation=e.message,f="not_refined",yield[g,void 0];f==="valid"&&(yield[void 0,n])}let $e=class{constructor(t){const{type:e,schema:r,validator:i,refiner:s,coercer:o=f=>f,entries:c=function*(){}}=t;this.type=e,this.schema=r,this.entries=c,this.coercer=o,i?this.validator=(f,g)=>{const m=i(f,g);return $i(m,g,this,f)}:this.validator=()=>[],s?this.refiner=(f,g)=>{const m=s(f,g);return $i(m,g,this,f)}:this.refiner=()=>[]}assert(t,e){return ka(t,this,e)}create(t,e){return D(t,this,e)}is(t){return va(t,this)}mask(t,e){return ul(t,this,e)}validate(t,e={}){return sn(t,this,e)}};function ka(n,t,e){const r=sn(n,t,{message:e});if(r[0])throw r[0]}function D(n,t,e){const r=sn(n,t,{coerce:!0,message:e});if(r[0])throw r[0];return r[1]}function ul(n,t,e){const r=sn(n,t,{coerce:!0,mask:!0,message:e});if(r[0])throw r[0];return r[1]}function va(n,t){return!sn(n,t)[0]}function sn(n,t,e={}){const r=ei(n,t,e),i=al(r);return i[0]?[new il(i[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,i[1]]}function wr(n,t){return new $e({type:n,schema:null,validator:t})}function ll(){return wr("any",()=>!0)}function W(n){return new $e({type:"array",schema:n,*entries(t){if(n&&Array.isArray(t))for(const[e,r]of t.entries())yield[e,r,n]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${Ne(t)}`}})}function De(){return wr("boolean",n=>typeof n=="boolean")}function ri(n){return wr("instance",t=>t instanceof n||`Expected a \`${n.name}\` instance, but received: ${Ne(t)}`)}function wt(n){const t=Ne(n),e=typeof n;return new $e({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?n:null,validator(r){return r===n||`Expected the literal \`${t}\`, but received: ${Ne(r)}`}})}function fl(){return wr("never",()=>!1)}function q(n){return new $e({...n,validator:(t,e)=>t===null||n.validator(t,e),refiner:(t,e)=>t===null||n.refiner(t,e)})}function B(){return wr("number",n=>typeof n=="number"&&!isNaN(n)||`Expected a number, but received: ${Ne(n)}`)}function et(n){return new $e({...n,validator:(t,e)=>t===void 0||n.validator(t,e),refiner:(t,e)=>t===void 0||n.refiner(t,e)})}function Sa(n,t){return new $e({type:"record",schema:null,*entries(e){if(nn(e))for(const r in e){const i=e[r];yield[r,r,n],yield[r,i,t]}},validator(e){return xn(e)||`Expected an object, but received: ${Ne(e)}`},coercer(e){return xn(e)?{...e}:e}})}function K(){return wr("string",n=>typeof n=="string"||`Expected a string, but received: ${Ne(n)}`)}function ni(n){const t=fl();return new $e({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const r=Math.max(n.length,e.length);for(let i=0;i<r;i++)yield[i,e[i],n[i]||t]}},validator(e){return Array.isArray(e)||`Expected an array, but received: ${Ne(e)}`},coercer(e){return Array.isArray(e)?e.slice():e}})}function O(n){const t=Object.keys(n);return new $e({type:"type",schema:n,*entries(e){if(nn(e))for(const r of t)yield[r,e[r],n[r]]},validator(e){return xn(e)||`Expected an object, but received: ${Ne(e)}`},coercer(e){return xn(e)?{...e}:e}})}function xe(n){const t=n.map(e=>e.type).join(" | ");return new $e({type:"union",schema:null,coercer(e,r){for(const i of n){const[s,o]=i.validate(e,{coerce:!0,mask:r.mask});if(!s)return o}return e},validator(e,r){const i=[];for(const s of n){const[...o]=ei(e,s,r),[c]=o;if(c[0])for(const[f]of o)f&&i.push(f);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${Ne(e)}`,...i]}})}function Dr(){return wr("unknown",()=>!0)}function on(n,t,e){return new $e({...n,coercer:(r,i)=>va(r,t)?n.coercer(e(r,i),i):n.coercer(r,i)})}var dn,hl=new Uint8Array(16);function xa(){if(!dn&&(dn=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!dn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return dn(hl)}const dl=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Un(n){return typeof n=="string"&&dl.test(n)}var ce=[];for(var bs=0;bs<256;++bs)ce.push((bs+256).toString(16).substr(1));function Kn(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(ce[n[t+0]]+ce[n[t+1]]+ce[n[t+2]]+ce[n[t+3]]+"-"+ce[n[t+4]]+ce[n[t+5]]+"-"+ce[n[t+6]]+ce[n[t+7]]+"-"+ce[n[t+8]]+ce[n[t+9]]+"-"+ce[n[t+10]]+ce[n[t+11]]+ce[n[t+12]]+ce[n[t+13]]+ce[n[t+14]]+ce[n[t+15]]).toLowerCase();if(!Un(e))throw TypeError("Stringified UUID is invalid");return e}var Vi,ws,ks=0,vs=0;function pl(n,t,e){var r=t&&e||0,i=t||new Array(16);n=n||{};var s=n.node||Vi,o=n.clockseq!==void 0?n.clockseq:ws;if(s==null||o==null){var c=n.random||(n.rng||xa)();s==null&&(s=Vi=[c[0]|1,c[1],c[2],c[3],c[4],c[5]]),o==null&&(o=ws=(c[6]<<8|c[7])&16383)}var f=n.msecs!==void 0?n.msecs:Date.now(),g=n.nsecs!==void 0?n.nsecs:vs+1,m=f-ks+(g-vs)/1e4;if(m<0&&n.clockseq===void 0&&(o=o+1&16383),(m<0||f>ks)&&n.nsecs===void 0&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");ks=f,vs=g,ws=o,f+=122192928e5;var k=((f&268435455)*1e4+g)%4294967296;i[r++]=k>>>24&255,i[r++]=k>>>16&255,i[r++]=k>>>8&255,i[r++]=k&255;var A=f/4294967296*1e4&268435455;i[r++]=A>>>8&255,i[r++]=A&255,i[r++]=A>>>24&15|16,i[r++]=A>>>16&255,i[r++]=o>>>8|128,i[r++]=o&255;for(var v=0;v<6;++v)i[r+v]=s[v];return t||Kn(i)}function _a(n){if(!Un(n))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(n.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(n.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(n.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(n.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(n.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function gl(n){n=unescape(encodeURIComponent(n));for(var t=[],e=0;e<n.length;++e)t.push(n.charCodeAt(e));return t}var yl="6ba7b810-9dad-11d1-80b4-00c04fd430c8",ml="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Ia(n,t,e){function r(i,s,o,c){if(typeof i=="string"&&(i=gl(i)),typeof s=="string"&&(s=_a(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var f=new Uint8Array(16+i.length);if(f.set(s),f.set(i,s.length),f=e(f),f[6]=f[6]&15|t,f[8]=f[8]&63|128,o){c=c||0;for(var g=0;g<16;++g)o[c+g]=f[g];return o}return Kn(f)}try{r.name=n}catch{}return r.DNS=yl,r.URL=ml,r}function bl(n){if(typeof n=="string"){var t=unescape(encodeURIComponent(n));n=new Uint8Array(t.length);for(var e=0;e<t.length;++e)n[e]=t.charCodeAt(e)}return wl(kl(vl(n),n.length*8))}function wl(n){for(var t=[],e=n.length*32,r="0123456789abcdef",i=0;i<e;i+=8){var s=n[i>>5]>>>i%32&255,o=parseInt(r.charAt(s>>>4&15)+r.charAt(s&15),16);t.push(o)}return t}function Ea(n){return(n+64>>>9<<4)+14+1}function kl(n,t){n[t>>5]|=128<<t%32,n[Ea(t)-1]=t;for(var e=1732584193,r=-271733879,i=-1732584194,s=271733878,o=0;o<n.length;o+=16){var c=e,f=r,g=i,m=s;e=me(e,r,i,s,n[o],7,-680876936),s=me(s,e,r,i,n[o+1],12,-389564586),i=me(i,s,e,r,n[o+2],17,606105819),r=me(r,i,s,e,n[o+3],22,-1044525330),e=me(e,r,i,s,n[o+4],7,-176418897),s=me(s,e,r,i,n[o+5],12,1200080426),i=me(i,s,e,r,n[o+6],17,-1473231341),r=me(r,i,s,e,n[o+7],22,-45705983),e=me(e,r,i,s,n[o+8],7,1770035416),s=me(s,e,r,i,n[o+9],12,-1958414417),i=me(i,s,e,r,n[o+10],17,-42063),r=me(r,i,s,e,n[o+11],22,-1990404162),e=me(e,r,i,s,n[o+12],7,1804603682),s=me(s,e,r,i,n[o+13],12,-40341101),i=me(i,s,e,r,n[o+14],17,-1502002290),r=me(r,i,s,e,n[o+15],22,1236535329),e=be(e,r,i,s,n[o+1],5,-165796510),s=be(s,e,r,i,n[o+6],9,-1069501632),i=be(i,s,e,r,n[o+11],14,643717713),r=be(r,i,s,e,n[o],20,-373897302),e=be(e,r,i,s,n[o+5],5,-701558691),s=be(s,e,r,i,n[o+10],9,38016083),i=be(i,s,e,r,n[o+15],14,-660478335),r=be(r,i,s,e,n[o+4],20,-405537848),e=be(e,r,i,s,n[o+9],5,568446438),s=be(s,e,r,i,n[o+14],9,-1019803690),i=be(i,s,e,r,n[o+3],14,-187363961),r=be(r,i,s,e,n[o+8],20,1163531501),e=be(e,r,i,s,n[o+13],5,-1444681467),s=be(s,e,r,i,n[o+2],9,-51403784),i=be(i,s,e,r,n[o+7],14,1735328473),r=be(r,i,s,e,n[o+12],20,-1926607734),e=we(e,r,i,s,n[o+5],4,-378558),s=we(s,e,r,i,n[o+8],11,-2022574463),i=we(i,s,e,r,n[o+11],16,1839030562),r=we(r,i,s,e,n[o+14],23,-35309556),e=we(e,r,i,s,n[o+1],4,-1530992060),s=we(s,e,r,i,n[o+4],11,1272893353),i=we(i,s,e,r,n[o+7],16,-155497632),r=we(r,i,s,e,n[o+10],23,-1094730640),e=we(e,r,i,s,n[o+13],4,681279174),s=we(s,e,r,i,n[o],11,-358537222),i=we(i,s,e,r,n[o+3],16,-722521979),r=we(r,i,s,e,n[o+6],23,76029189),e=we(e,r,i,s,n[o+9],4,-640364487),s=we(s,e,r,i,n[o+12],11,-421815835),i=we(i,s,e,r,n[o+15],16,530742520),r=we(r,i,s,e,n[o+2],23,-995338651),e=ke(e,r,i,s,n[o],6,-198630844),s=ke(s,e,r,i,n[o+7],10,1126891415),i=ke(i,s,e,r,n[o+14],15,-1416354905),r=ke(r,i,s,e,n[o+5],21,-57434055),e=ke(e,r,i,s,n[o+12],6,1700485571),s=ke(s,e,r,i,n[o+3],10,-1894986606),i=ke(i,s,e,r,n[o+10],15,-1051523),r=ke(r,i,s,e,n[o+1],21,-2054922799),e=ke(e,r,i,s,n[o+8],6,1873313359),s=ke(s,e,r,i,n[o+15],10,-30611744),i=ke(i,s,e,r,n[o+6],15,-1560198380),r=ke(r,i,s,e,n[o+13],21,1309151649),e=ke(e,r,i,s,n[o+4],6,-145523070),s=ke(s,e,r,i,n[o+11],10,-1120210379),i=ke(i,s,e,r,n[o+2],15,718787259),r=ke(r,i,s,e,n[o+9],21,-343485551),e=ar(e,c),r=ar(r,f),i=ar(i,g),s=ar(s,m)}return[e,r,i,s]}function vl(n){if(n.length===0)return[];for(var t=n.length*8,e=new Uint32Array(Ea(t)),r=0;r<t;r+=8)e[r>>5]|=(n[r/8]&255)<<r%32;return e}function ar(n,t){var e=(n&65535)+(t&65535),r=(n>>16)+(t>>16)+(e>>16);return r<<16|e&65535}function Sl(n,t){return n<<t|n>>>32-t}function Fn(n,t,e,r,i,s){return ar(Sl(ar(ar(t,n),ar(r,s)),i),e)}function me(n,t,e,r,i,s,o){return Fn(t&e|~t&r,n,t,i,s,o)}function be(n,t,e,r,i,s,o){return Fn(t&r|e&~r,n,t,i,s,o)}function we(n,t,e,r,i,s,o){return Fn(t^e^r,n,t,i,s,o)}function ke(n,t,e,r,i,s,o){return Fn(e^(t|~r),n,t,i,s,o)}var xl=Ia("v3",48,bl);const _l=xl;function Il(n,t,e){n=n||{};var r=n.random||(n.rng||xa)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){e=e||0;for(var i=0;i<16;++i)t[e+i]=r[i];return t}return Kn(r)}function El(n,t,e,r){switch(n){case 0:return t&e^~t&r;case 1:return t^e^r;case 2:return t&e^t&r^e&r;case 3:return t^e^r}}function Ss(n,t){return n<<t|n>>>32-t}function Al(n){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof n=="string"){var r=unescape(encodeURIComponent(n));n=[];for(var i=0;i<r.length;++i)n.push(r.charCodeAt(i))}else Array.isArray(n)||(n=Array.prototype.slice.call(n));n.push(128);for(var s=n.length/4+2,o=Math.ceil(s/16),c=new Array(o),f=0;f<o;++f){for(var g=new Uint32Array(16),m=0;m<16;++m)g[m]=n[f*64+m*4]<<24|n[f*64+m*4+1]<<16|n[f*64+m*4+2]<<8|n[f*64+m*4+3];c[f]=g}c[o-1][14]=(n.length-1)*8/Math.pow(2,32),c[o-1][14]=Math.floor(c[o-1][14]),c[o-1][15]=(n.length-1)*8&4294967295;for(var k=0;k<o;++k){for(var A=new Uint32Array(80),v=0;v<16;++v)A[v]=c[k][v];for(var E=16;E<80;++E)A[E]=Ss(A[E-3]^A[E-8]^A[E-14]^A[E-16],1);for(var I=e[0],x=e[1],M=e[2],z=e[3],N=e[4],V=0;V<80;++V){var L=Math.floor(V/20),H=Ss(I,5)+El(L,x,M,z)+N+t[L]+A[V]>>>0;N=z,z=M,M=Ss(x,30)>>>0,x=I,I=H}e[0]=e[0]+I>>>0,e[1]=e[1]+x>>>0,e[2]=e[2]+M>>>0,e[3]=e[3]+z>>>0,e[4]=e[4]+N>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var Bl=Ia("v5",80,Al);const Rl=Bl,Ml="00000000-0000-0000-0000-000000000000";function Pl(n){if(!Un(n))throw TypeError("Invalid UUID");return parseInt(n.substr(14,1),16)}const Tl=Object.freeze(Object.defineProperty({__proto__:null,NIL:Ml,parse:_a,stringify:Kn,v1:pl,v3:_l,v4:Il,v5:Rl,validate:Un,version:Pl},Symbol.toStringTag,{value:"Module"})),Aa=ko(Tl),Ll=Aa.v4,Cl=function(n,t,e,r){if(typeof n!="string")throw new TypeError(n+" must be a string");r=r||{};const i=typeof r.version=="number"?r.version:2;if(i!==1&&i!==2)throw new TypeError(i+" must be 1 or 2");const s={method:n};if(i===2&&(s.jsonrpc="2.0"),t){if(typeof t!="object"&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");s.params=t}if(typeof e>"u"){const o=typeof r.generator=="function"?r.generator:function(){return Ll()};s.id=o(s,r)}else i===2&&e===null?r.notificationIdNull&&(s.id=null):s.id=e;return s};var Ol=Cl;const Nl=Aa.v4,zl=Ol,Qr=function(n,t){if(!(this instanceof Qr))return new Qr(n,t);t||(t={}),this.options={reviver:typeof t.reviver<"u"?t.reviver:null,replacer:typeof t.replacer<"u"?t.replacer:null,generator:typeof t.generator<"u"?t.generator:function(){return Nl()},version:typeof t.version<"u"?t.version:2,notificationIdNull:typeof t.notificationIdNull=="boolean"?t.notificationIdNull:!1},this.callServer=n};var Ul=Qr;Qr.prototype.request=function(n,t,e,r){const i=this;let s=null;const o=Array.isArray(n)&&typeof t=="function";if(this.options.version===1&&o)throw new TypeError("JSON-RPC 1.0 does not support batching");if(o||!o&&n&&typeof n=="object"&&typeof t=="function")r=t,s=n;else{typeof e=="function"&&(r=e,e=void 0);const g=typeof r=="function";try{s=zl(n,t,e,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(m){if(g)return r(m);throw m}if(!g)return s}let f;try{f=JSON.stringify(s,this.options.replacer)}catch(g){return r(g)}return this.callServer(f,function(g,m){i._parseResponse(g,m,r)}),s};Qr.prototype._parseResponse=function(n,t,e){if(n){e(n);return}if(!t)return e();let r;try{r=JSON.parse(t,this.options.reviver)}catch(i){return e(i)}if(e.length===3)if(Array.isArray(r)){const i=function(o){return typeof o.error<"u"},s=function(o){return!i(o)};return e(null,r.filter(i),r.filter(s))}else return e(null,r.error,r.result);e(null,r)};const Kl=Us(Ul);var Fl=class extends xo.EventEmitter{constructor(t,e,r){super();ae(this,"socket");this.socket=new window.WebSocket(t,r),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=i=>this.emit("message",i.data),this.socket.onerror=i=>this.emit("error",i),this.socket.onclose=i=>{this.emit("close",i.code,i.reason)}}send(t,e,r){const i=r||e;try{this.socket.send(t),i()}catch(s){i(s)}}close(t,e){this.socket.close(t,e)}addEventListener(t,e,r){this.socket.addEventListener(t,e,r)}};function Dl(n,t){return new Fl(n,t)}var Wl=class{encode(n){return JSON.stringify(n)}decode(n){return JSON.parse(n)}},ql=class extends xo.EventEmitter{constructor(t,e="ws://localhost:8080",{autoconnect:r=!0,reconnect:i=!0,reconnect_interval:s=1e3,max_reconnects:o=5,...c}={},f,g){super();ae(this,"address");ae(this,"rpc_id");ae(this,"queue");ae(this,"options");ae(this,"autoconnect");ae(this,"ready");ae(this,"reconnect");ae(this,"reconnect_timer_id");ae(this,"reconnect_interval");ae(this,"max_reconnects");ae(this,"rest_options");ae(this,"current_reconnects");ae(this,"generate_request_id");ae(this,"socket");ae(this,"webSocketFactory");ae(this,"dataPack");this.webSocketFactory=t,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=r,this.ready=!1,this.reconnect=i,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=o,this.rest_options=c,this.current_reconnects=0,this.generate_request_id=f||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),g?this.dataPack=g:this.dataPack=new Wl,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(t,e,r,i){return!i&&typeof r=="object"&&(i=r,r=null),new Promise((s,o)=>{if(!this.ready)return o(new Error("socket not ready"));const c=this.generate_request_id(t,e),f={jsonrpc:"2.0",method:t,params:e||void 0,id:c};this.socket.send(this.dataPack.encode(f),i,g=>{if(g)return o(g);this.queue[c]={promise:[s,o]},r&&(this.queue[c].timeout=setTimeout(()=>{delete this.queue[c],o(new Error("reply timeout"))},r))})})}async login(t){const e=await this.call("rpc.login",t);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(t,e){return new Promise((r,i)=>{if(!this.ready)return i(new Error("socket not ready"));const s={jsonrpc:"2.0",method:t,params:e};this.socket.send(this.dataPack.encode(s),o=>{if(o)return i(o);r()})})}async subscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.on",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed subscribing to an event '"+t+"' with: "+e[t]);return e}async unsubscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.off",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed unsubscribing from an event with: "+e);return e}close(t,e){this.socket.close(t||1e3,e)}setAutoReconnect(t){this.reconnect=t}setReconnectInterval(t){this.reconnect_interval=t}setMaxReconnects(t){this.max_reconnects=t}_connect(t,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(t,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:r})=>{r instanceof ArrayBuffer&&(r=G.Buffer.from(r).toString());try{r=this.dataPack.decode(r)}catch{return}if(r.notification&&this.listeners(r.notification).length){if(!Object.keys(r.params).length)return this.emit(r.notification);const i=[r.notification];if(r.params.constructor===Object)i.push(r.params);else for(let s=0;s<r.params.length;s++)i.push(r.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,i)})}if(!this.queue[r.id])return r.method?Promise.resolve().then(()=>{this.emit(r.method,r==null?void 0:r.params)}):void 0;"error"in r=="result"in r&&this.queue[r.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[r.id].timeout&&clearTimeout(this.queue[r.id].timeout),r.error?this.queue[r.id].promise[1](r.error):this.queue[r.id].promise[0](r.result),delete this.queue[r.id]}),this.socket.addEventListener("error",r=>this.emit("error",r)),this.socket.addEventListener("close",({code:r,reason:i})=>{this.ready&&setTimeout(()=>this.emit("close",r,i),0),this.ready=!1,this.socket=void 0,r!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(t,e),this.reconnect_interval)))})}};const Hl=BigInt(0),qr=BigInt(1),$l=BigInt(2),Vl=BigInt(7),jl=BigInt(256),Gl=BigInt(113),Ba=[],Ra=[],Ma=[];for(let n=0,t=qr,e=1,r=0;n<24;n++){[e,r]=[r,(2*e+3*r)%5],Ba.push(2*(5*r+e)),Ra.push((n+1)*(n+2)/2%64);let i=Hl;for(let s=0;s<7;s++)t=(t<<qr^(t>>Vl)*Gl)%jl,t&$l&&(i^=qr<<(qr<<BigInt(s))-qr);Ma.push(i)}const Pa=Bo(Ma,!0),Zl=Pa[0],Yl=Pa[1],ji=(n,t,e)=>e>32?_c(n,t,e):Sc(n,t,e),Gi=(n,t,e)=>e>32?Ic(n,t,e):xc(n,t,e);function Jl(n,t=24){const e=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let o=0;o<10;o++)e[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const c=(o+8)%10,f=(o+2)%10,g=e[f],m=e[f+1],k=ji(g,m,1)^e[c],A=Gi(g,m,1)^e[c+1];for(let v=0;v<50;v+=10)n[o+v]^=k,n[o+v+1]^=A}let i=n[2],s=n[3];for(let o=0;o<24;o++){const c=Ra[o],f=ji(i,s,c),g=Gi(i,s,c),m=Ba[o];i=n[m],s=n[m+1],n[m]=f,n[m+1]=g}for(let o=0;o<50;o+=10){for(let c=0;c<10;c++)e[c]=n[o+c];for(let c=0;c<10;c++)n[o+c]^=~e[(c+2)%10]&e[(c+4)%10]}n[0]^=Zl[r],n[1]^=Yl[r]}ur(e)}class si extends Ws{constructor(t,e,r,i=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=e,this.outputLen=r,this.enableXOF=i,this.rounds=s,Jr(r),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=hc(this.state)}clone(){return this._cloneInto()}keccak(){Ti(this.state32),Jl(this.state32,this.rounds),Ti(this.state32),this.posOut=0,this.pos=0}update(t){Mr(this),t=Mn(t),Le(t);const{blockLen:e,state:r}=this,i=t.length;for(let s=0;s<i;){const o=Math.min(e-this.pos,i-s);for(let c=0;c<o;c++)r[this.pos++]^=t[s++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:r,blockLen:i}=this;t[r]^=e,e&128&&r===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){Mr(this,!1),Le(t),this.finish();const e=this.state,{blockLen:r}=this;for(let i=0,s=t.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);t.set(e.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Jr(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(_o(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,ur(this.state)}_cloneInto(t){const{blockLen:e,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return t||(t=new si(e,r,i,o,s)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=s,t.suffix=r,t.outputLen=i,t.enableXOF=o,t.destroyed=this.destroyed,t}}const Xl=(n,t,e)=>qs(()=>new si(t,n,e)),Zi=(()=>Xl(1,136,256/8))();class Ta extends Ws{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,fc(t);const r=Mn(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?t.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=t.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),ur(s)}update(t){return Mr(this),this.iHash.update(t),this}digestInto(t){Mr(this),Le(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:c}=this;return t=t,t.finished=i,t.destroyed=s,t.blockLen=o,t.outputLen=c,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const La=(n,t,e)=>new Ta(n,t).update(e).digest();La.create=(n,t)=>new Ta(n,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Yi(n){n.lowS!==void 0&&mr("lowS",n.lowS),n.prehash!==void 0&&mr("prehash",n.prehash)}class Ql extends Error{constructor(t=""){super(t)}}const Ge={Err:Ql,_tlv:{encode:(n,t)=>{const{Err:e}=Ge;if(n<0||n>256)throw new e("tlv.encode: wrong tag");if(t.length&1)throw new e("tlv.encode: unpadded data");const r=t.length/2,i=fn(r);if(i.length/2&128)throw new e("tlv.encode: long form length too big");const s=r>127?fn(i.length/2|128):"";return fn(n)+s+i+t},decode(n,t){const{Err:e}=Ge;let r=0;if(n<0||n>256)throw new e("tlv.encode: wrong tag");if(t.length<2||t[r++]!==n)throw new e("tlv.decode: wrong tlv");const i=t[r++],s=!!(i&128);let o=0;if(!s)o=i;else{const f=i&127;if(!f)throw new e("tlv.decode(long): indefinite length not supported");if(f>4)throw new e("tlv.decode(long): byte length is too big");const g=t.subarray(r,r+f);if(g.length!==f)throw new e("tlv.decode: length bytes not complete");if(g[0]===0)throw new e("tlv.decode(long): zero leftmost byte");for(const m of g)o=o<<8|m;if(r+=f,o<128)throw new e("tlv.decode(long): not minimal encoding")}const c=t.subarray(r,r+o);if(c.length!==o)throw new e("tlv.decode: wrong value length");return{v:c,l:t.subarray(r+o)}}},_int:{encode(n){const{Err:t}=Ge;if(n<jr)throw new t("integer: negative integers are not allowed");let e=fn(n);if(Number.parseInt(e[0],16)&8&&(e="00"+e),e.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return e},decode(n){const{Err:t}=Ge;if(n[0]&128)throw new t("invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return Pn(n)}},toSig(n){const{Err:t,_int:e,_tlv:r}=Ge,i=_t("signature",n),{v:s,l:o}=r.decode(48,i);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:c,l:f}=r.decode(2,s),{v:g,l:m}=r.decode(2,f);if(m.length)throw new t("invalid signature: left bytes after parsing");return{r:e.decode(c),s:e.decode(g)}},hexFromSig(n){const{_tlv:t,_int:e}=Ge,r=t.encode(2,e.encode(n.r)),i=t.encode(2,e.encode(n.s)),s=r+i;return t.encode(48,s)}},jr=BigInt(0),Gr=BigInt(1),tf=BigInt(2),pn=BigInt(3),ef=BigInt(4);function rf(n,t,e){function r(i){const s=n.sqr(i),o=n.mul(s,i);return n.add(n.add(o,n.mul(i,t)),e)}return r}function Ca(n,t,e){const{BYTES:r}=n;function i(s){let o;if(typeof s=="bigint")o=s;else{let c=_t("private key",s);if(t){if(!t.includes(c.length*2))throw new Error("invalid private key");const f=new Uint8Array(r);f.set(c,f.length-c.length),c=f}try{o=n.fromBytes(c)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof s}`)}}if(e&&(o=n.create(o)),!n.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return i}function nf(n,t={}){const{Fp:e,Fn:r}=Ho("weierstrass",n,t),{h:i,n:s}=n;rn(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=t;if(o&&(!e.is0(n.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function c(){if(!e.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function f(j,P,U){const{x:T,y:C}=P.toAffine(),d=e.toBytes(T);if(mr("isCompressed",U),U){c();const a=!e.isOdd(C);return Xe(Oa(a),d)}else return Xe(Uint8Array.of(4),d,e.toBytes(C))}function g(j){Le(j);const P=e.BYTES,U=P+1,T=2*P+1,C=j.length,d=j[0],a=j.subarray(1);if(C===U&&(d===2||d===3)){const l=e.fromBytes(a);if(!e.isValid(l))throw new Error("bad point: is not on curve, wrong x");const h=A(l);let y;try{y=e.sqrt(h)}catch(_){const p=_ instanceof Error?": "+_.message:"";throw new Error("bad point: is not on curve, sqrt error"+p)}c();const b=e.isOdd(y);return(d&1)===1!==b&&(y=e.neg(y)),{x:l,y}}else if(C===T&&d===4){const l=e.fromBytes(a.subarray(P*0,P*1)),h=e.fromBytes(a.subarray(P*1,P*2));if(!v(l,h))throw new Error("bad point: is not on curve");return{x:l,y:h}}else throw new Error(`bad point: got length ${C}, expected compressed=${U} or uncompressed=${T}`)}const m=t.toBytes||f,k=t.fromBytes||g,A=rf(e,n.a,n.b);function v(j,P){const U=e.sqr(P),T=A(j);return e.eql(U,T)}if(!v(n.Gx,n.Gy))throw new Error("bad curve params: generator point");const E=e.mul(e.pow(n.a,pn),ef),I=e.mul(e.sqr(n.b),BigInt(27));if(e.is0(e.add(E,I)))throw new Error("bad curve params: a or b");function x(j,P,U=!1){if(!e.isValid(P)||U&&e.is0(P))throw new Error(`bad point coordinate ${j}`);return P}function M(j){if(!(j instanceof L))throw new Error("ProjectivePoint expected")}const z=mn((j,P)=>{const{px:U,py:T,pz:C}=j;if(e.eql(C,e.ONE))return{x:U,y:T};const d=j.is0();P==null&&(P=d?e.ONE:e.inv(C));const a=e.mul(U,P),l=e.mul(T,P),h=e.mul(C,P);if(d)return{x:e.ZERO,y:e.ZERO};if(!e.eql(h,e.ONE))throw new Error("invZ was invalid");return{x:a,y:l}}),N=mn(j=>{if(j.is0()){if(t.allowInfinityPoint&&!e.is0(j.py))return;throw new Error("bad point: ZERO")}const{x:P,y:U}=j.toAffine();if(!e.isValid(P)||!e.isValid(U))throw new Error("bad point: x or y not field elements");if(!v(P,U))throw new Error("bad point: equation left != right");if(!j.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function V(j,P,U,T,C){return U=new L(e.mul(U.px,j),U.py,U.pz),P=Vr(T,P),U=Vr(C,U),P.add(U)}class L{constructor(P,U,T){this.px=x("x",P),this.py=x("y",U,!0),this.pz=x("z",T),Object.freeze(this)}static fromAffine(P){const{x:U,y:T}=P||{};if(!P||!e.isValid(U)||!e.isValid(T))throw new Error("invalid affine point");if(P instanceof L)throw new Error("projective point not allowed");return e.is0(U)&&e.is0(T)?L.ZERO:new L(U,T,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(P){return Ko(L,"pz",P)}static fromBytes(P){return Le(P),L.fromHex(P)}static fromHex(P){const U=L.fromAffine(k(_t("pointHex",P)));return U.assertValidity(),U}static fromPrivateKey(P){const U=Ca(r,t.allowedPrivateKeyLengths,t.wrapPrivateKey);return L.BASE.multiply(U(P))}static msm(P,U){return qo(L,r,P,U)}precompute(P=8,U=!0){return Z.setWindowSize(this,P),U||this.multiply(pn),this}_setWindowSize(P){this.precompute(P)}assertValidity(){N(this)}hasEvenY(){const{y:P}=this.toAffine();if(!e.isOdd)throw new Error("Field doesn't support isOdd");return!e.isOdd(P)}equals(P){M(P);const{px:U,py:T,pz:C}=this,{px:d,py:a,pz:l}=P,h=e.eql(e.mul(U,l),e.mul(d,C)),y=e.eql(e.mul(T,l),e.mul(a,C));return h&&y}negate(){return new L(this.px,e.neg(this.py),this.pz)}double(){const{a:P,b:U}=n,T=e.mul(U,pn),{px:C,py:d,pz:a}=this;let l=e.ZERO,h=e.ZERO,y=e.ZERO,b=e.mul(C,C),S=e.mul(d,d),_=e.mul(a,a),p=e.mul(C,d);return p=e.add(p,p),y=e.mul(C,a),y=e.add(y,y),l=e.mul(P,y),h=e.mul(T,_),h=e.add(l,h),l=e.sub(S,h),h=e.add(S,h),h=e.mul(l,h),l=e.mul(p,l),y=e.mul(T,y),_=e.mul(P,_),p=e.sub(b,_),p=e.mul(P,p),p=e.add(p,y),y=e.add(b,b),b=e.add(y,b),b=e.add(b,_),b=e.mul(b,p),h=e.add(h,b),_=e.mul(d,a),_=e.add(_,_),b=e.mul(_,p),l=e.sub(l,b),y=e.mul(_,S),y=e.add(y,y),y=e.add(y,y),new L(l,h,y)}add(P){M(P);const{px:U,py:T,pz:C}=this,{px:d,py:a,pz:l}=P;let h=e.ZERO,y=e.ZERO,b=e.ZERO;const S=n.a,_=e.mul(n.b,pn);let p=e.mul(U,d),u=e.mul(T,a),w=e.mul(C,l),X=e.add(U,T),$=e.add(d,a);X=e.mul(X,$),$=e.add(p,u),X=e.sub(X,$),$=e.add(U,C);let Q=e.add(d,l);return $=e.mul($,Q),Q=e.add(p,w),$=e.sub($,Q),Q=e.add(T,C),h=e.add(a,l),Q=e.mul(Q,h),h=e.add(u,w),Q=e.sub(Q,h),b=e.mul(S,$),h=e.mul(_,w),b=e.add(h,b),h=e.sub(u,b),b=e.add(u,b),y=e.mul(h,b),u=e.add(p,p),u=e.add(u,p),w=e.mul(S,w),$=e.mul(_,$),u=e.add(u,w),w=e.sub(p,w),w=e.mul(S,w),$=e.add($,w),p=e.mul(u,$),y=e.add(y,p),p=e.mul(Q,$),h=e.mul(X,h),h=e.sub(h,p),p=e.mul(X,u),b=e.mul(Q,b),b=e.add(b,p),new L(h,y,b)}subtract(P){return this.add(P.negate())}is0(){return this.equals(L.ZERO)}multiply(P){const{endo:U}=t;if(!r.isValidNot0(P))throw new Error("invalid scalar: out of range");let T,C;const d=a=>Z.wNAFCached(this,a,L.normalizeZ);if(U){const{k1neg:a,k1:l,k2neg:h,k2:y}=U.splitScalar(P),{p:b,f:S}=d(l),{p:_,f:p}=d(y);C=S.add(p),T=V(U.beta,b,_,a,h)}else{const{p:a,f:l}=d(P);T=a,C=l}return L.normalizeZ([T,C])[0]}multiplyUnsafe(P){const{endo:U}=t,T=this;if(!r.isValid(P))throw new Error("invalid scalar: out of range");if(P===jr||T.is0())return L.ZERO;if(P===Gr)return T;if(Z.hasPrecomputes(this))return this.multiply(P);if(U){const{k1neg:C,k1:d,k2neg:a,k2:l}=U.splitScalar(P),{p1:h,p2:y}=Qc(L,T,d,l);return V(U.beta,h,y,C,a)}else return Z.wNAFCachedUnsafe(T,P)}multiplyAndAddUnsafe(P,U,T){const C=this.multiplyUnsafe(U).add(P.multiplyUnsafe(T));return C.is0()?void 0:C}toAffine(P){return z(this,P)}isTorsionFree(){const{isTorsionFree:P}=t;return i===Gr?!0:P?P(L,this):Z.wNAFCachedUnsafe(this,s).is0()}clearCofactor(){const{clearCofactor:P}=t;return i===Gr?this:P?P(L,this):this.multiplyUnsafe(i)}toBytes(P=!0){return mr("isCompressed",P),this.assertValidity(),m(L,this,P)}toRawBytes(P=!0){return this.toBytes(P)}toHex(P=!0){return Pr(this.toBytes(P))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}L.BASE=new L(n.Gx,n.Gy,e.ONE),L.ZERO=new L(e.ZERO,e.ONE,e.ZERO),L.Fp=e,L.Fn=r;const H=r.BITS,Z=Wo(L,t.endo?Math.ceil(H/2):H);return L}function Oa(n){return Uint8Array.of(n?2:3)}function sf(n,t,e={}){rn(t,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=t.randomBytes||Eo,i=t.hmac||((T,...C)=>La(t.hash,T,Xe(...C))),{Fp:s,Fn:o}=n,{ORDER:c,BITS:f}=o;function g(T){const C=c>>Gr;return T>C}function m(T){return g(T)?o.neg(T):T}function k(T,C){if(!o.isValidNot0(C))throw new Error(`invalid signature ${T}: out of range 1..CURVE.n`)}class A{constructor(C,d,a){k("r",C),k("s",d),this.r=C,this.s=d,a!=null&&(this.recovery=a),Object.freeze(this)}static fromCompact(C){const d=o.BYTES,a=_t("compactSignature",C,d*2);return new A(o.fromBytes(a.subarray(0,d)),o.fromBytes(a.subarray(d,d*2)))}static fromDER(C){const{r:d,s:a}=Ge.toSig(_t("DER",C));return new A(d,a)}assertValidity(){}addRecoveryBit(C){return new A(this.r,this.s,C)}recoverPublicKey(C){const d=s.ORDER,{r:a,s:l,recovery:h}=this;if(h==null||![0,1,2,3].includes(h))throw new Error("recovery id invalid");if(c*tf<d&&h>1)throw new Error("recovery id is ambiguous for h>1 curve");const b=h===2||h===3?a+c:a;if(!s.isValid(b))throw new Error("recovery id 2 or 3 invalid");const S=s.toBytes(b),_=n.fromHex(Xe(Oa((h&1)===0),S)),p=o.inv(b),u=N(_t("msgHash",C)),w=o.create(-u*p),X=o.create(l*p),$=n.BASE.multiplyUnsafe(w).add(_.multiplyUnsafe(X));if($.is0())throw new Error("point at infinify");return $.assertValidity(),$}hasHighS(){return g(this.s)}normalizeS(){return this.hasHighS()?new A(this.r,o.neg(this.s),this.recovery):this}toBytes(C){if(C==="compact")return Xe(o.toBytes(this.r),o.toBytes(this.s));if(C==="der")return Ds(Ge.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Pr(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Pr(this.toBytes("compact"))}}const v=Ca(o,e.allowedPrivateKeyLengths,e.wrapPrivateKey),E={isValidPrivateKey(T){try{return v(T),!0}catch{return!1}},normPrivateKeyToScalar:v,randomPrivateKey:()=>{const T=c;return Yc(r(Uo(T)),T)},precompute(T=8,C=n.BASE){return C.precompute(T,!1)}};function I(T,C=!0){return n.fromPrivateKey(T).toBytes(C)}function x(T){if(typeof T=="bigint")return!1;if(T instanceof n)return!0;const d=_t("key",T).length,a=s.BYTES,l=a+1,h=2*a+1;if(!(e.allowedPrivateKeyLengths||o.BYTES===l))return d===l||d===h}function M(T,C,d=!0){if(x(T)===!0)throw new Error("first arg must be private key");if(x(C)===!1)throw new Error("second arg must be public key");return n.fromHex(C).multiply(v(T)).toBytes(d)}const z=t.bits2int||function(T){if(T.length>8192)throw new Error("input is too large");const C=Pn(T),d=T.length*8-f;return d>0?C>>BigInt(d):C},N=t.bits2int_modN||function(T){return o.create(z(T))},V=Ln(f);function L(T){return Br("num < 2^"+f,T,jr,V),o.toBytes(T)}function H(T,C,d=Z){if(["recovered","canonical"].some(X=>X in d))throw new Error("sign() legacy options not supported");const{hash:a}=t;let{lowS:l,prehash:h,extraEntropy:y}=d;l==null&&(l=!0),T=_t("msgHash",T),Yi(d),h&&(T=_t("prehashed msgHash",a(T)));const b=N(T),S=v(C),_=[L(S),L(b)];if(y!=null&&y!==!1){const X=y===!0?r(s.BYTES):y;_.push(_t("extraEntropy",X))}const p=Xe(..._),u=b;function w(X){const $=z(X);if(!o.isValidNot0($))return;const Q=o.inv($),vt=n.BASE.multiply($).toAffine(),at=o.create(vt.x);if(at===jr)return;const lt=o.create(Q*o.create(u+at*S));if(lt===jr)return;let Sr=(vt.x===at?0:2)|Number(vt.y&Gr),pt=lt;return l&&g(lt)&&(pt=m(lt),Sr^=1),new A(at,pt,Sr)}return{seed:p,k2sig:w}}const Z={lowS:t.lowS,prehash:!1},j={lowS:t.lowS,prehash:!1};function P(T,C,d=Z){const{seed:a,k2sig:l}=H(T,C,d);return Fc(t.hash.outputLen,o.BYTES,i)(a,l)}n.BASE.precompute(8);function U(T,C,d,a=j){const l=T;C=_t("msgHash",C),d=_t("publicKey",d),Yi(a);const{lowS:h,prehash:y,format:b}=a;if("strict"in a)throw new Error("options.strict was renamed to lowS");if(b!==void 0&&!["compact","der","js"].includes(b))throw new Error('format must be "compact", "der" or "js"');const S=typeof l=="string"||Fs(l),_=!S&&!b&&typeof l=="object"&&l!==null&&typeof l.r=="bigint"&&typeof l.s=="bigint";if(!S&&!_)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let p,u;try{if(_)if(b===void 0||b==="js")p=new A(l.r,l.s);else throw new Error("invalid format");if(S){try{b!=="compact"&&(p=A.fromDER(l))}catch(pt){if(!(pt instanceof Ge.Err))throw pt}!p&&b!=="der"&&(p=A.fromCompact(l))}u=n.fromHex(d)}catch{return!1}if(!p||h&&p.hasHighS())return!1;y&&(C=t.hash(C));const{r:w,s:X}=p,$=N(C),Q=o.inv(X),vt=o.create($*Q),at=o.create(w*Q),lt=n.BASE.multiplyUnsafe(vt).add(u.multiplyUnsafe(at));return lt.is0()?!1:o.create(lt.x)===w}return Object.freeze({getPublicKey:I,getSharedSecret:M,sign:P,verify:U,utils:E,Point:n,Signature:A})}function of(n){const t={a:n.a,b:n.b,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},e=n.Fp,r=zr(t.n,n.nBitLength),i={Fp:e,Fn:r,allowedPrivateKeyLengths:n.allowedPrivateKeyLengths,allowInfinityPoint:n.allowInfinityPoint,endo:n.endo,wrapPrivateKey:n.wrapPrivateKey,isTorsionFree:n.isTorsionFree,clearCofactor:n.clearCofactor,fromBytes:n.fromBytes,toBytes:n.toBytes};return{CURVE:t,curveOpts:i}}function af(n){const{CURVE:t,curveOpts:e}=of(n),r={hash:n.hash,hmac:n.hmac,randomBytes:n.randomBytes,lowS:n.lowS,bits2int:n.bits2int,bits2int_modN:n.bits2int_modN};return{CURVE:t,curveOpts:e,ecdsaOpts:r}}function cf(n,t){return Object.assign({},t,{ProjectivePoint:t.Point,CURVE:n})}function uf(n){const{CURVE:t,curveOpts:e,ecdsaOpts:r}=af(n),i=nf(t,e),s=sf(i,r,e);return cf(n,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function lf(n,t){const e=r=>uf({...n,hash:r});return{...e(t),create:e}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _n={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")};BigInt(0);const ff=BigInt(1),Ls=BigInt(2),Ji=(n,t)=>(n+t/Ls)/t;function hf(n){const t=_n.p,e=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),c=BigInt(44),f=BigInt(88),g=n*n*n%t,m=g*g*n%t,k=St(m,e,t)*m%t,A=St(k,e,t)*m%t,v=St(A,Ls,t)*g%t,E=St(v,i,t)*v%t,I=St(E,s,t)*E%t,x=St(I,c,t)*I%t,M=St(x,f,t)*x%t,z=St(M,c,t)*I%t,N=St(z,e,t)*m%t,V=St(N,o,t)*E%t,L=St(V,r,t)*g%t,H=St(L,Ls,t);if(!Cs.eql(Cs.sqr(H),n))throw new Error("Cannot find square root");return H}const Cs=zr(_n.p,void 0,void 0,{sqrt:hf}),ii=lf({..._n,Fp:Cs,lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const t=_n.n,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-ff*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=e,o=BigInt("0x100000000000000000000000000000000"),c=Ji(s*n,t),f=Ji(-r*n,t);let g=It(n-c*e-f*i,t),m=It(-c*r-f*s,t);const k=g>o,A=m>o;if(k&&(g=t-g),A&&(m=t-m),g>o||m>o)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:k,k1:g,k2neg:A,k2:m}}}},Mo),df=Ur.utils.randomPrivateKey,Xi=()=>{const n=Ur.utils.randomPrivateKey(),t=In(n),e=new Uint8Array(64);return e.set(n),e.set(t,32),{publicKey:t,secretKey:e}},In=Ur.getPublicKey;function Qi(n){try{return Ur.ExtendedPoint.fromHex(n),!0}catch{return!1}}const oi=(n,t)=>Ur.sign(n,t.slice(0,32)),pf=Ur.verify,nt=n=>G.Buffer.isBuffer(n)?n:n instanceof Uint8Array?G.Buffer.from(n.buffer,n.byteOffset,n.byteLength):G.Buffer.from(n);class Na{constructor(t){Object.assign(this,t)}encode(){return G.Buffer.from(Xo(yn,this))}static decode(t){return Qo(yn,this,t)}static decodeUnchecked(t){return jo(yn,this,t)}}class md extends Na{constructor(t){if(super(t),this.enum="",Object.keys(t).length!==1)throw new Error("Enum can only take single value");Object.keys(t).map(e=>{this.enum=e})}}const yn=new Map;var za;const gf=32,Qe=32;function yf(n){return n._bn!==void 0}let to=1;class F extends Na{constructor(t){if(super({}),this._bn=void 0,yf(t))this._bn=t._bn;else{if(typeof t=="string"){const e=he.decode(t);if(e.length!=Qe)throw new Error("Invalid public key input");this._bn=new Pi(e)}else this._bn=new Pi(t);if(this._bn.byteLength()>Qe)throw new Error("Invalid public key input")}}static unique(){const t=new F(to);return to+=1,new F(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return he.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(G.Buffer);if(t.length===Qe)return t;const e=G.Buffer.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,r){const i=G.Buffer.concat([t.toBuffer(),G.Buffer.from(e),r.toBuffer()]),s=Hi(i);return new F(s)}static createProgramAddressSync(t,e){let r=G.Buffer.alloc(0);t.forEach(function(s){if(s.length>gf)throw new TypeError("Max seed length exceeded");r=G.Buffer.concat([r,nt(s)])}),r=G.Buffer.concat([r,e.toBuffer(),G.Buffer.from("ProgramDerivedAddress")]);const i=Hi(r);if(Qi(i))throw new Error("Invalid seeds, address must fall off the curve");return new F(i)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let r=255,i;for(;r!=0;){try{const s=t.concat(G.Buffer.from([r]));i=this.createProgramAddressSync(s,e)}catch(s){if(s instanceof TypeError)throw s;r--;continue}return[i,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new F(t);return Qi(e.toBytes())}}za=F;F.default=new za("11111111111111111111111111111111");yn.set(F,{kind:"struct",fields:[["_bn","u256"]]});class bd{constructor(t){if(this._publicKey=void 0,this._secretKey=void 0,t){const e=nt(t);if(t.length!==64)throw new Error("bad secret key size");this._publicKey=e.slice(32,64),this._secretKey=e.slice(0,32)}else this._secretKey=nt(df()),this._publicKey=nt(In(this._secretKey))}get publicKey(){return new F(this._publicKey)}get secretKey(){return G.Buffer.concat([this._secretKey,this._publicKey],64)}}const wd=new F("BPFLoader1111111111111111111111111111111111"),yr=1280-40-8,ai=127,En=64;class Ua extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Ua.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Ka extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Ka.prototype,"name",{value:"TransactionExpiredTimeoutError"});class $r extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty($r.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class An{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>255+1)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((s,o)=>{r.set(s.toBase58(),o)});const i=s=>{const o=r.get(s.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return t.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(o=>i(o.pubkey)),data:s.data}))}}const st=(n="publicKey")=>bt(32,n),mf=(n="signature")=>bt(64,n),gr=(n="string")=>{const t=J([Y("length"),Y("lengthPadding"),bt(cr(Y(),-8),"chars")],n),e=t.decode.bind(t),r=t.encode.bind(t),i=t;return i.decode=(s,o)=>e(s,o).chars.toString(),i.encode=(s,o,c)=>{const f={chars:G.Buffer.from(s,"utf8")};return r(f,o,c)},i.alloc=s=>Y().span+Y().span+G.Buffer.from(s,"utf8").length,i},bf=(n="authorized")=>J([st("staker"),st("withdrawer")],n),wf=(n="lockup")=>J([Be("unixTimestamp"),Be("epoch"),st("custodian")],n),kf=(n="voteInit")=>J([st("nodePubkey"),st("authorizedVoter"),st("authorizedWithdrawer"),ot("commission")],n),vf=(n="voteAuthorizeWithSeedArgs")=>J([Y("voteAuthorizationType"),st("currentAuthorityDerivedKeyOwnerPubkey"),gr("currentAuthorityDerivedKeySeed"),st("newAuthorized")],n);function Fa(n,t){const e=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(t[i.property]);if("count"in i&&"elementLayout"in i){const s=t[i.property];if(Array.isArray(s))return s.length*e(i.elementLayout)}else if("fields"in i)return Fa({layout:i},t[i.property]);return 0};let r=0;return n.layout.fields.forEach(i=>{r+=e(i)}),r}function _e(n){let t=0,e=0;for(;;){let r=n.shift();if(t|=(r&127)<<e*7,e+=1,!(r&128))break}return t}function Re(n,t){let e=t;for(;;){let r=e&127;if(e>>=7,e==0){n.push(r);break}else r|=128,n.push(r)}}function ct(n,t){if(!n)throw new Error(t||"Assertion failed")}class Dn{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const r=new Map,i=o=>{const c=o.toBase58();let f=r.get(c);return f===void 0&&(f={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(c,f)),f},s=i(e);s.isSigner=!0,s.isWritable=!0;for(const o of t){i(o.programId).isInvoked=!0;for(const c of o.keys){const f=i(c.pubkey);f.isSigner||(f.isSigner=c.isSigner),f.isWritable||(f.isWritable=c.isWritable)}}return new Dn(e,r)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];ct(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,f])=>f.isSigner&&f.isWritable),r=t.filter(([,f])=>f.isSigner&&!f.isWritable),i=t.filter(([,f])=>!f.isSigner&&f.isWritable),s=t.filter(([,f])=>!f.isSigner&&!f.isWritable),o={numRequiredSignatures:e.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:s.length};{ct(e.length>0,"Expected at least one writable signer key");const[f]=e[0];ct(f===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const c=[...e.map(([f])=>new F(f)),...r.map(([f])=>new F(f)),...i.map(([f])=>new F(f)),...s.map(([f])=>new F(f))];return[o,c]}extractTableLookup(t){const[e,r]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[i,s]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(e.length===0&&i.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:i},{writable:r,readonly:s}]}drainKeysFoundInLookupTable(t,e){const r=new Array,i=new Array;for(const[s,o]of this.keyMetaMap.entries())if(e(o)){const c=new F(s),f=t.findIndex(g=>g.equals(c));f>=0&&(ct(f<256,"Max lookup table index exceeded"),r.push(f),i.push(c),this.keyMetaMap.delete(s))}return[r,i]}}const Da="Reached end of buffer unexpectedly";function Ke(n){if(n.length===0)throw new Error(Da);return n.shift()}function Ie(n,...t){const[e]=t;if(t.length===2?e+(t[1]??0)>n.length:e>=n.length)throw new Error(Da);return n.splice(...t)}class We{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new F(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:he.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new An(this.staticAccountKeys)}static compile(t){const e=Dn.compile(t.instructions,t.payerKey),[r,i]=e.getMessageComponents(),o=new An(i).compileInstructions(t.instructions).map(c=>({programIdIndex:c.programIdIndex,accounts:c.accountKeyIndexes,data:he.encode(c.data)}));return new We({header:r,accountKeys:i,recentBlockhash:t.recentBlockhash,instructions:o})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const r=t-e,s=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return r<s}else{const r=e-this.header.numReadonlySignedAccounts;return t<r}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];Re(e,t);const r=this.instructions.map(k=>{const{accounts:A,programIdIndex:v}=k,E=Array.from(he.decode(k.data));let I=[];Re(I,A.length);let x=[];return Re(x,E.length),{programIdIndex:v,keyIndicesCount:G.Buffer.from(I),keyIndices:A,dataLength:G.Buffer.from(x),data:E}});let i=[];Re(i,r.length);let s=G.Buffer.alloc(yr);G.Buffer.from(i).copy(s);let o=i.length;r.forEach(k=>{const v=J([ot("programIdIndex"),bt(k.keyIndicesCount.length,"keyIndicesCount"),pe(ot("keyIndex"),k.keyIndices.length,"keyIndices"),bt(k.dataLength.length,"dataLength"),pe(ot("userdatum"),k.data.length,"data")]).encode(k,s,o);o+=v}),s=s.slice(0,o);const c=J([bt(1,"numRequiredSignatures"),bt(1,"numReadonlySignedAccounts"),bt(1,"numReadonlyUnsignedAccounts"),bt(e.length,"keyCount"),pe(st("key"),t,"keys"),st("recentBlockhash")]),f={numRequiredSignatures:G.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:G.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:G.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:G.Buffer.from(e),keys:this.accountKeys.map(k=>nt(k.toBytes())),recentBlockhash:he.decode(this.recentBlockhash)};let g=G.Buffer.alloc(2048);const m=c.encode(f,g);return s.copy(g,m),g.slice(0,m+s.length)}static from(t){let e=[...t];const r=Ke(e);if(r!==(r&ai))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=Ke(e),s=Ke(e),o=_e(e);let c=[];for(let A=0;A<o;A++){const v=Ie(e,0,Qe);c.push(new F(G.Buffer.from(v)))}const f=Ie(e,0,Qe),g=_e(e);let m=[];for(let A=0;A<g;A++){const v=Ke(e),E=_e(e),I=Ie(e,0,E),x=_e(e),M=Ie(e,0,x),z=he.encode(G.Buffer.from(M));m.push({programIdIndex:v,accounts:I,data:z})}const k={header:{numRequiredSignatures:r,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:he.encode(G.Buffer.from(f)),accountKeys:c,instructions:m};return new We(k)}}class Cr{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new An(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(t>=r){const i=t-r,s=this.addressTableLookups.reduce((o,c)=>o+c.writableIndexes.length,0);return i<s}else if(t>=this.header.numRequiredSignatures){const i=t-e,o=r-e-this.header.numReadonlyUnsignedAccounts;return i<o}else{const i=e-this.header.numReadonlySignedAccounts;return t<i}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const r of this.addressTableLookups){const i=t.find(s=>s.key.equals(r.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const s of r.writableIndexes)if(s<i.state.addresses.length)e.writable.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${r.accountKey.toBase58()}`);for(const s of r.readonlyIndexes)if(s<i.state.addresses.length)e.readonly.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${r.accountKey.toBase58()}`)}return e}static compile(t){const e=Dn.compile(t.instructions,t.payerKey),r=new Array,i={writable:new Array,readonly:new Array},s=t.addressLookupTableAccounts||[];for(const m of s){const k=e.extractTableLookup(m);if(k!==void 0){const[A,{writable:v,readonly:E}]=k;r.push(A),i.writable.push(...v),i.readonly.push(...E)}}const[o,c]=e.getMessageComponents(),g=new An(c,i).compileInstructions(t.instructions);return new Cr({header:o,staticAccountKeys:c,recentBlockhash:t.recentBlockhash,compiledInstructions:g,addressTableLookups:r})}serialize(){const t=Array();Re(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),r=Array();Re(r,this.compiledInstructions.length);const i=this.serializeAddressTableLookups(),s=Array();Re(s,this.addressTableLookups.length);const o=J([ot("prefix"),J([ot("numRequiredSignatures"),ot("numReadonlySignedAccounts"),ot("numReadonlyUnsignedAccounts")],"header"),bt(t.length,"staticAccountKeysLength"),pe(st(),this.staticAccountKeys.length,"staticAccountKeys"),st("recentBlockhash"),bt(r.length,"instructionsLength"),bt(e.length,"serializedInstructions"),bt(s.length,"addressTableLookupsLength"),bt(i.length,"serializedAddressTableLookups")]),c=new Uint8Array(yr),f=128,g=o.encode({prefix:f,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(m=>m.toBytes()),recentBlockhash:he.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:i},c);return c.slice(0,g)}serializeInstructions(){let t=0;const e=new Uint8Array(yr);for(const r of this.compiledInstructions){const i=Array();Re(i,r.accountKeyIndexes.length);const s=Array();Re(s,r.data.length);const o=J([ot("programIdIndex"),bt(i.length,"encodedAccountKeyIndexesLength"),pe(ot(),r.accountKeyIndexes.length,"accountKeyIndexes"),bt(s.length,"encodedDataLength"),bt(r.data.length,"data")]);t+=o.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:r.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(yr);for(const r of this.addressTableLookups){const i=Array();Re(i,r.writableIndexes.length);const s=Array();Re(s,r.readonlyIndexes.length);const o=J([st("accountKey"),bt(i.length,"encodedWritableIndexesLength"),pe(ot(),r.writableIndexes.length,"writableIndexes"),bt(s.length,"encodedReadonlyIndexesLength"),pe(ot(),r.readonlyIndexes.length,"readonlyIndexes")]);t+=o.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:r.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const r=Ke(e),i=r&ai;ct(r!==i,"Expected versioned message but received legacy message");const s=i;ct(s===0,`Expected versioned message with version 0 but found version ${s}`);const o={numRequiredSignatures:Ke(e),numReadonlySignedAccounts:Ke(e),numReadonlyUnsignedAccounts:Ke(e)},c=[],f=_e(e);for(let E=0;E<f;E++)c.push(new F(Ie(e,0,Qe)));const g=he.encode(Ie(e,0,Qe)),m=_e(e),k=[];for(let E=0;E<m;E++){const I=Ke(e),x=_e(e),M=Ie(e,0,x),z=_e(e),N=new Uint8Array(Ie(e,0,z));k.push({programIdIndex:I,accountKeyIndexes:M,data:N})}const A=_e(e),v=[];for(let E=0;E<A;E++){const I=new F(Ie(e,0,Qe)),x=_e(e),M=Ie(e,0,x),z=_e(e),N=Ie(e,0,z);v.push({accountKey:I,writableIndexes:M,readonlyIndexes:N})}return new Cr({header:o,staticAccountKeys:c,recentBlockhash:g,compiledInstructions:k,addressTableLookups:v})}}const Wa={deserializeMessageVersion(n){const t=n[0],e=t&ai;return e===t?"legacy":e},deserialize:n=>{const t=Wa.deserializeMessageVersion(n);if(t==="legacy")return We.from(n);if(t===0)return Cr.deserialize(n);throw new Error(`Transaction message version ${t} deserialization is not supported`)}};let sr=function(n){return n[n.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",n[n.PROCESSED=1]="PROCESSED",n[n.TIMED_OUT=2]="TIMED_OUT",n[n.NONCE_INVALID=3]="NONCE_INVALID",n}({});const Sf=G.Buffer.alloc(En).fill(0);class yt{constructor(t){this.keys=void 0,this.programId=void 0,this.data=G.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:r})=>({pubkey:t.toJSON(),isSigner:e,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class ht{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:r}=t;this.minNonceContextSlot=e,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:r}=t;this.recentBlockhash=e,this.lastValidBlockHeight=r}else{const{recentBlockhash:e,nonceInfo:r}=t;r&&(this.nonceInfo=r),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new yt(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let I=0;I<e.length;I++)if(e[I].programId===void 0)throw new Error(`Transaction instruction index ${I} has undefined program id`);const i=[],s=[];e.forEach(I=>{I.keys.forEach(M=>{s.push({...M})});const x=I.programId.toString();i.includes(x)||i.push(x)}),i.forEach(I=>{s.push({pubkey:new F(I),isSigner:!1,isWritable:!1})});const o=[];s.forEach(I=>{const x=I.pubkey.toString(),M=o.findIndex(z=>z.pubkey.toString()===x);M>-1?(o[M].isWritable=o[M].isWritable||I.isWritable,o[M].isSigner=o[M].isSigner||I.isSigner):o.push(I)}),o.sort(function(I,x){if(I.isSigner!==x.isSigner)return I.isSigner?-1:1;if(I.isWritable!==x.isWritable)return I.isWritable?-1:1;const M={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return I.pubkey.toBase58().localeCompare(x.pubkey.toBase58(),"en",M)});const c=o.findIndex(I=>I.pubkey.equals(r));if(c>-1){const[I]=o.splice(c,1);I.isSigner=!0,I.isWritable=!0,o.unshift(I)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const I of this.signatures){const x=o.findIndex(M=>M.pubkey.equals(I.publicKey));if(x>-1)o[x].isSigner||(o[x].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${I.publicKey.toString()}`)}let f=0,g=0,m=0;const k=[],A=[];o.forEach(({pubkey:I,isSigner:x,isWritable:M})=>{x?(k.push(I.toString()),f+=1,M||(g+=1)):(A.push(I.toString()),M||(m+=1))});const v=k.concat(A),E=e.map(I=>{const{data:x,programId:M}=I;return{programIdIndex:v.indexOf(M.toString()),accounts:I.keys.map(z=>v.indexOf(z.pubkey.toString())),data:he.encode(x)}});return E.forEach(I=>{ct(I.programIdIndex>=0),I.accounts.forEach(x=>ct(x>=0))}),new We({header:{numRequiredSignatures:f,numReadonlySignedAccounts:g,numReadonlyUnsignedAccounts:m},accountKeys:v,recentBlockhash:t,instructions:E})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((i,s)=>e[s].equals(i.publicKey))||(this.signatures=e.map(r=>({signature:null,publicKey:r}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(r=>{const i=r.toString();return e.has(i)?!1:(e.add(i),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const s of t){const o=s.publicKey.toString();e.has(o)||(e.add(o),r.push(s))}this.signatures=r.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...r)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const s of t){const o=s.publicKey.toString();e.has(o)||(e.add(o),r.push(s))}const i=this._compile();this._partialSign(i,...r)}_partialSign(t,...e){const r=t.serialize();e.forEach(i=>{const s=oi(r,i.secretKey);this._addSignature(i.publicKey,nt(s))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){ct(e.length===64);const r=this.signatures.findIndex(i=>t.equals(i.publicKey));if(r<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[r].signature=G.Buffer.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){const r={};for(const{signature:i,publicKey:s}of this.signatures)i===null?e&&(r.missing||(r.missing=[])).push(s):pf(i,t,s.toBytes())||(r.invalid||(r.invalid=[])).push(s);return r.invalid||r.missing?r:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),i=this.serializeMessage();if(r){const s=this._getMessageSignednessErrors(i,e);if(s){let o="Signature verification failed.";throw s.invalid&&(o+=`
Invalid signature for public key${s.invalid.length===1?"":"(s)"} [\`${s.invalid.map(c=>c.toBase58()).join("`, `")}\`].`),s.missing&&(o+=`
Missing signature for public key${s.missing.length===1?"":"(s)"} [\`${s.missing.map(c=>c.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(i)}_serialize(t){const{signatures:e}=this,r=[];Re(r,e.length);const i=r.length+e.length*64+t.length,s=G.Buffer.alloc(i);return ct(e.length<256),G.Buffer.from(r).copy(s,0),e.forEach(({signature:o},c)=>{o!==null&&(ct(o.length===64,"signature has invalid length"),G.Buffer.from(o).copy(s,r.length+c*64))}),t.copy(s,r.length+e.length*64),ct(s.length<=yr,`Transaction too large: ${s.length} > ${yr}`),s}get keys(){return ct(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return ct(this.instructions.length===1),this.instructions[0].programId}get data(){return ct(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const r=_e(e);let i=[];for(let s=0;s<r;s++){const o=Ie(e,0,En);i.push(he.encode(G.Buffer.from(o)))}return ht.populate(We.from(e),i)}static populate(t,e=[]){const r=new ht;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),e.forEach((i,s)=>{const o={signature:i==he.encode(Sf)?null:he.decode(i),publicKey:t.accountKeys[s]};r.signatures.push(o)}),t.instructions.forEach(i=>{const s=i.accounts.map(o=>{const c=t.accountKeys[o];return{pubkey:c,isSigner:r.signatures.some(f=>f.publicKey.toString()===c.toString())||t.isAccountSigner(o),isWritable:t.isAccountWritable(o)}});r.instructions.push(new yt({keys:s,programId:t.accountKeys[i.programIdIndex],data:he.decode(i.data)}))}),r._message=t,r._json=r.toJSON(),r}}class qa{constructor(t){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=t.payerKey,this.instructions=t.instructions,this.recentBlockhash=t.recentBlockhash}static decompile(t,e){const{header:r,compiledInstructions:i,recentBlockhash:s}=t,{numRequiredSignatures:o,numReadonlySignedAccounts:c,numReadonlyUnsignedAccounts:f}=r,g=o-c;ct(g>0,"Message header is invalid");const m=t.staticAccountKeys.length-o-f;ct(m>=0,"Message header is invalid");const k=t.getAccountKeys(e),A=k.get(0);if(A===void 0)throw new Error("Failed to decompile message because no account keys were found");const v=[];for(const E of i){const I=[];for(const M of E.accountKeyIndexes){const z=k.get(M);if(z===void 0)throw new Error(`Failed to find key for account key index ${M}`);const N=M<o;let V;N?V=M<g:M<k.staticAccountKeys.length?V=M-o<m:V=M-k.staticAccountKeys.length<k.accountKeysFromLookups.writable.length,I.push({pubkey:z,isSigner:M<r.numRequiredSignatures,isWritable:V})}const x=k.get(E.programIdIndex);if(x===void 0)throw new Error(`Failed to find program id for program id index ${E.programIdIndex}`);v.push(new yt({programId:x,data:nt(E.data),keys:I}))}return new qa({payerKey:A,instructions:v,recentBlockhash:s})}compileToLegacyMessage(){return We.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(t){return Cr.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:t})}}class Ha{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,e!==void 0)ct(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{const r=[];for(let i=0;i<t.header.numRequiredSignatures;i++)r.push(new Uint8Array(En));this.signatures=r}this.message=t}serialize(){const t=this.message.serialize(),e=Array();Re(e,this.signatures.length);const r=J([bt(e.length,"encodedSignaturesLength"),pe(mf(),this.signatures.length,"signatures"),bt(t.length,"serializedMessage")]),i=new Uint8Array(2048),s=r.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},i);return i.slice(0,s)}static deserialize(t){let e=[...t];const r=[],i=_e(e);for(let o=0;o<i;o++)r.push(new Uint8Array(Ie(e,0,En)));const s=Wa.deserialize(new Uint8Array(e));return new Ha(s,r)}sign(t){const e=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const i of t){const s=r.findIndex(o=>o.equals(i.publicKey));ct(s>=0,`Cannot sign with non signer key ${i.publicKey.toBase58()}`),this.signatures[s]=oi(e,i.secretKey)}}addSignature(t,e){ct(e.byteLength===64,"Signature must be 64 bytes long");const i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(s=>s.equals(t));ct(i>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[i]=e}}const xf=160,_f=64,If=xf/_f,$a=1e3/If,Ze=new F("SysvarC1ock11111111111111111111111111111111"),kd=new F("SysvarEpochSchedu1e111111111111111111111111"),vd=new F("Sysvar1nstructions1111111111111111111111111"),xs=new F("SysvarRecentB1ockHashes11111111111111111111"),tn=new F("SysvarRent111111111111111111111111111111111"),Sd=new F("SysvarRewards111111111111111111111111111111"),xd=new F("SysvarS1otHashes111111111111111111111111111"),_d=new F("SysvarS1otHistory11111111111111111111111111"),_s=new F("SysvarStakeHistory1111111111111111111111111");class Bn extends Error{constructor({action:t,signature:e,transactionMessage:r,logs:i}){const s=i?`Logs: 
${JSON.stringify(i.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let c;switch(t){case"send":c=`Transaction ${e} resulted in an error. 
${r}. `+s+o;break;case"simulate":c=`Simulation failed. 
Message: ${r}. 
`+s+o;break;default:c=`Unknown action '${(f=>f)(t)}'`}super(c),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=e,this.transactionMessage=r,this.transactionLogs=i||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const t=this.transactionLogs;if(!(t!=null&&typeof t=="object"&&"then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((e,r)=>{t.getTransaction(this.signature).then(i=>{if(i&&i.meta&&i.meta.logMessages){const s=i.meta.logMessages;this.transactionLogs=s,e(s)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}const Id={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class tt extends Error{constructor({code:t,message:e,data:r},i){super(i!=null?`${i}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=r,this.name="SolanaJSONRPCError"}}async function eo(n,t,e,r){const i=r&&{skipPreflight:r.skipPreflight,preflightCommitment:r.preflightCommitment||r.commitment,maxRetries:r.maxRetries,minContextSlot:r.minContextSlot},s=await n.sendTransaction(t,e,i);let o;if(t.recentBlockhash!=null&&t.lastValidBlockHeight!=null)o=(await n.confirmTransaction({abortSignal:r==null?void 0:r.abortSignal,signature:s,blockhash:t.recentBlockhash,lastValidBlockHeight:t.lastValidBlockHeight},r&&r.commitment)).value;else if(t.minNonceContextSlot!=null&&t.nonceInfo!=null){const{nonceInstruction:c}=t.nonceInfo,f=c.keys[0].pubkey;o=(await n.confirmTransaction({abortSignal:r==null?void 0:r.abortSignal,minContextSlot:t.minNonceContextSlot,nonceAccountPubkey:f,nonceValue:t.nonceInfo.nonce,signature:s},r&&r.commitment)).value}else(r==null?void 0:r.abortSignal)!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),o=(await n.confirmTransaction(s,r&&r.commitment)).value;if(o.err)throw s!=null?new Bn({action:"send",signature:s,transactionMessage:`Status: (${JSON.stringify(o)})`}):new Error(`Transaction ${s} failed (${JSON.stringify(o)})`);return s}function hr(n){return new Promise(t=>setTimeout(t,n))}function it(n,t){const e=n.layout.span>=0?n.layout.span:Fa(n,t),r=G.Buffer.alloc(e),i=Object.assign({instruction:n.index},t);return n.layout.encode(i,r),r}function ft(n,t){let e;try{e=n.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.instruction!==n.index)throw new Error(`invalid instruction; instruction index mismatch ${e.instruction} != ${n.index}`);return e}const Ef=ue("lamportsPerSignature"),Va=J([Y("version"),Y("state"),st("authorizedPubkey"),st("nonce"),J([Ef],"feeCalculator")]),ro=Va.span;class ci{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=Va.decode(nt(t),0);return new ci({authorizedPubkey:new F(e.authorizedPubkey),nonce:new F(e.nonce).toString(),feeCalculator:e.feeCalculator})}}function Or(n){const t=bt(8,n),e=t.decode.bind(t),r=t.encode.bind(t),i=t,s=sl();return i.decode=(o,c)=>{const f=e(o,c);return s.decode(f)},i.encode=(o,c,f)=>{const g=s.encode(o);return r(g,c,f)},i}class Ed{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=Y("instruction").decode(t.data);let i;for(const[s,o]of Object.entries(mt))if(o.index==r){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a SystemInstruction");return i}static decodeCreateAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e,space:r,programId:i}=ft(mt.Create,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,lamports:e,space:r,programId:new F(i)}}static decodeTransfer(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e}=ft(mt.Transfer,t.data);return{fromPubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,lamports:e}}static decodeTransferWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e,seed:r,programId:i}=ft(mt.TransferWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,basePubkey:t.keys[1].pubkey,toPubkey:t.keys[2].pubkey,lamports:e,seed:r,programId:new F(i)}}static decodeAllocate(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{space:e}=ft(mt.Allocate,t.data);return{accountPubkey:t.keys[0].pubkey,space:e}}static decodeAllocateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:r,space:i,programId:s}=ft(mt.AllocateWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new F(e),seed:r,space:i,programId:new F(s)}}static decodeAssign(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{programId:e}=ft(mt.Assign,t.data);return{accountPubkey:t.keys[0].pubkey,programId:new F(e)}}static decodeAssignWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:r,programId:i}=ft(mt.AssignWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new F(e),seed:r,programId:new F(i)}}static decodeCreateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{base:e,seed:r,lamports:i,space:s,programId:o}=ft(mt.CreateWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,basePubkey:new F(e),seed:r,lamports:i,space:s,programId:new F(o)}}static decodeNonceInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{authorized:e}=ft(mt.InitializeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:new F(e)}}static decodeNonceAdvance(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),ft(mt.AdvanceNonceAccount,t.data),{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static decodeNonceWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=ft(mt.WithdrawNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e}}static decodeNonceAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e}=ft(mt.AuthorizeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[1].pubkey,newAuthorizedPubkey:new F(e)}}static checkProgramId(t){if(!t.equals(de.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const mt=Object.freeze({Create:{index:0,layout:J([Y("instruction"),Be("lamports"),Be("space"),st("programId")])},Assign:{index:1,layout:J([Y("instruction"),st("programId")])},Transfer:{index:2,layout:J([Y("instruction"),Or("lamports")])},CreateWithSeed:{index:3,layout:J([Y("instruction"),st("base"),gr("seed"),Be("lamports"),Be("space"),st("programId")])},AdvanceNonceAccount:{index:4,layout:J([Y("instruction")])},WithdrawNonceAccount:{index:5,layout:J([Y("instruction"),Be("lamports")])},InitializeNonceAccount:{index:6,layout:J([Y("instruction"),st("authorized")])},AuthorizeNonceAccount:{index:7,layout:J([Y("instruction"),st("authorized")])},Allocate:{index:8,layout:J([Y("instruction"),Be("space")])},AllocateWithSeed:{index:9,layout:J([Y("instruction"),st("base"),gr("seed"),Be("space"),st("programId")])},AssignWithSeed:{index:10,layout:J([Y("instruction"),st("base"),gr("seed"),st("programId")])},TransferWithSeed:{index:11,layout:J([Y("instruction"),Or("lamports"),gr("seed"),st("programId")])},UpgradeNonceAccount:{index:12,layout:J([Y("instruction")])}});class de{constructor(){}static createAccount(t){const e=mt.Create,r=it(e,{lamports:t.lamports,space:t.space,programId:nt(t.programId.toBuffer())});return new yt({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(t){let e,r;if("basePubkey"in t){const i=mt.TransferWithSeed;e=it(i,{lamports:BigInt(t.lamports),seed:t.seed,programId:nt(t.programId.toBuffer())}),r=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{const i=mt.Transfer;e=it(i,{lamports:BigInt(t.lamports)}),r=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new yt({keys:r,programId:this.programId,data:e})}static assign(t){let e,r;if("basePubkey"in t){const i=mt.AssignWithSeed;e=it(i,{base:nt(t.basePubkey.toBuffer()),seed:t.seed,programId:nt(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=mt.Assign;e=it(i,{programId:nt(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new yt({keys:r,programId:this.programId,data:e})}static createAccountWithSeed(t){const e=mt.CreateWithSeed,r=it(e,{base:nt(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:nt(t.programId.toBuffer())});let i=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey.equals(t.fromPubkey)||i.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new yt({keys:i,programId:this.programId,data:r})}static createNonceAccount(t){const e=new ht;"basePubkey"in t&&"seed"in t?e.add(de.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:ro,programId:this.programId})):e.add(de.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:ro,programId:this.programId}));const r={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(r)),e}static nonceInitialize(t){const e=mt.InitializeNonceAccount,r=it(e,{authorized:nt(t.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:xs,isSigner:!1,isWritable:!1},{pubkey:tn,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new yt(i)}static nonceAdvance(t){const e=mt.AdvanceNonceAccount,r=it(e),i={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:xs,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new yt(i)}static nonceWithdraw(t){const e=mt.WithdrawNonceAccount,r=it(e,{lamports:t.lamports});return new yt({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:xs,isSigner:!1,isWritable:!1},{pubkey:tn,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(t){const e=mt.AuthorizeNonceAccount,r=it(e,{authorized:nt(t.newAuthorizedPubkey.toBuffer())});return new yt({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(t){let e,r;if("basePubkey"in t){const i=mt.AllocateWithSeed;e=it(i,{base:nt(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:nt(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=mt.Allocate;e=it(i,{space:t.space}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new yt({keys:r,programId:this.programId,data:e})}}de.programId=new F("11111111111111111111111111111111");const Af=yr-300;class Nr{constructor(){}static getMinNumSignatures(t){return 2*(Math.ceil(t/Nr.chunkSize)+1+1)}static async load(t,e,r,i,s){{const k=await t.getMinimumBalanceForRentExemption(s.length),A=await t.getAccountInfo(r.publicKey,"confirmed");let v=null;if(A!==null){if(A.executable)return console.error("Program load failed, account is already executable"),!1;A.data.length!==s.length&&(v=v||new ht,v.add(de.allocate({accountPubkey:r.publicKey,space:s.length}))),A.owner.equals(i)||(v=v||new ht,v.add(de.assign({accountPubkey:r.publicKey,programId:i}))),A.lamports<k&&(v=v||new ht,v.add(de.transfer({fromPubkey:e.publicKey,toPubkey:r.publicKey,lamports:k-A.lamports})))}else v=new ht().add(de.createAccount({fromPubkey:e.publicKey,newAccountPubkey:r.publicKey,lamports:k>0?k:1,space:s.length,programId:i}));v!==null&&await eo(t,v,[e,r],{commitment:"confirmed"})}const o=J([Y("instruction"),Y("offset"),Y("bytesLength"),Y("bytesLengthPadding"),pe(ot("byte"),cr(Y(),-8),"bytes")]),c=Nr.chunkSize;let f=0,g=s,m=[];for(;g.length>0;){const k=g.slice(0,c),A=G.Buffer.alloc(c+16);o.encode({instruction:0,offset:f,bytes:k,bytesLength:0,bytesLengthPadding:0},A);const v=new ht().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:i,data:A});m.push(eo(t,v,[e,r],{commitment:"confirmed"})),t._rpcEndpoint.includes("solana.com")&&await hr(1e3/4),f+=c,g=g.slice(c)}await Promise.all(m);{const k=J([Y("instruction")]),A=G.Buffer.alloc(k.span);k.encode({instruction:1},A);const v=new ht().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:tn,isSigner:!1,isWritable:!1}],programId:i,data:A}),E="processed",I=await t.sendTransaction(v,[e,r],{preflightCommitment:E}),{context:x,value:M}=await t.confirmTransaction({signature:I,lastValidBlockHeight:v.lastValidBlockHeight,blockhash:v.recentBlockhash},E);if(M.err)throw new Error(`Transaction ${I} failed (${JSON.stringify(M)})`);for(;;){try{if(await t.getSlot({commitment:E})>x.slot)break}catch{}await new Promise(z=>setTimeout(z,Math.round($a/2)))}}return!0}}Nr.chunkSize=Af;const Ad=new F("BPFLoader2111111111111111111111111111111111");class Bd{static getMinNumSignatures(t){return Nr.getMinNumSignatures(t)}static load(t,e,r,i,s){return Nr.load(t,e,r,s,i)}}function Bf(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Is,no;function Rf(){if(no)return Is;no=1;var n=Object.prototype.toString,t=Object.keys||function(r){var i=[];for(var s in r)i.push(s);return i};function e(r,i){var s,o,c,f,g,m,k;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return e(r.toJSON(),i);if(k=n.call(r),k==="[object Array]"){for(c="[",o=r.length-1,s=0;s<o;s++)c+=e(r[s],!0)+",";return o>-1&&(c+=e(r[s],!0)),c+"]"}else if(k==="[object Object]"){for(f=t(r).sort(),o=f.length,c="",s=0;s<o;)g=f[s],m=e(r[g],!1),m!==void 0&&(c&&(c+=","),c+=JSON.stringify(g)+":"+m),s++;return"{"+c+"}"}else return JSON.stringify(r);case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return Is=function(r){var i=e(r,!1);if(i!==void 0)return""+i},Is}var Mf=Rf(),so=Bf(Mf);const Hr=32;function Es(n){let t=0;for(;n>1;)n/=2,t++;return t}function Pf(n){return n===0?1:(n--,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,n|=n>>32,n+1)}class Tf{constructor(t,e,r,i,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=r,this.firstNormalEpoch=i,this.firstNormalSlot=s}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=Es(Pf(t+Hr+1))-Es(Hr)-1,r=this.getSlotsInEpoch(e),i=t-(r-Hr);return[e,i]}else{const e=t-this.firstNormalSlot,r=Math.floor(e/this.slotsPerEpoch),i=this.firstNormalEpoch+r,s=e%this.slotsPerEpoch;return[i,s]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*Hr:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+Es(Hr)):this.slotsPerEpoch}}var Lf=globalThis.fetch;class Cf extends ql{constructor(t,e,r){const i=s=>{const o=Dl(s,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(i,t,e,r),this.underlyingSocket=void 0}call(...t){var r;const e=(r=this.underlyingSocket)==null?void 0:r.readyState;return e===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){var r;const e=(r=this.underlyingSocket)==null?void 0:r.readyState;return e===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}function Of(n,t){let e;try{e=n.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.typeIndex!==n.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${n.index}`);return e}const io=56;class oo{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=Of(Nf,t),r=t.length-io;ct(r>=0,"lookup table is invalid"),ct(r%32===0,"lookup table is invalid");const i=r/32,{addresses:s}=J([pe(st(),i,"addresses")]).decode(t.slice(io));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new F(e.authority[0]):void 0,addresses:s.map(o=>new F(o))}}}const Nf={index:1,layout:J([Y("typeIndex"),Or("deactivationSlot"),ue("lastExtendedSlot"),ot("lastExtendedStartIndex"),ot(),pe(st(),cr(ot(),-1),"authority")])},zf=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function Uf(n){const t=n.match(zf);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${n}\``);const[e,r,i,s]=t,o=n.startsWith("https:")?"wss:":"ws:",c=i==null?null:parseInt(i.slice(1),10),f=c==null?"":`:${c+1}`;return`${o}//${r}${f}${s}`}const kt=on(ri(F),K(),n=>new F(n)),ja=ni([K(),wt("base64")]),ui=on(ri(G.Buffer),ja,n=>G.Buffer.from(n[0],"base64")),Kf=30*1e3;function Ff(n){if(/^https?:/.test(n)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return n}function gt(n){let t,e;if(typeof n=="string")t=n;else if(n){const{commitment:r,...i}=n;t=r,e=i}return{commitment:t,config:e}}function ao(n){return n.map(t=>"memcmp"in t?{...t,memcmp:{...t.memcmp,encoding:t.memcmp.encoding??"base58"}}:t)}function Ga(n){return xe([O({jsonrpc:wt("2.0"),id:K(),result:n}),O({jsonrpc:wt("2.0"),id:K(),error:O({code:Dr(),message:K(),data:et(ll())})})])}const Df=Ga(Dr());function rt(n){return on(Ga(n),Df,t=>"error"in t?t:{...t,result:D(t.result,n)})}function xt(n){return rt(O({context:O({slot:B()}),value:n}))}function Wn(n){return O({context:O({slot:B()}),value:n})}function As(n,t){return n===0?new Cr({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new F(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:he.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new We(t)}const Wf=O({foundation:B(),foundationTerm:B(),initial:B(),taper:B(),terminal:B()}),qf=rt(W(q(O({epoch:B(),effectiveSlot:B(),amount:B(),postBalance:B(),commission:et(q(B()))})))),Hf=W(O({slot:B(),prioritizationFee:B()})),$f=O({total:B(),validator:B(),foundation:B(),epoch:B()}),Vf=O({epoch:B(),slotIndex:B(),slotsInEpoch:B(),absoluteSlot:B(),blockHeight:et(B()),transactionCount:et(B())}),jf=O({slotsPerEpoch:B(),leaderScheduleSlotOffset:B(),warmup:De(),firstNormalEpoch:B(),firstNormalSlot:B()}),Gf=Sa(K(),W(B())),kr=q(xe([O({}),K()])),Zf=O({err:kr}),Yf=wt("receivedSignature"),Jf=O({"solana-core":K(),"feature-set":et(B())}),Xf=O({program:K(),programId:kt,parsed:Dr()}),Qf=O({programId:kt,accounts:W(kt),data:K()}),co=xt(O({err:q(xe([O({}),K()])),logs:q(W(K())),accounts:et(q(W(q(O({executable:De(),owner:K(),lamports:B(),data:W(K()),rentEpoch:et(B())}))))),unitsConsumed:et(B()),returnData:et(q(O({programId:K(),data:ni([K(),wt("base64")])}))),innerInstructions:et(q(W(O({index:B(),instructions:W(xe([Xf,Qf]))}))))})),th=xt(O({byIdentity:Sa(K(),W(B())),range:O({firstSlot:B(),lastSlot:B()})}));function eh(n,t,e,r,i,s){const o=e||Lf;let c;s!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let f;return r&&(f=async(m,k)=>{const A=await new Promise((v,E)=>{try{r(m,k,(I,x)=>v([I,x]))}catch(I){E(I)}});return await o(...A)}),new Kl(async(m,k)=>{const A={method:"POST",body:m,agent:c,headers:Object.assign({"Content-Type":"application/json"},t||{},ed)};try{let v=5,E,I=500;for(;f?E=await f(n,A):E=await o(n,A),!(E.status!==429||i===!0||(v-=1,v===0));)console.error(`Server responded with ${E.status} ${E.statusText}.  Retrying after ${I}ms delay...`),await hr(I),I*=2;const x=await E.text();E.ok?k(null,x):k(new Error(`${E.status} ${E.statusText}: ${x}`))}catch(v){v instanceof Error&&k(v)}},{})}function rh(n){return(t,e)=>new Promise((r,i)=>{n.request(t,e,(s,o)=>{if(s){i(s);return}r(o)})})}function nh(n){return t=>new Promise((e,r)=>{t.length===0&&e([]);const i=t.map(s=>n.request(s.methodName,s.args));n.request(i,(s,o)=>{if(s){r(s);return}e(o)})})}const sh=rt(Wf),ih=rt($f),oh=rt(Hf),ah=rt(Vf),ch=rt(jf),uh=rt(Gf),lh=rt(B()),fh=xt(O({total:B(),circulating:B(),nonCirculating:B(),nonCirculatingAccounts:W(kt)})),Os=O({amount:K(),uiAmount:q(B()),decimals:B(),uiAmountString:et(K())}),hh=xt(W(O({address:kt,amount:K(),uiAmount:q(B()),decimals:B(),uiAmountString:et(K())}))),dh=xt(W(O({pubkey:kt,account:O({executable:De(),owner:kt,lamports:B(),data:ui,rentEpoch:B()})}))),Ns=O({program:K(),parsed:Dr(),space:B()}),ph=xt(W(O({pubkey:kt,account:O({executable:De(),owner:kt,lamports:B(),data:Ns,rentEpoch:B()})}))),gh=xt(W(O({lamports:B(),address:kt}))),en=O({executable:De(),owner:kt,lamports:B(),data:ui,rentEpoch:B()}),yh=O({pubkey:kt,account:en}),mh=on(xe([ri(G.Buffer),Ns]),xe([ja,Ns]),n=>Array.isArray(n)?D(n,ui):n),zs=O({executable:De(),owner:kt,lamports:B(),data:mh,rentEpoch:B()}),bh=O({pubkey:kt,account:zs}),wh=O({state:xe([wt("active"),wt("inactive"),wt("activating"),wt("deactivating")]),active:B(),inactive:B()}),kh=rt(W(O({signature:K(),slot:B(),err:kr,memo:q(K()),blockTime:et(q(B()))}))),vh=rt(W(O({signature:K(),slot:B(),err:kr,memo:q(K()),blockTime:et(q(B()))}))),Sh=O({subscription:B(),result:Wn(en)}),xh=O({pubkey:kt,account:en}),_h=O({subscription:B(),result:Wn(xh)}),Ih=O({parent:B(),slot:B(),root:B()}),Eh=O({subscription:B(),result:Ih}),Ah=xe([O({type:xe([wt("firstShredReceived"),wt("completed"),wt("optimisticConfirmation"),wt("root")]),slot:B(),timestamp:B()}),O({type:wt("createdBank"),parent:B(),slot:B(),timestamp:B()}),O({type:wt("frozen"),slot:B(),timestamp:B(),stats:O({numTransactionEntries:B(),numSuccessfulTransactions:B(),numFailedTransactions:B(),maxTransactionsPerEntry:B()})}),O({type:wt("dead"),slot:B(),timestamp:B(),err:K()})]),Bh=O({subscription:B(),result:Ah}),Rh=O({subscription:B(),result:Wn(xe([Zf,Yf]))}),Mh=O({subscription:B(),result:B()}),Ph=O({pubkey:K(),gossip:q(K()),tpu:q(K()),rpc:q(K()),version:q(K())}),uo=O({votePubkey:K(),nodePubkey:K(),activatedStake:B(),epochVoteAccount:De(),epochCredits:W(ni([B(),B(),B()])),commission:B(),lastVote:B(),rootSlot:q(B())}),Th=rt(O({current:W(uo),delinquent:W(uo)})),Lh=xe([wt("processed"),wt("confirmed"),wt("finalized")]),Ch=O({slot:B(),confirmations:q(B()),err:kr,confirmationStatus:et(Lh)}),Oh=xt(W(q(Ch))),Nh=rt(B()),Za=O({accountKey:kt,writableIndexes:W(B()),readonlyIndexes:W(B())}),li=O({signatures:W(K()),message:O({accountKeys:W(K()),header:O({numRequiredSignatures:B(),numReadonlySignedAccounts:B(),numReadonlyUnsignedAccounts:B()}),instructions:W(O({accounts:W(B()),data:K(),programIdIndex:B()})),recentBlockhash:K(),addressTableLookups:et(W(Za))})}),Ya=O({pubkey:kt,signer:De(),writable:De(),source:et(xe([wt("transaction"),wt("lookupTable")]))}),Ja=O({accountKeys:W(Ya),signatures:W(K())}),Xa=O({parsed:Dr(),program:K(),programId:kt}),Qa=O({accounts:W(kt),data:K(),programId:kt}),zh=xe([Qa,Xa]),Uh=xe([O({parsed:Dr(),program:K(),programId:K()}),O({accounts:W(K()),data:K(),programId:K()})]),tc=on(zh,Uh,n=>"accounts"in n?D(n,Qa):D(n,Xa)),ec=O({signatures:W(K()),message:O({accountKeys:W(Ya),instructions:W(tc),recentBlockhash:K(),addressTableLookups:et(q(W(Za)))})}),Rn=O({accountIndex:B(),mint:K(),owner:et(K()),programId:et(K()),uiTokenAmount:Os}),rc=O({writable:W(kt),readonly:W(kt)}),qn=O({err:kr,fee:B(),innerInstructions:et(q(W(O({index:B(),instructions:W(O({accounts:W(B()),data:K(),programIdIndex:B()}))})))),preBalances:W(B()),postBalances:W(B()),logMessages:et(q(W(K()))),preTokenBalances:et(q(W(Rn))),postTokenBalances:et(q(W(Rn))),loadedAddresses:et(rc),computeUnitsConsumed:et(B())}),fi=O({err:kr,fee:B(),innerInstructions:et(q(W(O({index:B(),instructions:W(tc)})))),preBalances:W(B()),postBalances:W(B()),logMessages:et(q(W(K()))),preTokenBalances:et(q(W(Rn))),postTokenBalances:et(q(W(Rn))),loadedAddresses:et(rc),computeUnitsConsumed:et(B())}),Wr=xe([wt(0),wt("legacy")]),vr=O({pubkey:K(),lamports:B(),postBalance:q(B()),rewardType:q(K()),commission:et(q(B()))}),Kh=rt(q(O({blockhash:K(),previousBlockhash:K(),parentSlot:B(),transactions:W(O({transaction:li,meta:q(qn),version:et(Wr)})),rewards:et(W(vr)),blockTime:q(B()),blockHeight:q(B())}))),Fh=rt(q(O({blockhash:K(),previousBlockhash:K(),parentSlot:B(),rewards:et(W(vr)),blockTime:q(B()),blockHeight:q(B())}))),Dh=rt(q(O({blockhash:K(),previousBlockhash:K(),parentSlot:B(),transactions:W(O({transaction:Ja,meta:q(qn),version:et(Wr)})),rewards:et(W(vr)),blockTime:q(B()),blockHeight:q(B())}))),Wh=rt(q(O({blockhash:K(),previousBlockhash:K(),parentSlot:B(),transactions:W(O({transaction:ec,meta:q(fi),version:et(Wr)})),rewards:et(W(vr)),blockTime:q(B()),blockHeight:q(B())}))),qh=rt(q(O({blockhash:K(),previousBlockhash:K(),parentSlot:B(),transactions:W(O({transaction:Ja,meta:q(fi),version:et(Wr)})),rewards:et(W(vr)),blockTime:q(B()),blockHeight:q(B())}))),Hh=rt(q(O({blockhash:K(),previousBlockhash:K(),parentSlot:B(),rewards:et(W(vr)),blockTime:q(B()),blockHeight:q(B())}))),$h=rt(q(O({blockhash:K(),previousBlockhash:K(),parentSlot:B(),transactions:W(O({transaction:li,meta:q(qn)})),rewards:et(W(vr)),blockTime:q(B())}))),lo=rt(q(O({blockhash:K(),previousBlockhash:K(),parentSlot:B(),signatures:W(K()),blockTime:q(B())}))),Bs=rt(q(O({slot:B(),meta:q(qn),blockTime:et(q(B())),transaction:li,version:et(Wr)}))),gn=rt(q(O({slot:B(),transaction:ec,meta:q(fi),blockTime:et(q(B())),version:et(Wr)}))),Vh=xt(O({blockhash:K(),lastValidBlockHeight:B()})),jh=xt(De()),Gh=O({slot:B(),numTransactions:B(),numSlots:B(),samplePeriodSecs:B()}),Zh=rt(W(Gh)),Yh=xt(q(O({feeCalculator:O({lamportsPerSignature:B()})}))),Jh=rt(K()),Xh=rt(K()),Qh=O({err:kr,logs:W(K()),signature:K()}),td=O({result:Wn(Qh),subscription:B()}),ed={"solana-client":"js/1.0.0-maintenance"};class Rd{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const g={};return async m=>{const{commitment:k,config:A}=gt(m),v=this._buildArgs([],k,void 0,A),E=so(v);return g[E]=g[E]??(async()=>{try{const I=await this._rpcRequest("getBlockHeight",v),x=D(I,rt(B()));if("error"in x)throw new tt(x.error,"failed to get block height information");return x.result}finally{delete g[E]}})(),await g[E]}})();let r,i,s,o,c,f;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,r=e.wsEndpoint,i=e.httpHeaders,s=e.fetch,o=e.fetchMiddleware,c=e.disableRetryOnRateLimit,f=e.httpAgent),this._rpcEndpoint=Ff(t),this._rpcWsEndpoint=r||Uf(t),this._rpcClient=eh(t,i,s,o,c,f),this._rpcRequest=rh(this._rpcClient),this._rpcBatchRequest=nh(this._rpcClient),this._rpcWebSocket=new Cf(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:r,config:i}=gt(e),s=this._buildArgs([t.toBase58()],r,void 0,i),o=await this._rpcRequest("getBalance",s),c=D(o,xt(B()));if("error"in c)throw new tt(c.error,`failed to get balance for ${t.toBase58()}`);return c.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+r)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),r=D(e,rt(q(B())));if("error"in r)throw new tt(r.error,`failed to get block time for slot ${t}`);return r.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=D(t,rt(B()));if("error"in e)throw new tt(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=D(t,lh);if("error"in e)throw new tt(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[e]),i=D(r,fh);if("error"in i)throw new tt(i.error,"failed to get supply");return i.result}async getTokenSupply(t,e){const r=this._buildArgs([t.toBase58()],e),i=await this._rpcRequest("getTokenSupply",r),s=D(i,xt(Os));if("error"in s)throw new tt(s.error,"failed to get token supply");return s.result}async getTokenAccountBalance(t,e){const r=this._buildArgs([t.toBase58()],e),i=await this._rpcRequest("getTokenAccountBalance",r),s=D(i,xt(Os));if("error"in s)throw new tt(s.error,"failed to get token account balance");return s.result}async getTokenAccountsByOwner(t,e,r){const{commitment:i,config:s}=gt(r);let o=[t.toBase58()];"mint"in e?o.push({mint:e.mint.toBase58()}):o.push({programId:e.programId.toBase58()});const c=this._buildArgs(o,i,"base64",s),f=await this._rpcRequest("getTokenAccountsByOwner",c),g=D(f,dh);if("error"in g)throw new tt(g.error,`failed to get token accounts owned by account ${t.toBase58()}`);return g.result}async getParsedTokenAccountsByOwner(t,e,r){let i=[t.toBase58()];"mint"in e?i.push({mint:e.mint.toBase58()}):i.push({programId:e.programId.toBase58()});const s=this._buildArgs(i,r,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",s),c=D(o,ph);if("error"in c)throw new tt(c.error,`failed to get token accounts owned by account ${t.toBase58()}`);return c.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},r=e.filter||e.commitment?[e]:[],i=await this._rpcRequest("getLargestAccounts",r),s=D(i,gh);if("error"in s)throw new tt(s.error,"failed to get largest accounts");return s.result}async getTokenLargestAccounts(t,e){const r=this._buildArgs([t.toBase58()],e),i=await this._rpcRequest("getTokenLargestAccounts",r),s=D(i,hh);if("error"in s)throw new tt(s.error,"failed to get token largest accounts");return s.result}async getAccountInfoAndContext(t,e){const{commitment:r,config:i}=gt(e),s=this._buildArgs([t.toBase58()],r,"base64",i),o=await this._rpcRequest("getAccountInfo",s),c=D(o,xt(q(en)));if("error"in c)throw new tt(c.error,`failed to get info about account ${t.toBase58()}`);return c.result}async getParsedAccountInfo(t,e){const{commitment:r,config:i}=gt(e),s=this._buildArgs([t.toBase58()],r,"jsonParsed",i),o=await this._rpcRequest("getAccountInfo",s),c=D(o,xt(q(zs)));if("error"in c)throw new tt(c.error,`failed to get info about account ${t.toBase58()}`);return c.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(r){throw new Error("failed to get info about account "+t.toBase58()+": "+r)}}async getMultipleParsedAccounts(t,e){const{commitment:r,config:i}=gt(e),s=t.map(g=>g.toBase58()),o=this._buildArgs([s],r,"jsonParsed",i),c=await this._rpcRequest("getMultipleAccounts",o),f=D(c,xt(W(q(zs))));if("error"in f)throw new tt(f.error,`failed to get info for accounts ${s}`);return f.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:r,config:i}=gt(e),s=t.map(g=>g.toBase58()),o=this._buildArgs([s],r,"base64",i),c=await this._rpcRequest("getMultipleAccounts",o),f=D(c,xt(W(q(en))));if("error"in f)throw new tt(f.error,`failed to get info for accounts ${s}`);return f.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,r){const{commitment:i,config:s}=gt(e),o=this._buildArgs([t.toBase58()],i,void 0,{...s,epoch:r??(s==null?void 0:s.epoch)}),c=await this._rpcRequest("getStakeActivation",o),f=D(c,rt(wh));if("error"in f)throw new tt(f.error,`failed to get Stake Activation ${t.toBase58()}`);return f.result}async getProgramAccounts(t,e){const{commitment:r,config:i}=gt(e),{encoding:s,...o}=i||{},c=this._buildArgs([t.toBase58()],r,s||"base64",{...o,...o.filters?{filters:ao(o.filters)}:null}),f=await this._rpcRequest("getProgramAccounts",c),g=W(yh),m=o.withContext===!0?D(f,xt(g)):D(f,rt(g));if("error"in m)throw new tt(m.error,`failed to get accounts owned by program ${t.toBase58()}`);return m.result}async getParsedProgramAccounts(t,e){const{commitment:r,config:i}=gt(e),s=this._buildArgs([t.toBase58()],r,"jsonParsed",i),o=await this._rpcRequest("getProgramAccounts",s),c=D(o,rt(W(bh)));if("error"in c)throw new tt(c.error,`failed to get accounts owned by program ${t.toBase58()}`);return c.result}async confirmTransaction(t,e){var s;let r;if(typeof t=="string")r=t;else{const o=t;if((s=o.abortSignal)!=null&&s.aborted)return Promise.reject(o.abortSignal.reason);r=o.signature}let i;try{i=he.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return ct(i.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:r}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,r)=>{t!=null&&(t.aborted?r(t.reason):t.addEventListener("abort",()=>{r(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let r,i,s=!1;const o=new Promise((f,g)=>{try{r=this.onSignature(e,(k,A)=>{r=void 0;const v={context:A,value:k};f({__type:sr.PROCESSED,response:v})},t);const m=new Promise(k=>{r==null?k():i=this._onSubscriptionStateChange(r,A=>{A==="subscribed"&&k()})});(async()=>{if(await m,s)return;const k=await this.getSignatureStatus(e);if(s||k==null)return;const{context:A,value:v}=k;if(v!=null)if(v!=null&&v.err)g(v.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(v.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(v.confirmationStatus==="processed"||v.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}s=!0,f({__type:sr.PROCESSED,response:{context:A,value:v}})}})()}catch(m){g(m)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:r,signature:i}}){let s=!1;const o=new Promise(k=>{const A=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let v=await A();if(!s){for(;v<=r;)if(await hr(1e3),s||(v=await A(),s))return;k({__type:sr.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:c,confirmationPromise:f}=this.getTransactionConfirmationPromise({commitment:t,signature:i}),g=this.getCancellationPromise(e);let m;try{const k=await Promise.race([g,f,o]);if(k.__type===sr.PROCESSED)m=k.response;else throw new Ua(i)}finally{s=!0,c()}return m}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:r,nonceAccountPubkey:i,nonceValue:s,signature:o}}){let c=!1;const f=new Promise(v=>{let E=s,I=null;const x=async()=>{try{const{context:M,value:z}=await this.getNonceAndContext(i,{commitment:t,minContextSlot:r});return I=M.slot,z==null?void 0:z.nonce}catch{return E}};(async()=>{if(E=await x(),!c)for(;;){if(s!==E){v({__type:sr.NONCE_INVALID,slotInWhichNonceDidAdvance:I});return}if(await hr(2e3),c||(E=await x(),c))return}})()}),{abortConfirmation:g,confirmationPromise:m}=this.getTransactionConfirmationPromise({commitment:t,signature:o}),k=this.getCancellationPromise(e);let A;try{const v=await Promise.race([k,m,f]);if(v.__type===sr.PROCESSED)A=v.response;else{let E;for(;;){const I=await this.getSignatureStatus(o);if(I==null)break;if(I.context.slot<(v.slotInWhichNonceDidAdvance??r)){await hr(400);continue}E=I;break}if(E!=null&&E.value){const I=t||"finalized",{confirmationStatus:x}=E.value;switch(I){case"processed":case"recent":if(x!=="processed"&&x!=="confirmed"&&x!=="finalized")throw new $r(o);break;case"confirmed":case"single":case"singleGossip":if(x!=="confirmed"&&x!=="finalized")throw new $r(o);break;case"finalized":case"max":case"root":if(x!=="finalized")throw new $r(o);break;default:}A={context:E.context,value:{err:E.value.err}}}else throw new $r(o)}}finally{c=!0,g()}return A}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let r;const i=new Promise(f=>{let g=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{g=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>f({__type:sr.TIMED_OUT,timeoutMs:g}),g)}),{abortConfirmation:s,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let c;try{const f=await Promise.race([o,i]);if(f.__type===sr.PROCESSED)c=f.response;else throw new Ka(e,f.timeoutMs/1e3)}finally{clearTimeout(r),s()}return c}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=D(t,rt(W(Ph)));if("error"in e)throw new tt(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getVoteAccounts",e),i=D(r,Th);if("error"in i)throw new tt(i.error,"failed to get vote accounts");return i.result}async getSlot(t){const{commitment:e,config:r}=gt(t),i=this._buildArgs([],e,void 0,r),s=await this._rpcRequest("getSlot",i),o=D(s,rt(B()));if("error"in o)throw new tt(o.error,"failed to get slot");return o.result}async getSlotLeader(t){const{commitment:e,config:r}=gt(t),i=this._buildArgs([],e,void 0,r),s=await this._rpcRequest("getSlotLeader",i),o=D(s,rt(K()));if("error"in o)throw new tt(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(t,e){const r=[t,e],i=await this._rpcRequest("getSlotLeaders",r),s=D(i,rt(W(kt)));if("error"in s)throw new tt(s.error,"failed to get slot leaders");return s.result}async getSignatureStatus(t,e){const{context:r,value:i}=await this.getSignatureStatuses([t],e);ct(i.length===1);const s=i[0];return{context:r,value:s}}async getSignatureStatuses(t,e){const r=[t];e&&r.push(e);const i=await this._rpcRequest("getSignatureStatuses",r),s=D(i,Oh);if("error"in s)throw new tt(s.error,"failed to get signature status");return s.result}async getTransactionCount(t){const{commitment:e,config:r}=gt(t),i=this._buildArgs([],e,void 0,r),s=await this._rpcRequest("getTransactionCount",i),o=D(s,rt(B()));if("error"in o)throw new tt(o.error,"failed to get transaction count");return o.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getInflationGovernor",e),i=D(r,sh);if("error"in i)throw new tt(i.error,"failed to get inflation");return i.result}async getInflationReward(t,e,r){const{commitment:i,config:s}=gt(r),o=this._buildArgs([t.map(g=>g.toBase58())],i,void 0,{...s,epoch:e??(s==null?void 0:s.epoch)}),c=await this._rpcRequest("getInflationReward",o),f=D(c,qf);if("error"in f)throw new tt(f.error,"failed to get inflation reward");return f.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=D(t,ih);if("error"in e)throw new tt(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:r}=gt(t),i=this._buildArgs([],e,void 0,r),s=await this._rpcRequest("getEpochInfo",i),o=D(s,ah);if("error"in o)throw new tt(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=D(t,ch);if("error"in e)throw new tt(e.error,"failed to get epoch schedule");const r=e.result;return new Tf(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=D(t,uh);if("error"in e)throw new tt(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const r=this._buildArgs([t],e),i=await this._rpcRequest("getMinimumBalanceForRentExemption",r),s=D(i,Nh);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result}async getRecentBlockhashAndContext(t){const{context:e,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(t);return{context:e,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),r=D(e,Zh);if("error"in r)throw new tt(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(t,e){const r=this._buildArgs([t],e),i=await this._rpcRequest("getFeeCalculatorForBlockhash",r),s=D(i,Yh);if("error"in s)throw new tt(s.error,"failed to get fee calculator");const{context:o,value:c}=s.result;return{context:o,value:c!==null?c.feeCalculator:null}}async getFeeForMessage(t,e){const r=nt(t.serialize()).toString("base64"),i=this._buildArgs([r],e),s=await this._rpcRequest("getFeeForMessage",i),o=D(s,xt(q(B())));if("error"in o)throw new tt(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(t){var o;const e=(o=t==null?void 0:t.lockedWritableAccounts)==null?void 0:o.map(c=>c.toBase58()),r=e!=null&&e.length?[e]:[],i=await this._rpcRequest("getRecentPrioritizationFees",r),s=D(i,oh);if("error"in s)throw new tt(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:r}=gt(t),i=this._buildArgs([],e,void 0,r),s=await this._rpcRequest("getLatestBlockhash",i),o=D(s,Vh);if("error"in o)throw new tt(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(t,e){const{commitment:r,config:i}=gt(e),s=this._buildArgs([t],r,void 0,i),o=await this._rpcRequest("isBlockhashValid",s),c=D(o,jh);if("error"in c)throw new tt(c.error,"failed to determine if the blockhash `"+t+"`is valid");return c.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=D(t,rt(Jf));if("error"in e)throw new tt(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=D(t,rt(K()));if("error"in e)throw new tt(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:r,config:i}=gt(e),s=this._buildArgsAtLeastConfirmed([t],r,void 0,i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const c=D(o,Dh);if("error"in c)throw c.error;return c.result}case"none":{const c=D(o,Fh);if("error"in c)throw c.error;return c.result}default:{const c=D(o,Kh);if("error"in c)throw c.error;const{result:f}=c;return f?{...f,transactions:f.transactions.map(({transaction:g,meta:m,version:k})=>({meta:m,transaction:{...g,message:As(k,g.message)},version:k}))}:null}}}catch(c){throw new tt(c,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:r,config:i}=gt(e),s=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const c=D(o,qh);if("error"in c)throw c.error;return c.result}case"none":{const c=D(o,Hh);if("error"in c)throw c.error;return c.result}default:{const c=D(o,Wh);if("error"in c)throw c.error;return c.result}}}catch(c){throw new tt(c,"failed to get block")}}async getBlockProduction(t){let e,r;if(typeof t=="string")r=t;else if(t){const{commitment:c,...f}=t;r=c,e=f}const i=this._buildArgs([],r,"base64",e),s=await this._rpcRequest("getBlockProduction",i),o=D(s,th);if("error"in o)throw new tt(o.error,"failed to get block production information");return o.result}async getTransaction(t,e){const{commitment:r,config:i}=gt(e),s=this._buildArgsAtLeastConfirmed([t],r,void 0,i),o=await this._rpcRequest("getTransaction",s),c=D(o,Bs);if("error"in c)throw new tt(c.error,"failed to get transaction");const f=c.result;return f&&{...f,transaction:{...f.transaction,message:As(f.version,f.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:r,config:i}=gt(e),s=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",i),o=await this._rpcRequest("getTransaction",s),c=D(o,gn);if("error"in c)throw new tt(c.error,"failed to get transaction");return c.result}async getParsedTransactions(t,e){const{commitment:r,config:i}=gt(e),s=t.map(f=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([f],r,"jsonParsed",i)}));return(await this._rpcBatchRequest(s)).map(f=>{const g=D(f,gn);if("error"in g)throw new tt(g.error,"failed to get transactions");return g.result})}async getTransactions(t,e){const{commitment:r,config:i}=gt(e),s=t.map(f=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([f],r,void 0,i)}));return(await this._rpcBatchRequest(s)).map(f=>{const g=D(f,Bs);if("error"in g)throw new tt(g.error,"failed to get transactions");const m=g.result;return m&&{...m,transaction:{...m.transaction,message:As(m.version,m.transaction.message)}}})}async getConfirmedBlock(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),i=await this._rpcRequest("getBlock",r),s=D(i,$h);if("error"in s)throw new tt(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+t+" not found");const c={...o,transactions:o.transactions.map(({transaction:f,meta:g})=>{const m=new We(f.message);return{meta:g,transaction:{...f,message:m}}})};return{...c,transactions:c.transactions.map(({transaction:f,meta:g})=>({meta:g,transaction:ht.populate(f.message,f.signatures)}))}}async getBlocks(t,e,r){const i=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],r),s=await this._rpcRequest("getBlocks",i),o=D(s,rt(W(B())));if("error"in o)throw new tt(o.error,"failed to get blocks");return o.result}async getBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",r),s=D(i,lo);if("error"in s)throw new tt(s.error,"failed to get block");const o=s.result;if(!o)throw new Error("Block "+t+" not found");return o}async getConfirmedBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",r),s=D(i,lo);if("error"in s)throw new tt(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+t+" not found");return o}async getConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),i=await this._rpcRequest("getTransaction",r),s=D(i,Bs);if("error"in s)throw new tt(s.error,"failed to get transaction");const o=s.result;if(!o)return o;const c=new We(o.transaction.message),f=o.transaction.signatures;return{...o,transaction:ht.populate(c,f)}}async getParsedConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),i=await this._rpcRequest("getTransaction",r),s=D(i,gn);if("error"in s)throw new tt(s.error,"failed to get confirmed transaction");return s.result}async getParsedConfirmedTransactions(t,e){const r=t.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],e,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(o=>{const c=D(o,gn);if("error"in c)throw new tt(c.error,"failed to get confirmed transactions");return c.result})}async getConfirmedSignaturesForAddress(t,e,r){let i={},s=await this.getFirstAvailableBlock();for(;!("until"in i)&&(e--,!(e<=0||e<s));)try{const f=await this.getConfirmedBlockSignatures(e,"finalized");f.signatures.length>0&&(i.until=f.signatures[f.signatures.length-1].toString())}catch(f){if(f instanceof Error&&f.message.includes("skipped"))continue;throw f}let o=await this.getSlot("finalized");for(;!("before"in i)&&(r++,!(r>o));)try{const f=await this.getConfirmedBlockSignatures(r);f.signatures.length>0&&(i.before=f.signatures[f.signatures.length-1].toString())}catch(f){if(f instanceof Error&&f.message.includes("skipped"))continue;throw f}return(await this.getConfirmedSignaturesForAddress2(t,i)).map(f=>f.signature)}async getConfirmedSignaturesForAddress2(t,e,r){const i=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),s=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),o=D(s,kh);if("error"in o)throw new tt(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(t,e,r){const i=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),s=await this._rpcRequest("getSignaturesForAddress",i),o=D(s,vh);if("error"in o)throw new tt(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(t,e){const{context:r,value:i}=await this.getAccountInfoAndContext(t,e);let s=null;return i!==null&&(s=new oo({key:t,state:oo.deserialize(i.data)})),{context:r,value:s}}async getNonceAndContext(t,e){const{context:r,value:i}=await this.getAccountInfoAndContext(t,e);let s=null;return i!==null&&(s=ci.fromAccountData(i.data)),{context:r,value:s}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+r)})}async requestAirdrop(t,e){const r=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),i=D(r,Jh);if("error"in i)throw new tt(i.error,`airdrop to ${t.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await hr(100);const r=Date.now()-this._blockhashInfo.lastFetch>=Kf;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,r=e?e.blockhash:null;for(let i=0;i<50;i++){const s=await this.getLatestBlockhash("finalized");if(r!==s.blockhash)return this._blockhashInfo={latestBlockhash:s,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},s;await hr($a/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:r}=gt(t),i=this._buildArgs([],e,"base64",r),s=await this._rpcRequest("getStakeMinimumDelegation",i),o=D(s,xt(B()));if("error"in o)throw new tt(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(t,e,r){if("message"in t){const I=t.serialize(),x=G.Buffer.from(I).toString("base64");if(Array.isArray(e)||r!==void 0)throw new Error("Invalid arguments");const M=e||{};M.encoding="base64","commitment"in M||(M.commitment=this.commitment),e&&typeof e=="object"&&"innerInstructions"in e&&(M.innerInstructions=e.innerInstructions);const z=[x,M],N=await this._rpcRequest("simulateTransaction",z),V=D(N,co);if("error"in V)throw new Error("failed to simulate transaction: "+V.error.message);return V.result}let i;if(t instanceof ht){let E=t;i=new ht,i.feePayer=E.feePayer,i.instructions=t.instructions,i.nonceInfo=E.nonceInfo,i.signatures=E.signatures}else i=ht.populate(t),i._message=i._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const s=e;if(i.nonceInfo&&s)i.sign(...s);else{let E=this._disableBlockhashCaching;for(;;){const I=await this._blockhashWithExpiryBlockHeight(E);if(i.lastValidBlockHeight=I.lastValidBlockHeight,i.recentBlockhash=I.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const x=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(x)&&!this._blockhashInfo.transactionSignatures.includes(x)){this._blockhashInfo.simulatedSignatures.push(x);break}else E=!0}}const o=i._compile(),c=o.serialize(),g=i._serialize(c).toString("base64"),m={encoding:"base64",commitment:this.commitment};if(r){const E=(Array.isArray(r)?r:o.nonProgramIds()).map(I=>I.toBase58());m.accounts={encoding:"base64",addresses:E}}s&&(m.sigVerify=!0),e&&typeof e=="object"&&"innerInstructions"in e&&(m.innerInstructions=e.innerInstructions);const k=[g,m],A=await this._rpcRequest("simulateTransaction",k),v=D(A,co);if("error"in v){let E;if("data"in v.error&&(E=v.error.data.logs,E&&Array.isArray(E))){const I=`
    `,x=I+E.join(I);console.error(v.error.message,x)}throw new Bn({action:"simulate",signature:"",transactionMessage:v.error.message,logs:E})}return v.result}async sendTransaction(t,e,r){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const o=t.serialize();return await this.sendRawTransaction(o,e)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(t.nonceInfo)t.sign(...i);else{let o=this._disableBlockhashCaching;for(;;){const c=await this._blockhashWithExpiryBlockHeight(o);if(t.lastValidBlockHeight=c.lastValidBlockHeight,t.recentBlockhash=c.blockhash,t.sign(...i),!t.signature)throw new Error("!signature");const f=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(f))o=!0;else{this._blockhashInfo.transactionSignatures.push(f);break}}}const s=t.serialize();return await this.sendRawTransaction(s,r)}async sendRawTransaction(t,e){const r=nt(t).toString("base64");return await this.sendEncodedTransaction(r,e)}async sendEncodedTransaction(t,e){const r={encoding:"base64"},i=e&&e.skipPreflight,s=i===!0?"processed":e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(r.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(r.minContextSlot=e.minContextSlot),i&&(r.skipPreflight=i),s&&(r.preflightCommitment=s);const o=[t,r],c=await this._rpcRequest("sendTransaction",o),f=D(c,Xh);if("error"in f){let g;throw"data"in f.error&&(g=f.error.data.logs),new Bn({action:i?"send":"simulate",signature:"",transactionMessage:f.error.message,logs:g})}return f.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,r])=>{this._setSubscription(e,{...r,state:"pending"})})}_setSubscription(t,e){var i;const r=(i=this._subscriptionsByHash[t])==null?void 0:i.state;if(this._subscriptionsByHash[t]=e,r!==e.state){const s=this._subscriptionStateChangeCallbacksByHash[t];s&&s.forEach(o=>{try{o(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){var s;const r=this._subscriptionHashByClientSubscriptionId[t];if(r==null)return()=>{};const i=(s=this._subscriptionStateChangeCallbacksByHash)[r]||(s[r]=new Set);return i.add(e),()=>{i.delete(e),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const i=this._subscriptionsByHash[r];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[r],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:s,method:o}=i;try{this._setSubscription(r,{...i,state:"subscribing"});const c=await this._rpcWebSocket.call(o,s);this._setSubscription(r,{...i,serverSubscriptionId:c,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[c]=i.callbacks,await this._updateSubscriptions()}catch(c){if(console.error(`Received ${c instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:s,error:c}),!e())return;this._setSubscription(r,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:s,unsubscribeMethod:o}=i;if(this._subscriptionsAutoDisposedByRpc.has(s))this._subscriptionsAutoDisposedByRpc.delete(s);else{this._setSubscription(r,{...i,state:"unsubscribing"}),this._setSubscription(r,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[s])}catch(c){if(c instanceof Error&&console.error(`${o} error:`,c.message),!e())return;this._setSubscription(r,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const r=this._subscriptionCallbacksByServerSubscriptionId[t];r!==void 0&&r.forEach(i=>{try{i(...e)}catch(s){console.error(s)}})}_wsOnAccountNotification(t){const{result:e,subscription:r}=D(t,Sh);this._handleServerNotification(r,[e.value,e.context])}_makeSubscription(t,e){const r=this._nextClientSubscriptionId++,i=so([t.method,e]),s=this._subscriptionsByHash[i];return s===void 0?this._subscriptionsByHash[i]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:s.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[r]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const o=this._subscriptionsByHash[i];ct(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),o.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(t,e,r){const{commitment:i,config:s}=gt(r),o=this._buildArgs([t.toBase58()],i||this._commitment||"finalized","base64",s);return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:r}=D(t,_h);this._handleServerNotification(r,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,r,i){const{commitment:s,config:o}=gt(r),c=this._buildArgs([t.toBase58()],s||this._commitment||"finalized","base64",o||(i?{filters:ao(i)}:void 0));return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},c)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,r){const i=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],r||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:r}=D(t,td);this._handleServerNotification(r,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:r}=D(t,Eh);this._handleServerNotification(r,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:r}=D(t,Bh);this._handleServerNotification(r,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,r,i){const s=e||this._commitment;if(s||r||i){let o={};r&&(o.encoding=r),s&&(o.commitment=s),i&&(o=Object.assign(o,i)),t.push(o)}return t}_buildArgsAtLeastConfirmed(t,e,r,i){const s=e||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,r,i)}_wsOnSignatureNotification(t){const{result:e,subscription:r}=D(t,Rh);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,r){const i=this._buildArgs([t],r||this._commitment||"finalized"),s=this._makeSubscription({callback:(o,c)=>{if(o.type==="status"){e(o.result,c);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return s}onSignatureWithOptions(t,e,r){const{commitment:i,...s}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([t],i,void 0,s),c=this._makeSubscription({callback:(f,g)=>{e(f,g);try{this.removeSignatureListener(c)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return c}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:r}=D(t,Mh);this._handleServerNotification(r,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}class Zr{constructor(t){this._keypair=void 0,this._keypair=t??Xi()}static generate(){return new Zr(Xi())}static fromSecretKey(t,e){if(t.byteLength!==64)throw new Error("bad secret key size");const r=t.slice(32,64);if(!e||!e.skipValidation){const i=t.slice(0,32),s=In(i);for(let o=0;o<32;o++)if(r[o]!==s[o])throw new Error("provided secretKey is invalid")}return new Zr({publicKey:r,secretKey:t})}static fromSeed(t){const e=In(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),new Zr({publicKey:e,secretKey:r})}get publicKey(){return new F(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const ir=Object.freeze({CreateLookupTable:{index:0,layout:J([Y("instruction"),Or("recentSlot"),ot("bumpSeed")])},FreezeLookupTable:{index:1,layout:J([Y("instruction")])},ExtendLookupTable:{index:2,layout:J([Y("instruction"),Or(),pe(st(),cr(Y(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:J([Y("instruction")])},CloseLookupTable:{index:4,layout:J([Y("instruction")])}});class Md{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=Y("instruction").decode(t.data);let i;for(const[s,o]of Object.entries(ir))if(o.index==r){i=s;break}if(!i)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return i}static decodeCreateLookupTable(t){this.checkProgramId(t.programId),this.checkKeysLength(t.keys,4);const{recentSlot:e}=ft(ir.CreateLookupTable,t.data);return{authority:t.keys[1].pubkey,payer:t.keys[2].pubkey,recentSlot:Number(e)}}static decodeExtendLookupTable(t){if(this.checkProgramId(t.programId),t.keys.length<2)throw new Error(`invalid instruction; found ${t.keys.length} keys, expected at least 2`);const{addresses:e}=ft(ir.ExtendLookupTable,t.data);return{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,payer:t.keys.length>2?t.keys[2].pubkey:void 0,addresses:e.map(r=>new F(r))}}static decodeCloseLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,3),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,recipient:t.keys[2].pubkey}}static decodeFreezeLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static decodeDeactivateLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(nc.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}class nc{constructor(){}static createLookupTable(t){const[e,r]=F.findProgramAddressSync([t.authority.toBuffer(),wa().encode(t.recentSlot)],this.programId),i=ir.CreateLookupTable,s=it(i,{recentSlot:BigInt(t.recentSlot),bumpSeed:r}),o=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:de.programId,isSigner:!1,isWritable:!1}];return[new yt({programId:this.programId,keys:o,data:s}),e]}static freezeLookupTable(t){const e=ir.FreezeLookupTable,r=it(e),i=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new yt({programId:this.programId,keys:i,data:r})}static extendLookupTable(t){const e=ir.ExtendLookupTable,r=it(e,{addresses:t.addresses.map(s=>s.toBytes())}),i=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return t.payer&&i.push({pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:de.programId,isSigner:!1,isWritable:!1}),new yt({programId:this.programId,keys:i,data:r})}static deactivateLookupTable(t){const e=ir.DeactivateLookupTable,r=it(e),i=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new yt({programId:this.programId,keys:i,data:r})}static closeLookupTable(t){const e=ir.CloseLookupTable,r=it(e),i=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.recipient,isSigner:!1,isWritable:!0}];return new yt({programId:this.programId,keys:i,data:r})}}nc.programId=new F("AddressLookupTab1e1111111111111111111111111");class Pd{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=ot("instruction").decode(t.data);let i;for(const[s,o]of Object.entries(Je))if(o.index==r){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return i}static decodeRequestUnits(t){this.checkProgramId(t.programId);const{units:e,additionalFee:r}=ft(Je.RequestUnits,t.data);return{units:e,additionalFee:r}}static decodeRequestHeapFrame(t){this.checkProgramId(t.programId);const{bytes:e}=ft(Je.RequestHeapFrame,t.data);return{bytes:e}}static decodeSetComputeUnitLimit(t){this.checkProgramId(t.programId);const{units:e}=ft(Je.SetComputeUnitLimit,t.data);return{units:e}}static decodeSetComputeUnitPrice(t){this.checkProgramId(t.programId);const{microLamports:e}=ft(Je.SetComputeUnitPrice,t.data);return{microLamports:e}}static checkProgramId(t){if(!t.equals(sc.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const Je=Object.freeze({RequestUnits:{index:0,layout:J([ot("instruction"),Y("units"),Y("additionalFee")])},RequestHeapFrame:{index:1,layout:J([ot("instruction"),Y("bytes")])},SetComputeUnitLimit:{index:2,layout:J([ot("instruction"),Y("units")])},SetComputeUnitPrice:{index:3,layout:J([ot("instruction"),Or("microLamports")])}});class sc{constructor(){}static requestUnits(t){const e=Je.RequestUnits,r=it(e,t);return new yt({keys:[],programId:this.programId,data:r})}static requestHeapFrame(t){const e=Je.RequestHeapFrame,r=it(e,t);return new yt({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(t){const e=Je.SetComputeUnitLimit,r=it(e,t);return new yt({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(t){const e=Je.SetComputeUnitPrice,r=it(e,{microLamports:BigInt(t.microLamports)});return new yt({keys:[],programId:this.programId,data:r})}}sc.programId=new F("ComputeBudget111111111111111111111111111111");const fo=64,ho=32,po=64,go=J([ot("numSignatures"),ot("padding"),Pe("signatureOffset"),Pe("signatureInstructionIndex"),Pe("publicKeyOffset"),Pe("publicKeyInstructionIndex"),Pe("messageDataOffset"),Pe("messageDataSize"),Pe("messageInstructionIndex")]);class hi{constructor(){}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:i,instructionIndex:s}=t;ct(e.length===ho,`Public Key must be ${ho} bytes but received ${e.length} bytes`),ct(i.length===po,`Signature must be ${po} bytes but received ${i.length} bytes`);const o=go.span,c=o+e.length,f=c+i.length,g=1,m=G.Buffer.alloc(f+r.length),k=s??65535;return go.encode({numSignatures:g,padding:0,signatureOffset:c,signatureInstructionIndex:k,publicKeyOffset:o,publicKeyInstructionIndex:k,messageDataOffset:f,messageDataSize:r.length,messageInstructionIndex:k},m),m.fill(e,o),m.fill(i,c),m.fill(r,f),new yt({keys:[],programId:hi.programId,data:m})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:i}=t;ct(e.length===fo,`Private key must be ${fo} bytes but received ${e.length} bytes`);try{const s=Zr.fromSecretKey(e),o=s.publicKey.toBytes(),c=oi(r,s.secretKey);return this.createInstructionWithPublicKey({publicKey:o,message:r,signature:c,instructionIndex:i})}catch(s){throw new Error(`Error creating instruction; ${s}`)}}}hi.programId=new F("Ed25519SigVerify111111111111111111111111111");const rd=(n,t)=>{const e=ii.sign(n,t);return[e.toCompactRawBytes(),e.recovery]};ii.utils.isValidPrivateKey;const nd=ii.getPublicKey,yo=32,Rs=20,mo=64,sd=11,Ms=J([ot("numSignatures"),Pe("signatureOffset"),ot("signatureInstructionIndex"),Pe("ethAddressOffset"),ot("ethAddressInstructionIndex"),Pe("messageDataOffset"),Pe("messageDataSize"),ot("messageInstructionIndex"),bt(20,"ethAddress"),bt(64,"signature"),ot("recoveryId")]);class Yr{constructor(){}static publicKeyToEthAddress(t){ct(t.length===mo,`Public key must be ${mo} bytes but received ${t.length} bytes`);try{return G.Buffer.from(Zi(nt(t))).slice(-Rs)}catch(e){throw new Error(`Error constructing Ethereum address: ${e}`)}}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:i,recoveryId:s,instructionIndex:o}=t;return Yr.createInstructionWithEthAddress({ethAddress:Yr.publicKeyToEthAddress(e),message:r,signature:i,recoveryId:s,instructionIndex:o})}static createInstructionWithEthAddress(t){const{ethAddress:e,message:r,signature:i,recoveryId:s,instructionIndex:o=0}=t;let c;typeof e=="string"?e.startsWith("0x")?c=G.Buffer.from(e.substr(2),"hex"):c=G.Buffer.from(e,"hex"):c=e,ct(c.length===Rs,`Address must be ${Rs} bytes but received ${c.length} bytes`);const f=1+sd,g=f,m=f+c.length,k=m+i.length+1,A=1,v=G.Buffer.alloc(Ms.span+r.length);return Ms.encode({numSignatures:A,signatureOffset:m,signatureInstructionIndex:o,ethAddressOffset:g,ethAddressInstructionIndex:o,messageDataOffset:k,messageDataSize:r.length,messageInstructionIndex:o,signature:nt(i),ethAddress:nt(c),recoveryId:s},v),v.fill(nt(r),Ms.span),new yt({keys:[],programId:Yr.programId,data:v})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:i}=t;ct(e.length===yo,`Private key must be ${yo} bytes but received ${e.length} bytes`);try{const s=nt(e),o=nd(s,!1).slice(1),c=G.Buffer.from(Zi(nt(r))),[f,g]=rd(c,s);return this.createInstructionWithPublicKey({publicKey:o,message:r,signature:f,recoveryId:g,instructionIndex:i})}catch(s){throw new Error(`Error creating instruction; ${s}`)}}}Yr.programId=new F("KeccakSecp256k11111111111111111111111111111");var ic;const id=new F("StakeConfig11111111111111111111111111111111");class od{constructor(t,e){this.staker=void 0,this.withdrawer=void 0,this.staker=t,this.withdrawer=e}}class Hn{constructor(t,e,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=r}}ic=Hn;Hn.default=new ic(0,0,F.default);class Td{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=Y("instruction").decode(t.data);let i;for(const[s,o]of Object.entries(le))if(o.index==r){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a StakeInstruction");return i}static decodeInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e,lockup:r}=ft(le.Initialize,t.data);return{stakePubkey:t.keys[0].pubkey,authorized:new od(new F(e.staker),new F(e.withdrawer)),lockup:new Hn(r.unixTimestamp,r.epoch,new F(r.custodian))}}static decodeDelegate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,6),ft(le.Delegate,t.data),{stakePubkey:t.keys[0].pubkey,votePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[5].pubkey}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,stakeAuthorizationType:r}=ft(le.Authorize,t.data),i={stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new F(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(i.custodianPubkey=t.keys[3].pubkey),i}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{newAuthorized:e,stakeAuthorizationType:r,authoritySeed:i,authorityOwner:s}=ft(le.AuthorizeWithSeed,t.data),o={stakePubkey:t.keys[0].pubkey,authorityBase:t.keys[1].pubkey,authoritySeed:i,authorityOwner:new F(s),newAuthorizedPubkey:new F(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(o.custodianPubkey=t.keys[3].pubkey),o}static decodeSplit(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=ft(le.Split,t.data);return{stakePubkey:t.keys[0].pubkey,splitStakePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[2].pubkey,lamports:e}}static decodeMerge(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),ft(le.Merge,t.data),{stakePubkey:t.keys[0].pubkey,sourceStakePubKey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=ft(le.Withdraw,t.data),r={stakePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e};return t.keys.length>5&&(r.custodianPubkey=t.keys[5].pubkey),r}static decodeDeactivate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),ft(le.Deactivate,t.data),{stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static checkProgramId(t){if(!t.equals(di.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const le=Object.freeze({Initialize:{index:0,layout:J([Y("instruction"),bf(),wf()])},Authorize:{index:1,layout:J([Y("instruction"),st("newAuthorized"),Y("stakeAuthorizationType")])},Delegate:{index:2,layout:J([Y("instruction")])},Split:{index:3,layout:J([Y("instruction"),Be("lamports")])},Withdraw:{index:4,layout:J([Y("instruction"),Be("lamports")])},Deactivate:{index:5,layout:J([Y("instruction")])},Merge:{index:7,layout:J([Y("instruction")])},AuthorizeWithSeed:{index:8,layout:J([Y("instruction"),st("newAuthorized"),Y("stakeAuthorizationType"),gr("authoritySeed"),st("authorityOwner")])}}),Ld=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class di{constructor(){}static initialize(t){const{stakePubkey:e,authorized:r,lockup:i}=t,s=i||Hn.default,o=le.Initialize,c=it(o,{authorized:{staker:nt(r.staker.toBuffer()),withdrawer:nt(r.withdrawer.toBuffer())},lockup:{unixTimestamp:s.unixTimestamp,epoch:s.epoch,custodian:nt(s.custodian.toBuffer())}}),f={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:tn,isSigner:!1,isWritable:!1}],programId:this.programId,data:c};return new yt(f)}static createAccountWithSeed(t){const e=new ht;e.add(de.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:i,lockup:s}=t;return e.add(this.initialize({stakePubkey:r,authorized:i,lockup:s}))}static createAccount(t){const e=new ht;e.add(de.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:i,lockup:s}=t;return e.add(this.initialize({stakePubkey:r,authorized:i,lockup:s}))}static delegate(t){const{stakePubkey:e,authorizedPubkey:r,votePubkey:i}=t,s=le.Delegate,o=it(s);return new ht().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:Ze,isSigner:!1,isWritable:!1},{pubkey:_s,isSigner:!1,isWritable:!1},{pubkey:id,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static authorize(t){const{stakePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:i,stakeAuthorizationType:s,custodianPubkey:o}=t,c=le.Authorize,f=it(c,{newAuthorized:nt(i.toBuffer()),stakeAuthorizationType:s.index}),g=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Ze,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return o&&g.push({pubkey:o,isSigner:!0,isWritable:!1}),new ht().add({keys:g,programId:this.programId,data:f})}static authorizeWithSeed(t){const{stakePubkey:e,authorityBase:r,authoritySeed:i,authorityOwner:s,newAuthorizedPubkey:o,stakeAuthorizationType:c,custodianPubkey:f}=t,g=le.AuthorizeWithSeed,m=it(g,{newAuthorized:nt(o.toBuffer()),stakeAuthorizationType:c.index,authoritySeed:i,authorityOwner:nt(s.toBuffer())}),k=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:Ze,isSigner:!1,isWritable:!1}];return f&&k.push({pubkey:f,isSigner:!0,isWritable:!1}),new ht().add({keys:k,programId:this.programId,data:m})}static splitInstruction(t){const{stakePubkey:e,authorizedPubkey:r,splitStakePubkey:i,lamports:s}=t,o=le.Split,c=it(o,{lamports:s});return new yt({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:c})}static split(t,e){const r=new ht;return r.add(de.createAccount({fromPubkey:t.authorizedPubkey,newAccountPubkey:t.splitStakePubkey,lamports:e,space:this.space,programId:this.programId})),r.add(this.splitInstruction(t))}static splitWithSeed(t,e){const{stakePubkey:r,authorizedPubkey:i,splitStakePubkey:s,basePubkey:o,seed:c,lamports:f}=t,g=new ht;return g.add(de.allocate({accountPubkey:s,basePubkey:o,seed:c,space:this.space,programId:this.programId})),e&&e>0&&g.add(de.transfer({fromPubkey:t.authorizedPubkey,toPubkey:s,lamports:e})),g.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:i,splitStakePubkey:s,lamports:f}))}static merge(t){const{stakePubkey:e,sourceStakePubKey:r,authorizedPubkey:i}=t,s=le.Merge,o=it(s);return new ht().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:Ze,isSigner:!1,isWritable:!1},{pubkey:_s,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static withdraw(t){const{stakePubkey:e,authorizedPubkey:r,toPubkey:i,lamports:s,custodianPubkey:o}=t,c=le.Withdraw,f=it(c,{lamports:s}),g=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:Ze,isSigner:!1,isWritable:!1},{pubkey:_s,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return o&&g.push({pubkey:o,isSigner:!0,isWritable:!1}),new ht().add({keys:g,programId:this.programId,data:f})}static deactivate(t){const{stakePubkey:e,authorizedPubkey:r}=t,i=le.Deactivate,s=it(i);return new ht().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Ze,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}}di.programId=new F("Stake11111111111111111111111111111111111111");di.space=200;class ad{constructor(t,e,r,i){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=t,this.authorizedVoter=e,this.authorizedWithdrawer=r,this.commission=i}}class Cd{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=Y("instruction").decode(t.data);let i;for(const[s,o]of Object.entries(Fe))if(o.index==r){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a VoteInstruction");return i}static decodeInitializeAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,4);const{voteInit:e}=ft(Fe.InitializeAccount,t.data);return{votePubkey:t.keys[0].pubkey,nodePubkey:t.keys[3].pubkey,voteInit:new ad(new F(e.nodePubkey),new F(e.authorizedVoter),new F(e.authorizedWithdrawer),e.commission)}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,voteAuthorizationType:r}=ft(Fe.Authorize,t.data);return{votePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new F(e),voteAuthorizationType:{index:r}}}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:e,currentAuthorityDerivedKeySeed:r,newAuthorized:i,voteAuthorizationType:s}}=ft(Fe.AuthorizeWithSeed,t.data);return{currentAuthorityDerivedKeyBasePubkey:t.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new F(e),currentAuthorityDerivedKeySeed:r,newAuthorizedPubkey:new F(i),voteAuthorizationType:{index:s},votePubkey:t.keys[0].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=ft(Fe.Withdraw,t.data);return{votePubkey:t.keys[0].pubkey,authorizedWithdrawerPubkey:t.keys[2].pubkey,lamports:e,toPubkey:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(an.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const Fe=Object.freeze({InitializeAccount:{index:0,layout:J([Y("instruction"),kf()])},Authorize:{index:1,layout:J([Y("instruction"),st("newAuthorized"),Y("voteAuthorizationType")])},Withdraw:{index:3,layout:J([Y("instruction"),Be("lamports")])},UpdateValidatorIdentity:{index:4,layout:J([Y("instruction")])},AuthorizeWithSeed:{index:10,layout:J([Y("instruction"),vf()])}}),Od=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class an{constructor(){}static initializeAccount(t){const{votePubkey:e,nodePubkey:r,voteInit:i}=t,s=Fe.InitializeAccount,o=it(s,{voteInit:{nodePubkey:nt(i.nodePubkey.toBuffer()),authorizedVoter:nt(i.authorizedVoter.toBuffer()),authorizedWithdrawer:nt(i.authorizedWithdrawer.toBuffer()),commission:i.commission}}),c={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:tn,isSigner:!1,isWritable:!1},{pubkey:Ze,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o};return new yt(c)}static createAccount(t){const e=new ht;return e.add(de.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.votePubkey,lamports:t.lamports,space:this.space,programId:this.programId})),e.add(this.initializeAccount({votePubkey:t.votePubkey,nodePubkey:t.voteInit.nodePubkey,voteInit:t.voteInit}))}static authorize(t){const{votePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:i,voteAuthorizationType:s}=t,o=Fe.Authorize,c=it(o,{newAuthorized:nt(i.toBuffer()),voteAuthorizationType:s.index}),f=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Ze,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new ht().add({keys:f,programId:this.programId,data:c})}static authorizeWithSeed(t){const{currentAuthorityDerivedKeyBasePubkey:e,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:i,newAuthorizedPubkey:s,voteAuthorizationType:o,votePubkey:c}=t,f=Fe.AuthorizeWithSeed,g=it(f,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:nt(r.toBuffer()),currentAuthorityDerivedKeySeed:i,newAuthorized:nt(s.toBuffer()),voteAuthorizationType:o.index}}),m=[{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:Ze,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!0,isWritable:!1}];return new ht().add({keys:m,programId:this.programId,data:g})}static withdraw(t){const{votePubkey:e,authorizedWithdrawerPubkey:r,lamports:i,toPubkey:s}=t,o=Fe.Withdraw,c=it(o,{lamports:i}),f=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return new ht().add({keys:f,programId:this.programId,data:c})}static safeWithdraw(t,e,r){if(t.lamports>e-r)throw new Error("Withdraw will leave vote account with insufficient funds.");return an.withdraw(t)}static updateValidatorIdentity(t){const{votePubkey:e,authorizedWithdrawerPubkey:r,nodePubkey:i}=t,s=Fe.UpdateValidatorIdentity,o=it(s),c=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new ht().add({keys:c,programId:this.programId,data:o})}}an.programId=new F("Vote111111111111111111111111111111111111111");an.space=3762;const cd=new F("Va1idator1nfo111111111111111111111111111111"),ud=O({name:K(),website:et(K()),details:et(K()),iconUrl:et(K()),keybaseUsername:et(K())});class oc{constructor(t,e){this.key=void 0,this.info=void 0,this.key=t,this.info=e}static fromConfigData(t){let e=[...t];if(_e(e)!==2)return null;const i=[];for(let s=0;s<2;s++){const o=new F(Ie(e,0,Qe)),c=Ke(e)===1;i.push({publicKey:o,isSigner:c})}if(i[0].publicKey.equals(cd)&&i[1].isSigner){const s=gr().decode(G.Buffer.from(e)),o=JSON.parse(s);return ka(o,ud),new oc(i[1].publicKey,o)}return null}}const Nd=new F("Vote111111111111111111111111111111111111111"),ld=J([st("nodePubkey"),st("authorizedWithdrawer"),ot("commission"),ue(),pe(J([ue("slot"),Y("confirmationCount")]),cr(Y(),-8),"votes"),ot("rootSlotValid"),ue("rootSlot"),ue(),pe(J([ue("epoch"),st("authorizedVoter")]),cr(Y(),-8),"authorizedVoters"),J([pe(J([st("authorizedPubkey"),ue("epochOfLastAuthorizedSwitch"),ue("targetEpoch")]),32,"buf"),ue("idx"),ot("isEmpty")],"priorVoters"),ue(),pe(J([ue("epoch"),ue("credits"),ue("prevCredits")]),cr(Y(),-8),"epochCredits"),J([ue("slot"),ue("timestamp")],"lastTimestamp")]);class ac{constructor(t){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=t.nodePubkey,this.authorizedWithdrawer=t.authorizedWithdrawer,this.commission=t.commission,this.rootSlot=t.rootSlot,this.votes=t.votes,this.authorizedVoters=t.authorizedVoters,this.priorVoters=t.priorVoters,this.epochCredits=t.epochCredits,this.lastTimestamp=t.lastTimestamp}static fromAccountData(t){const r=ld.decode(nt(t),4);let i=r.rootSlot;return r.rootSlotValid||(i=null),new ac({nodePubkey:new F(r.nodePubkey),authorizedWithdrawer:new F(r.authorizedWithdrawer),commission:r.commission,votes:r.votes,rootSlot:i,authorizedVoters:r.authorizedVoters.map(fd),priorVoters:hd(r.priorVoters),epochCredits:r.epochCredits,lastTimestamp:r.lastTimestamp})}}function fd({authorizedVoter:n,epoch:t}){return{epoch:t,authorizedVoter:new F(n)}}function bo({authorizedPubkey:n,epochOfLastAuthorizedSwitch:t,targetEpoch:e}){return{authorizedPubkey:new F(n),epochOfLastAuthorizedSwitch:t,targetEpoch:e}}function hd({buf:n,idx:t,isEmpty:e}){return e?[]:[...n.slice(t+1).map(bo),...n.slice(0,t).map(bo)]}const wo={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function zd(n,t){const e=t===!1?"http":"https";if(!n)return wo[e].devnet;const r=wo[e][n];if(!r)throw new Error(`Unknown ${e} cluster: ${n}`);return r}async function Ud(n,t,e,r){let i,s;e&&Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")||e&&Object.prototype.hasOwnProperty.call(e,"nonceValue")?(i=e,s=r):s=e;const o=s&&{skipPreflight:s.skipPreflight,preflightCommitment:s.preflightCommitment||s.commitment,minContextSlot:s.minContextSlot},c=await n.sendRawTransaction(t,o),f=s&&s.commitment,m=(await(i?n.confirmTransaction(i,f):n.confirmTransaction(c,f))).value;if(m.err)throw c!=null?new Bn({action:o!=null&&o.skipPreflight?"send":"simulate",signature:c,transactionMessage:`Status: (${JSON.stringify(m)})`}):new Error(`Raw transaction ${c} failed (${JSON.stringify(m)})`);return c}const Kd=1e9;export{bd as Account,oo as AddressLookupTableAccount,Md as AddressLookupTableInstruction,nc as AddressLookupTableProgram,od as Authorized,Kf as BLOCKHASH_CACHE_TIMEOUT_MS,wd as BPF_LOADER_DEPRECATED_PROGRAM_ID,Ad as BPF_LOADER_PROGRAM_ID,Bd as BpfLoader,Je as COMPUTE_BUDGET_INSTRUCTION_LAYOUTS,Pd as ComputeBudgetInstruction,sc as ComputeBudgetProgram,Rd as Connection,hi as Ed25519Program,md as Enum,Tf as EpochSchedule,Ef as FeeCalculatorLayout,Zr as Keypair,Kd as LAMPORTS_PER_SOL,ir as LOOKUP_TABLE_INSTRUCTION_LAYOUTS,Nr as Loader,Hn as Lockup,gf as MAX_SEED_LENGTH,We as Message,An as MessageAccountKeys,Cr as MessageV0,ro as NONCE_ACCOUNT_LENGTH,ci as NonceAccount,yr as PACKET_DATA_SIZE,Qe as PUBLIC_KEY_LENGTH,F as PublicKey,En as SIGNATURE_LENGTH_IN_BYTES,yn as SOLANA_SCHEMA,id as STAKE_CONFIG_ID,le as STAKE_INSTRUCTION_LAYOUTS,mt as SYSTEM_INSTRUCTION_LAYOUTS,Ze as SYSVAR_CLOCK_PUBKEY,kd as SYSVAR_EPOCH_SCHEDULE_PUBKEY,vd as SYSVAR_INSTRUCTIONS_PUBKEY,xs as SYSVAR_RECENT_BLOCKHASHES_PUBKEY,tn as SYSVAR_RENT_PUBKEY,Sd as SYSVAR_REWARDS_PUBKEY,xd as SYSVAR_SLOT_HASHES_PUBKEY,_d as SYSVAR_SLOT_HISTORY_PUBKEY,_s as SYSVAR_STAKE_HISTORY_PUBKEY,Yr as Secp256k1Program,Bn as SendTransactionError,tt as SolanaJSONRPCError,Id as SolanaJSONRPCErrorCode,Ld as StakeAuthorizationLayout,Td as StakeInstruction,di as StakeProgram,Na as Struct,Ed as SystemInstruction,de as SystemProgram,ht as Transaction,Ua as TransactionExpiredBlockheightExceededError,$r as TransactionExpiredNonceInvalidError,Ka as TransactionExpiredTimeoutError,yt as TransactionInstruction,qa as TransactionMessage,sr as TransactionStatus,cd as VALIDATOR_INFO_KEY,ai as VERSION_PREFIX_MASK,Nd as VOTE_PROGRAM_ID,oc as ValidatorInfo,Wa as VersionedMessage,Ha as VersionedTransaction,ac as VoteAccount,Od as VoteAuthorizationLayout,ad as VoteInit,Cd as VoteInstruction,an as VoteProgram,zd as clusterApiUrl,Ud as sendAndConfirmRawTransaction,eo as sendAndConfirmTransaction};
